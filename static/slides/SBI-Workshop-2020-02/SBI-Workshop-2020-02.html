<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
  <head>
    <title>Inferenzstatistik mit Simulationstechniken</title>
    <meta charset="utf-8" />
    <meta name="author" content="Sebastian Sauer" />
    <script src="libs/jquery-1.11.3/jquery.min.js"></script>
    <script src="libs/elevate-section-attrs-2.0/elevate-section-attrs.js"></script>
    <link href="libs/font-awesome-5.3.1/css/fontawesome-all.min.css" rel="stylesheet" />
    <script src="libs/kePrint-0.0.1/kePrint.js"></script>
    <link rel="stylesheet" href="footer-header.css" type="text/css" />
    <link rel="stylesheet" href="xafom.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: middle, right, title-slide

# Inferenzstatistik mit Simulationstechniken
## Einführung
### Sebastian Sauer
### Dozententage 2020

---




layout: true
  
&lt;div class="my-header"&gt;&lt;/div&gt;

&lt;!-- the following lines define the header and the footer line: --&gt;
&lt;div class="my-header"&gt;&lt;/div&gt;

&lt;!-- the following lines define the header and the footer line: --&gt;
&lt;div class="my-footer"&gt;&lt;span&gt;Dozententage 2020    
&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&lt;/span&gt;&lt;/div&gt; 

&lt;div class="footer-line"&gt;&lt;/div&gt;









&lt;!-- Define an automatic count for header 1/2/exercises --&gt;


---


## Agenda


.right-column[
.vcenter[

### .grey[1]. Wozu  Simulationstechniken?

### .grey[2]. Der Biertest -- Konfidenzintervall

### .grey[3]. Der Pringels-Test -- Hypothesen testen, Teil 1 

### .grey[4]. Die Lächelstudie -- Hypothesen testen, Teil 2

### .grey[5]. Fazit

]
]


---



class: section

# .grey.xlarge[1] Wozu Simulationstechniken?


---


## Simu ... was?


&lt;/br&gt;
&lt;/br&gt;

### Simulationstechniken in der Datenanalyse nutzen die Stichprobendaten, um inferenzstatistische Schlüsse zu ziehen.


.pull-left[

### *Didaktiver* Nutzen:

A) weniger abstrakt

B) EIN Verfahren für (fast) alle Situationen
]


.pull-right[

### *Inhaltlicher* Nutzen

A) Manchmal präziser

B) Manchmal gibt es keine andere Möglichkeit]


---


## Verteilungsbasiert       vs. simulationsbasiert


&lt;/br&gt;
&lt;/br&gt;
&lt;/br&gt;

&lt;img src="img/simu-vs-analyse-1.png" width="90%" style="display: block; margin: auto;" /&gt;


---

## Verteilungsannahmen

### ... können falsch sein


&lt;img src="img/bootstrap-percent-data.png" width="70%" style="display: block; margin: auto;" /&gt;


.footnote[Rousselet, G. A., Pernet, C. R., &amp; Wilcox, R. R. (2019). A practical introduction to the bootstrap: A versatile method to make inferences by using data-driven simulations [Preprint]. PsyArXiv. https://doi.org/10.31234/osf.io/h8ft7]


---

## Der *t*-Test bei schiefen Verteilungen (I/II)

















&lt;img src="SBI-Workshop-2020-02_files/figure-html/cow1-1.png" width="70%" style="display: block; margin: auto;" /&gt;


95%-KI auf Basis der der *t*-Verteilung mit 29 df:

```
#&gt; [1] 0.9037929 2.3149338
#&gt; attr(,"conf.level")
#&gt; [1] 0.95
```


---



## Der *t*-Test bei schiefen Verteilungen (II/II)






























&lt;img src="SBI-Workshop-2020-02_files/figure-html/cow2-1.png" width="90%" style="display: block; margin: auto;" /&gt;

.footnote[Rousselet, G. A., Pernet, C. R., &amp; Wilcox, R. R. (2019). A practical introduction to the bootstrap: A versatile method to make inferences by using data-driven simulations [Preprint]. PsyArXiv. https://doi.org/10.31234/osf.io/h8ft7]



---

## Simulationstechniken sind nicht per se robuster
&lt;/br&gt;
&lt;/br&gt;



&lt;img src="img/figure_notrobust.png" width="90%" style="display: block; margin: auto;" /&gt;



.footnote[Rousselet, G. A., Pernet, C. R., &amp; Wilcox, R. R. (2019). A practical introduction to the bootstrap: A versatile method to make inferences by using data-driven simulations [Preprint]. PsyArXiv. https://doi.org/10.31234/osf.io/h8ft7]


---


## Repro-Krise?


&lt;/br&gt;
&lt;/br&gt;
&lt;/br&gt;


&lt;img src="img/repro-crisis.jpg" width="70%" style="display: block; margin: auto;" /&gt;



.footnote[Fanelli, D. (2018). Opinion: Is science really facing a reproducibility crisis, and do we need it to? Proceedings of the National Academy of Sciences, 115(11), 2628–2631. https://doi.org/10.1073/pnas.1708272114]



---


## The Introductory Statistics Course: A Ptolemaic Curriculum?


&lt;/br&gt;
&lt;/br&gt;
&lt;/br&gt;

&gt;    What we teach is largely the technical machinery of numerical approximations based on the normal distribution and its many subsidiary cogs. This machinery was once necessary, because the conceptually simpler alternative based on permutations was computationally beyond our reach. Before computers statisticians had no choice. These days we have no excuse. Randomization-based inference makes a direct connection between data production and the logic of inference that deserves to be at the core of every introductory course. Technology allows us to do more with less: more ideas, less technique. 




.footnote[Cobb, G. W. (2007). The introductory statistics course: A Ptolemaic curriculum? Technology Innovations in Statistics Education, 1(1).]


---

## Teach statistical thinking

&lt;/br&gt;
&lt;/br&gt;
  

### Emphasize Statistical Thinking

&lt;/br&gt;
&lt;/br&gt;

### More Data and Concepts, Less Theory and Fewer Recipes

Almost any course in statistics can be improved by more emphasis on data and concepts, and less emphasis on theory and recipes. 





.footnote[GAISE College Report ASA Revision Committee, “Guidelines for Assessment and Instruction in Statistics Education College Report 2016,” http://www.amstat.org/education/gaise.]





---






class: section

# .grey.xlarge[2] Der Biertest -- Konfidenzintervall

### .grey[Live-Experiment: Biersorte erschmecken]





---

## Erschmecke das "Biligbier"

&lt;/br&gt;
&lt;/br&gt;
&lt;/br&gt;
&lt;/br&gt;
&lt;/br&gt;
&lt;/br&gt;
.center[
<i class="fas  fa-beer fa-5x " style="color:#00998a;"></i> &amp;emsp; &amp;emsp;
<i class="fas  fa-beer fa-5x " style="color:#00998a;"></i> &amp;emsp; &amp;emsp;
<i class="fas  fa-beer fa-5x " style="color:red;"></i> 
]





---



## Du hast die Wahl


&lt;img src="img/Lidl-WR20160919.png" width="50%" style="display: block; margin: auto;" /&gt;

Im Rahmen des ~~normalen Unterrichts~~ einer Sonderveranstaltung der FOM wurde der Versuch durchgeführt:

- `\(n=34\)` Versuchspersonen&lt;sup&gt;*&lt;/sup&gt;
- `\(x=12\)` Treffer


.footnote[&lt;sup&gt;*&lt;/sup&gt; Selbstloser Einsatz für die Wissenschaft]

---


class:middle, right

## OK, kein Bier, nur Pringels

---


## Ablauf: Schmeck den Pringel heraus!


.left-column[
&lt;/br&gt;
&lt;/br&gt;



<i class="fas  fa-cookie fa-5x " style="color:#00998a;"></i> &amp;emsp; &amp;emsp;


<i class="fas  fa-cookie fa-5x " style="color:#00998a;"></i> &amp;emsp; &amp;emsp;


<i class="fas  fa-cookie fa-5x " style="color:red;"></i> 


]


.right-column[


&lt;/br&gt;
&lt;/br&gt;

1. Je zwei Personen, `\(A\)` und `\(B\)` finden sich in Pärchen

3. `\(A\)` wählt 1 Pringel-Chip und 2 Noname-Chips 

2. `\(A\)` reicht `\(B\)` nacheinander die 3 Chips in zufälliger Reihenfolge, `\(B\)` hat dabei die Augen geschlossen

3. `\(B\)` entscheidet sich, welcher Chips vermutlich der Pringle-Chip ist

5. Das Ergebnis (Treffer ja/nein) kann hier eingetragen werden: https://forms.gle/w1bUMGvdDofadih68

6. Bitte notieren Sie das Ergebnis (Treffer ja/nein) auch auf einen Zettel (den zusammenfalten)



]

Barcode zum Link:

&lt;img src="img/barcode.png" width="80%" style="display: block; margin: auto;" /&gt;


---


## Was ist der wahre Erschmecker-Anteil?





.pull-left[

### Anteil Stichprobe: 12/34

&lt;/br&gt;
&lt;/br&gt;
&lt;/br&gt;
&lt;/br&gt;

&lt;img src="SBI-Workshop-2020-02_files/figure-html/waffle1-1.png" width="70%" style="display: block; margin: auto;" /&gt;




]

.pull-right[

### Anteil in Population der FOM-Profs???


&lt;img src="SBI-Workshop-2020-02_files/figure-html/normal1-1.png" width="70%" height="200px" style="display: block; margin: auto;" /&gt;



]


---

## Idee 1: Wir testen alle FOM-Profs!

.pull-left[



![](img/de-plot.png)

]


.pull-right[

&lt;/br&gt;

![](https://media.giphy.com/media/QMHz8SMCgf50jaEFq4/giphy.gif)


### super. Dauert aber.
]

---


## Idee 2: Wir wiederholen der Versuch oft!



&lt;/br&gt;

### z.B. 100 Mal:





&lt;img src="SBI-Workshop-2020-02_files/figure-html/plot-stiprovert-1.png" width="70%" style="display: block; margin: auto;" /&gt;



### super. Dauert aber.






---

## Idee 3: Der Münchhausen-Trick


&lt;/br&gt;
&lt;/br&gt;


&lt;img src="SBI-Workshop-2020-02_files/figure-html/bootstrap-illustration-1.png" width="70%" style="display: block; margin: auto;" /&gt;

---


## Ziele *viele* Stichproben mit Zurücklegen


### Voila -- Die Bootstrap-Verteilung:





&lt;img src="SBI-Workshop-2020-02_files/figure-html/bootvtlg-plot-1.png" width="70%" style="display: block; margin: auto;" /&gt;







---

## Auf Errisch geht das so...


.pull-left[


```r
library(mosaic)

# unsere Stichprobe:
stipro &lt;- rep(factor(c("f","r")),
              c(22, 12)) 


# 3 Bootstrap-Stichproben:
boot1 &lt;- mosaic::do(3) * 
  prop( ~ resample(stipro),
        success = "r") 
boot1
#&gt;      prop_r
#&gt; 1 0.3529412
#&gt; 2 0.3823529
#&gt; 3 0.3529412
```


]


.pull-right[


```r
# Histogramm zeichnen:
gf_bar( ~ prop_r, data = Bootvtlg)
```

&lt;img src="SBI-Workshop-2020-02_files/figure-html/unnamed-chunk-18-1.png" width="100%" style="display: block; margin: auto;" /&gt;


]


---



## Bootstrap-Kochrezept

### Voraussetzungen

- Zufallsstichprobe
- Nicht zu kleine Stichprobe, `\(n\ge35\)`


&lt;/br&gt;
&lt;/br&gt;

### Ablauf

1. Ziehe 1000  Bootstrap-Stichproben

2. Berechne jeweils Statistik (z.B. Anteil)

3. Sortiere die Stichproben nach ihrem Wert

3. Zeichne Histogram

4. Schneide links/rechts jeweils 25 Stichproben ab


---


###  Übung: Ist 1/3 ein plausibler Wert in der FOM-Prof-Population? 


.xlarge[🏋️‍♀️]

&lt;/br&gt;
&lt;/br&gt;
&lt;/br&gt;
&lt;/br&gt;



```r
boot2 &lt;- mosaic::do(1000) * prop( ~ resample(stipro), success = "r")
confint(boot2)
#&gt;     name     lower     upper level     method  estimate
#&gt; 1 prop_r 0.2058824 0.5294118  0.95 percentile 0.3529412
```


&lt;/br&gt;
&lt;/br&gt;


---


class: section

# .grey.xlarge[3]  Der Pringels-Test -- Hypothesen testen, Teil 1 
### .grey[Echte Pringels kann man nicht rausschmecken (?)]


---


### Übung: Rate-Wahrscheinlichkeit

&lt;/br&gt;
.xlarge[🏋️‍♀️]

&lt;/br&gt;


.left-column[
&lt;/br&gt;
<i class="fas  fa-question-circle fa-5x " style="color:#00998a;"></i>
]



.right-column[
Wie groß ist die Wahrscheinlichkeit `\(\pi\)`, einen Pringel unter drei Proben rein *zufällig*, also durch Raten, herauszuschmecken?



A. `\(\pi = 0\)`

B. `\(\pi = 1/3\)`

C. `\(\pi = 1/2\)`

D. `\(\pi = 2/3\)`

B. `\(\pi = 1\)`

]

---

## "Pringels kann man nicht rausschmecken!"

&lt;/br&gt;
&lt;/br&gt;
.pull-left[

&lt;iframe src="https://giphy.com/embed/wYyTHMm50f4Dm" width="480" height="277" frameBorder="0" class="giphy-embed" allowFullScreen&gt;&lt;/iframe&gt;&lt;p&gt;&lt;a href="https://giphy.com/gifs/mrw-oc-asks-wYyTHMm50f4Dm"&gt;via GIPHY&lt;/a&gt;&lt;/p&gt;

]


.pull-right[


&lt;/br&gt;



`\(H_0: \pi \le 1/3\)`.

`\(H_A: \pi &gt; 1/3\)`.


]


---


## Angenommen, Pringels schmecken genau wie NoName-Chips 

&lt;/br&gt;
&lt;/br&gt;
&lt;/br&gt;
&lt;/br&gt;

.pull-left[


.center[
<i class="fas  fa-beer fa-5x " style="color:#00998a;"></i> &amp;emsp; &amp;emsp;
<i class="fas  fa-beer fa-5x " style="color:#00998a;"></i> &amp;emsp; &amp;emsp;
<i class="fas  fa-beer fa-5x " style="color:red;"></i> 
]

]


.pull-right[

### dann: Trefferchance =  1/3
]
&lt;/br&gt;
&lt;/br&gt;

&lt;/br&gt;
&lt;/br&gt;





---


## Stellen wir den Versuch anhand von Münzwürfen nach



### Werfen wir *eine* gezinkte Münze (Trefferquote 1/3):


```r
rflip(prob = 1/3)
#&gt; 
#&gt; Flipping 1 coin [ Prob(Heads) = 0.333333333333333 ] ...
#&gt; 
#&gt; T
#&gt; 
#&gt; Number of Heads: 0 [Proportion Heads: 0]
```



### Jetzt `\(n=34\)` gezinkte Münzen:



```r
rflip(n = 34, prob = 1/3)
#&gt; 
#&gt; Flipping 34 coins [ Prob(Heads) = 0.333333333333333 ] ...
#&gt; 
#&gt; T T T T T T T T H T H T T H H T T H H T H H T T H T H T T T T T T T
#&gt; 
#&gt; Number of Heads: 10 [Proportion Heads: 0.294117647058824]
```


---

### Wir simulieren den Versuch ~~oft~~ ein paar Mal



```r
rflip(n = 34, prob = 1/3)
#&gt; 
#&gt; Flipping 34 coins [ Prob(Heads) = 0.333333333333333 ] ...
#&gt; 
#&gt; T H T H T T H T T T T H T T T T T T H H H T H H T T H T H H T T H T
#&gt; 
#&gt; Number of Heads: 13 [Proportion Heads: 0.382352941176471]
rflip(n = 34, prob = 1/3)
#&gt; 
#&gt; Flipping 34 coins [ Prob(Heads) = 0.333333333333333 ] ...
#&gt; 
#&gt; T H H T T T T T T H H T H H T H H T T T T T T H T T T T H T H T H H
#&gt; 
#&gt; Number of Heads: 13 [Proportion Heads: 0.382352941176471]
```

...

---

## Wir erzeugen 1000 Rate-Stichproben



```r
Nullvtlg &lt;- mosaic::do(10000) * rflip(n = 34, prob = 1/3)
gf_bar( ~ heads, data = Nullvtlg )
```

&lt;img src="SBI-Workshop-2020-02_files/figure-html/unnamed-chunk-23-1.png" width="70%" style="display: block; margin: auto;" /&gt;


---


## Die Blaupause eines (jeden) statistisches Tests

&lt;/br&gt;
&lt;/br&gt;

&lt;/br&gt;
&lt;/br&gt;
&lt;img src="https://lh4.googleusercontent.com/Bud31guq0w0FvylY57VMR0zHkYqxIpYAfOqgZietyvv1n2ToNEHwHKZWYix8pwct8kDKsZKiwvOWm6PIFEL3gBIQmbakQYHwVT02nn9_H8Fht_zaSBlrRNcqwZa950Vb5nt-5B84" width="90%" style="display: block; margin: auto;" /&gt;




---

## p-Wert

### p-Wert: Anteil der Stichproben mit mindestens 12 Treffer:


.pull-left[


```r
gf_bar( ~ heads, 
        data = Nullvtlg)
```
]


.pull-right[
&lt;img src="SBI-Workshop-2020-02_files/figure-html/muenze-null-graph-1.png" width="90%" style="display: block; margin: auto;" /&gt;
]




```r
prop( ~ heads &gt;= 12, 
      data = Nullvtlg)
#&gt; prop_TRUE 
#&gt;    0.4644
```


---


## Als sehr, sehr wichtig


&lt;img src="https://i.imgflip.com/22q4jc.jpg" width="40%" style="display: block; margin: auto;" /&gt;




&lt;/br&gt;
### ... wird der p-Wert von vielen erachtet.





---


## Die Daten sind plausibel unter der Nullhypothese.



.pull-left[

&lt;img src="SBI-Workshop-2020-02_files/figure-html/unnamed-chunk-28-1.png" width="90%" style="display: block; margin: auto;" /&gt;


]


.pull-right[

&lt;/br&gt;
&lt;/br&gt;

### Die Daten sind mit der `\(H_0\)` kompatibel.

&lt;/br&gt;
&lt;/br&gt;


]


&lt;/br&gt;
&lt;/br&gt;


### Wir können die Nullhypothese also nicht ablehnen.


---

## p-Wert: Eine gute Geschichte

### ... verdient, aufgebauscht zu werden (?)



&lt;img src="https://imgs.xkcd.com/comics/p_values_2x.png" width="30%" style="display: block; margin: auto;" /&gt;



.footnote[[www.xkcd.com/about](xkcd.com) .xsmall[Note: You are welcome to reprint occasional comics pretty much anywhere (presentations, papers, blogs with ads, etc). If you're not outright merchandizing, you're probably fine. Just be sure to attribute the comic to xkcd.com.]]


---


## Forschung über dem 5%-Niveau


.pull-left[

&lt;img src="https://sciences.adelaide.edu.au/sites/default/files/styles/ua_image/public/media/images/2019-06/ronald-fisher-4-uofa.jpg?itok=I9g1VlER" width="50%" style="display: block; margin: auto;" /&gt;

"Mein p-Wert ist der ~~größte~~ kleinste."

[Bildquelle](https://sciences.adelaide.edu.au/sites/default/files/styles/ua_image/public/media/images/2019-06/ronald-fisher-4-uofa.jpg?itok=I9g1VlER)

]

"... some statisticians prefer to supplement or even replace p-values with other approaches. These include methods that emphasize estimation over testing, such as confidence ... intervals ..."


"Good statistical practice ... emphasizes principles of good study design ... , a variety of numerical and graphical summaries of data, understanding of the phenomenon under study, interpretation of results in context, complete reporting and proper logical and quantitative understanding of what data summaries mean."


### ... No single index should substitute for scientific reasoning.


.footnote[Ronald L. Wasserstein &amp; Nicole A. Lazar (2016) The ASA Statement on p-Values: Context, Process, and Purpose, The American Statistician, 70:2, 129-133, DOI: 10.1080/00031305.2016.1154108]


---

## Gott liebt


&lt;/br&gt;
&lt;/br&gt;

### ... 0.051 fast genauso sehr wie 0.049


&lt;/br&gt;
&lt;/br&gt;

### Im Übrigen ...

&lt;blockquote class="twitter-tweet"&gt;&lt;p lang="en" dir="ltr"&gt;I have no interest in you or your life.&lt;/p&gt;&amp;mdash; God (@TheTweetOfGod) &lt;a href="https://twitter.com/TheTweetOfGod/status/1081033733040271360?ref_src=twsrc%5Etfw"&gt;January 4, 2019&lt;/a&gt;&lt;/blockquote&gt; &lt;script async src="https://platform.twitter.com/widgets.js" charset="utf-8"&gt;&lt;/script&gt;



.footnote[Gelman, A., &amp; Stern, H. (2006). The Difference Between “Significant” and “Not Significant” is not Itself Statistically Significant. The American Statistician, 60(4), 328–331. https://doi.org/10.1198/000313006X152649
]
---


class: section

# .grey.xlarge[4]  Die Lächelstudie -- Hypothesen testen, Teil 2

### .grey[Stimmt Lächeln nachsichtiger?]


---


## Stimmt Lächeln nachsichtiger?


.pull-left[
![](https://news.developer.nvidia.com/wp-content/uploads/2017/02/Mona-Lisa-gif.gif)


[Bildquelle](https://news.developer.nvidia.com/this-ai-selfie-transformation-app-can-even-make-mona-lisa-smile/)

]

.pull-right[

### Skeptiker: 
### "Lächeln bringt doch nichts!"

### `\(H_0: \mu_{\text{Lächeln}} \le \mu_{\text{Neutral}}\)`

### `\(H_A: \mu_{\text{Lächeln}} &gt; \mu_{\text{Neutral}}\)`

.footnote[LaFrance, M., &amp; Hecht, M. A. (1995). Why smiles generate leniency. Personality and Social Psychology Bulletin, 21(3), 207-214, https://doi.org/10.1177%2F0146167295213002]

]









---

## Finde den echten Datensatz

.large.green[11] Datensätze wurden so simuliert, dass es keinen Unterschied in den Mittelwerten der Populationen gibt, .large.green[1] Datensatz ist echt. 


&lt;img src="SBI-Workshop-2020-02_files/figure-html/smile-1.png" width="80%" style="display: block; margin: auto;" /&gt;




---

## Angenommen, es gäbe keinen Zusammenhang

### ... von Lächeln und Nachsichtigkeit. Wie häufig wäre unser empirischer Wert in diesen Stichproben?



&lt;img src="SBI-Workshop-2020-02_files/figure-html/smiledot-1.png" width="70%" style="display: block; margin: auto;" /&gt;




---



## Der p-Wert schlägt zurück


.pull-left[

&lt;img src="https://sciences.adelaide.edu.au/sites/default/files/styles/ua_image/public/media/images/2019-06/ronald-fisher-4-uofa.jpg?itok=I9g1VlER" width="60%" style="display: block; margin: auto;" /&gt;

"Wer die Definition vergisst, dem tättoviere ich *p-value* auf den Unterarm."



[Bildquelle](https://sciences.adelaide.edu.au/sites/default/files/styles/ua_image/public/media/images/2019-06/ronald-fisher-4-uofa.jpg?itok=I9g1VlER)
]




.pull-right[

&lt;/br&gt;
&lt;/br&gt;
### *Wenn* die Daten aus einer Population stammen, in der die Nullhypothese stimmt, *dann* ist unser empirisches Ergebnis *selten* (unplausibel).

### Auf dieser Basis entscheiden wir uns in diesem Fall, die `\(H_0\)` zu verwerfen (bzw. nicht mehr so stark wie vorher an sie zu glauben).

]


---

## Wie stellt man die Nullverteilung her?

.pull-left[
&lt;/br&gt;
&lt;/br&gt;
&lt;/br&gt;

.grey.xlarge[1.]  

## Man reist in ein Land, in dem es keinen Zusammenhang gibt (zwischen Lächeln und Nachsichtigkeit) und zieht dort viele Stichproben.

&lt;/br&gt;
&lt;/br&gt;
]


.pull-right[

&lt;img src="SBI-Workshop-2020-02_files/figure-html/unnamed-chunk-32-1.png" width="90%" height="80%" style="display: block; margin: auto;" /&gt;

]

---

## ... Oder man mischt eine Spalte


.pull-left[
&lt;/br&gt;
&lt;/br&gt;
&lt;/br&gt;


.grey.xlarge[2.] 

## Man mischt die Spalte (z.B. UV) durch, so dass der Zusammenhang zwischen der Spalte UV under einer anderen Spalte (AV) aufgelöst wird.
]

.pull-right[
&lt;/br&gt;
&lt;/br&gt;
&lt;img src="img/shuffle.001.jpeg" width="100%" style="display: block; margin: auto;" /&gt;

]



---

## So mischt man eine Spalte mit R



```r
Nullvtlg_gesicht &lt;- mosaic::do(100)*diffmean(nachsichtigkeit ~ shuffle(gesicht), 
                             data = Laecheln)
```

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; gesicht &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; gesicht_gemischt &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; nachsichtigkeit &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; lächeln &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; neutral &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7.0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; lächeln &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; neutral &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3.0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; lächeln &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; lächeln &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 6.0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; lächeln &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; lächeln &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4.5 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; lächeln &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; neutral &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3.5 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; lächeln &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; lächeln &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4.0 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;


---

## Übung: Konsumieren Raucher im Schnitt mehr? (1/3)

### `\(H0: \mu_R = \mu_{NR}\)`
### `\(H_A: \mu_r \ne \mu_{NR}\)`


.pull-left[
Daten laden:


```r
download.file("https://goo.gl/whKjnl", 
              destfile = "tips.csv")
tips &lt;- read.csv2("tips.csv")
```


Nullverteilung berechnen:


```r
library(mosaic)
Nullvtlg_Raucher &lt;- mosaic::do(1000) * 
  diffmean(total_bill ~ shuffle(smoker),
           data = tips)
```

]

.pull-right[

Die ersten paar Werte aus den Stichproben der Nullverteilung:


&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;"&gt; diffmean &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; -1.2006729 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 1.5180254 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2.1377989 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0.2732657 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 1.6922987 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0.0890885 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

]






---


## Übung: Konsumieren Raucher im Schnitt mehr? (2/3)


`\(H_0\)`-Verteilung visualisieren:


```r
gf_histogram( ~ diffmean, data = Nullvtlg_Raucher) %&gt;%
gf_vline(xintercept = ~diffmean(total_bill ~ smoker, data = tips))
```


&lt;img src="SBI-Workshop-2020-02_files/figure-html/unnamed-chunk-40-1.png" width="70%" style="display: block; margin: auto;" /&gt;



---

## Übung: Konsumieren Raucher im Schnitt mehr? (2/3)


.pull-left[

Empirische Differenz/Wert in der Stichprobe:


```
#&gt; diffmean 
#&gt; 1.568066
```


Anteil der Stichproben, die mind. so groß sind wie der emp. Wert:


```
#&gt; prop_TRUE 
#&gt;     0.099
```

Mal zwei nehmen, da ungerichtete Hypothese:


```
#&gt; prop_TRUE 
#&gt;     0.198
```


]


.pull-right[

&lt;img src="SBI-Workshop-2020-02_files/figure-html/unnamed-chunk-44-1.png" width="100%" style="display: block; margin: auto;" /&gt;

]




---

class: section

# .grey.xlarge[5] Fazit

### .grey[Wie war das nochmal im Mittelteil?]


---



## Verteilungsbasiert vs. simulationsbasiert

&lt;/br&gt;
&lt;/br&gt;
&lt;/br&gt;

&lt;img src="img/simu-vs-analyse-1.png" width="90%" style="display: block; margin: auto;" /&gt;


---





## Drei Varianten von Simulationstechniken

&lt;/br&gt;
&lt;/br&gt;


.xlarge.grey[1.] **Bootstrapping**: Ziehe viele Stichproben mit Zurücklegen aus Originalstichprobe, um Konfidenzintervall zu erhalten

&lt;/br&gt;
&lt;/br&gt;

.xlarge.grey[2.] **Permutationtest**: Testen von Zusammenhangs-/Unterschiedshypothesen


&lt;/br&gt;
&lt;/br&gt;


.xlarge.grey[3.] **Einfache Simulation**: Führe den Versuch oft durch, unter Annahme von `\(H_0\)`

---

## Drei Varianten von Simulationstechniken -- mit R

&lt;/br&gt;
&lt;/br&gt;


.xlarge.grey[1.] **Bootstrapping**: Ziehe viele Stichproben mit Zurücklegen aus Originalstichprobe, um Konfidenzintervall zu erhalten


```r
do(oft) * statistik(y ~ x, data = resample(Daten))
```

&lt;/br&gt;

.xlarge.grey[2.] **Permutationtest**: Testen von Zusammenhangs-/Unterschiedshypothesen




```r
do(oft) * statistik(y ~ shuffle(x), data = Daten)
```
&lt;/br&gt;

.xlarge.grey[3.] **Einfache Simulation**: Führe den Versuch oft durch, unter Annahme von `\(H_0\)`



```r
do(oft) * ziehe_aus_verteilung(n, parameterwerte)
```


---


## Übersicht Teststatistiken (Auswahl)

&lt;table class="table" style="margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; Y &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; X &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; Statistik &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;width: 2cm; "&gt; binär &lt;/td&gt;
   &lt;td style="text-align:left;width: 2cm; "&gt; NA &lt;/td&gt;
   &lt;td style="text-align:left;width: 14cm; "&gt; Anteil `\(p\)` &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;width: 2cm; "&gt; kategorial &lt;/td&gt;
   &lt;td style="text-align:left;width: 2cm; "&gt; NA &lt;/td&gt;
   &lt;td style="text-align:left;width: 14cm; "&gt; Verhältnis beobachtet/erwartet: `\(\chi^2\)` &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;width: 2cm; "&gt; kategorial &lt;/td&gt;
   &lt;td style="text-align:left;width: 2cm; "&gt; NA &lt;/td&gt;
   &lt;td style="text-align:left;width: 14cm; "&gt; Verhältnis beobachtet/erwartet": `\(\chi^2\)` &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;width: 2cm; "&gt; numerisch &lt;/td&gt;
   &lt;td style="text-align:left;width: 2cm; "&gt; NA &lt;/td&gt;
   &lt;td style="text-align:left;width: 14cm; "&gt; Mittelwert `\(\bar{x}\)` &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;width: 2cm; "&gt; binär &lt;/td&gt;
   &lt;td style="text-align:left;width: 2cm; "&gt; binär &lt;/td&gt;
   &lt;td style="text-align:left;width: 14cm; "&gt; Differenz der Anteile `\(p_B-p_A\)` &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;width: 2cm; "&gt; numerisch &lt;/td&gt;
   &lt;td style="text-align:left;width: 2cm; "&gt; binär &lt;/td&gt;
   &lt;td style="text-align:left;width: 14cm; "&gt; Differenz der Mittelwerte `\(\bar{x}_B-\bar{x}_A\)` &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;width: 2cm; "&gt; kategorial &lt;/td&gt;
   &lt;td style="text-align:left;width: 2cm; "&gt; kategorial &lt;/td&gt;
   &lt;td style="text-align:left;width: 14cm; "&gt; Verhältnis beobachtet/erwartet: `\(\chi^2\)` &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;width: 2cm; "&gt; numerisch &lt;/td&gt;
   &lt;td style="text-align:left;width: 2cm; "&gt; kategorial &lt;/td&gt;
   &lt;td style="text-align:left;width: 14cm; "&gt; Verhältnis Varianz zwischen/innerhalb der Gruppen: `\(F\)` &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;width: 2cm; "&gt; numerisch &lt;/td&gt;
   &lt;td style="text-align:left;width: 2cm; "&gt; numerisch &lt;/td&gt;
   &lt;td style="text-align:left;width: 14cm; "&gt; Korrelation oder Regression `\(r, \hat{\beta}\)` &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;width: 2cm; "&gt; kategorial &lt;/td&gt;
   &lt;td style="text-align:left;width: 2cm; "&gt; numerisch &lt;/td&gt;
   &lt;td style="text-align:left;width: 14cm; "&gt; Regression `\(\hat{\beta}\)` (logistische oder multinomiale Regression) &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---



### Übersicht Inferenzverfahren R mosaic (Auswahl)



&lt;table class="table" style="margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; Y &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; X &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; simulationsbasiert &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; konventionell &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;width: 1.8cm; "&gt; binär &lt;/td&gt;
   &lt;td style="text-align:left;width: 1.8cm; "&gt; . &lt;/td&gt;
   &lt;td style="text-align:left;width: 5cm; width: 5cm; "&gt; prop() &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; binom.test() &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;width: 1.8cm; "&gt; kategorial &lt;/td&gt;
   &lt;td style="text-align:left;width: 1.8cm; "&gt; . &lt;/td&gt;
   &lt;td style="text-align:left;width: 5cm; width: 5cm; "&gt; xchisq.test() &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; xchisq.test() &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;width: 1.8cm; "&gt; kategorial &lt;/td&gt;
   &lt;td style="text-align:left;width: 1.8cm; "&gt; . &lt;/td&gt;
   &lt;td style="text-align:left;width: 5cm; width: 5cm; "&gt; chisq.test() &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; chisq.test() &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;width: 1.8cm; "&gt; numerisch &lt;/td&gt;
   &lt;td style="text-align:left;width: 1.8cm; "&gt; . &lt;/td&gt;
   &lt;td style="text-align:left;width: 5cm; width: 5cm; "&gt; mean() &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; t.test() &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;width: 1.8cm; "&gt; binär &lt;/td&gt;
   &lt;td style="text-align:left;width: 1.8cm; "&gt; binär &lt;/td&gt;
   &lt;td style="text-align:left;width: 5cm; width: 5cm; "&gt; diffprop() &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; prop.test() &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;width: 1.8cm; "&gt; numerisch &lt;/td&gt;
   &lt;td style="text-align:left;width: 1.8cm; "&gt; binär &lt;/td&gt;
   &lt;td style="text-align:left;width: 5cm; width: 5cm; "&gt; diffmean() &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; t.test() &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;width: 1.8cm; "&gt; kategorial &lt;/td&gt;
   &lt;td style="text-align:left;width: 1.8cm; "&gt; kategorial &lt;/td&gt;
   &lt;td style="text-align:left;width: 5cm; width: 5cm; "&gt; xchisq.test() &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; xchisq.test() &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;width: 1.8cm; "&gt; numerisch &lt;/td&gt;
   &lt;td style="text-align:left;width: 1.8cm; "&gt; kategorial &lt;/td&gt;
   &lt;td style="text-align:left;width: 5cm; width: 5cm; "&gt; aov() &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; aov() &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;width: 1.8cm; "&gt; numerisch &lt;/td&gt;
   &lt;td style="text-align:left;width: 1.8cm; "&gt; numeric &lt;/td&gt;
   &lt;td style="text-align:left;width: 5cm; width: 5cm; "&gt; cor(), lm() &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; cor.test(), lm() &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;width: 1.8cm; "&gt; kategorial &lt;/td&gt;
   &lt;td style="text-align:left;width: 1.8cm; "&gt; numerisch &lt;/td&gt;
   &lt;td style="text-align:left;width: 5cm; width: 5cm; "&gt; glm(family= 'binomial') &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; glm(family= 'binomial') &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;



---

## Nutzen und Grenzen



&lt;/br&gt;

&lt;/br&gt;

.pull-left[
<i class="fas  fa-plus-square fa-5x " style="color:#00998a;"></i>

- *Ein* Prinzip für alle gängigen Verfahren

- *Wenige* Voraussetzungen

- *Einfach*, wenig abstrakt

]


.pull-right[
<i class="fas  fa-minus-square fa-5x " style="color:#00998a;"></i>

- Zur *Anschlussfähigkeit* sollten Namen konventioneller Verfahren (wie *t*-Test) weiterhin gelehrt werden


]


---

## Sinnbild: Bootstrap

&lt;/br&gt;
&lt;/br&gt;

&lt;img src="img/bootstrapping-sinnbild-crop.png" width="70%" style="display: block; margin: auto;" /&gt;

---

## Sinnbild: Zusammenhang zweier Variablen (Permutationstest)


&lt;/br&gt;

&lt;img src="img/shuffle.001.jpeg" width="70%" style="display: block; margin: auto;" /&gt;

---



## Sinnbild: Test auf bestimmten Wert einer Variablen



&lt;img src="img/simu-einfach-crop.png" width="70%" style="display: block; margin: auto;" /&gt;


---


## Fragen, Feedback, Feierlichkeiten?

&lt;/br&gt;
&lt;/br&gt;






.right[
### Sprechen Sie uns an!
<i class="fas  fa-envelope "></i> sebastian.sauer@fom.de

&lt;/br&gt;
&lt;/br&gt;


Diese Folien wurden von Autor*innen der FOM https://www.fom.de/ entwickelt und stehen unter der Lizenz CC-BY-SA-NC 3.0 de: https://creativecommons.org/licenses/by-nc-sa/3.0/de/

]



    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"ratio": "4:3"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();</script>
<style>
.logo {
  background-image: url(img/logo.jpg);
  background-size: contain;
  background-repeat: no-repeat;
  position: absolute;
  top: 1em;
  right: 1em;
  width: 70px;
  height: 70px;  
  z-index: 0;
}
</style>

<script>
document
  .querySelectorAll(
    '.remark-slide-content' +
    ':not(.title-slide)' +
    ':not(.inverse)' + 
    // add additional classes to exclude here, e.g.
    // ':not(.inverse)' +
    ':not(.hide-logo)'
  )
  .forEach(el => {
    el.innerHTML += '<div class="logo"></div>';
  });
</script>

<script>
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
