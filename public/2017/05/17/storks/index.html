<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

  <title>A predictor&#39;s unique contribution - (visual) demonstration</title>
  <meta property="og:title" content="A predictor&#39;s unique contribution - (visual) demonstration" />
  <meta name="twitter:title" content="A predictor&#39;s unique contribution - (visual) demonstration" />
  <meta name="description" content="A well-known property of regression models is that they capture the unique contribution of a predictor. By &ldquo;unique&rdquo; we mean the effect of the predictor (on the criterion) if the other predictor(s) is/are held constant. A typical classroom example goes along the following lines.
All about storks  There&rsquo;s a correlation between babies and storks. Counties with lots of storks enjoy large number of babies and v.v.
 However, I have children, I know the storks are not overly involved in that business, so says the teacher (polite laughters in the audience).">
  <meta property="og:description" content="A well-known property of regression models is that they capture the unique contribution of a predictor. By &ldquo;unique&rdquo; we mean the effect of the predictor (on the criterion) if the other predictor(s) is/are held constant. A typical classroom example goes along the following lines.
All about storks  There&rsquo;s a correlation between babies and storks. Counties with lots of storks enjoy large number of babies and v.v.
 However, I have children, I know the storks are not overly involved in that business, so says the teacher (polite laughters in the audience).">
  <meta name="twitter:description" content="A well-known property of regression models is that they capture the unique contribution of a predictor. By &ldquo;unique&rdquo; we mean the effect of the predictor (on the criterion) if the other â€¦">
  <meta name="author" content=""/>
  <meta property="og:image" content="" />
  <meta name="twitter:image" content="" />
  <meta name="twitter:card" content="summary" />
  <meta property="og:url" content="/2017/05/17/storks/" />
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="Data Se" />

  <meta name="generator" content="Hugo 0.21" />
  <link rel="canonical" href="/2017/05/17/storks/" />
  <link rel="alternate" href="" type="application/rss+xml" title="Data Se">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.css" integrity="sha384-wITovz90syo1dJWVh32uuETPVEtGigN07tkttEqPv+uR2SE/mbQcG7ATL28aI9H0" crossorigin="anonymous">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" />
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  <link rel="stylesheet" href="/css/main.css" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" />
  <link rel="stylesheet" href="/css/highlighting.css" />
  <link rel="stylesheet" href="/css/pygment_highlights.css" />
  <link rel="stylesheet" href="/css/highlight.min.css" />


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.1/photoswipe.min.css" integrity="sha256-sCl5PUOGMLfFYctzDW3MtRib0ctyUvI9Qsmq2wXOeBY=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.1/default-skin/default-skin.min.css" integrity="sha256-BFeI1V+Vh1Rk37wswuOYn5lsTcaU96hGaI7OUVCLjPc=" crossorigin="anonymous" />



<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>

<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-99297878-1', 'auto');
ga('send', 'pageview');
</script>
<script async src='//www.google-analytics.com/analytics.js'></script>

</head>

  <body>
    <nav class="navbar navbar-default navbar-fixed-top navbar-custom">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/">Data Se</a>
    </div>

    <div class="collapse navbar-collapse" id="main-navbar">
      <ul class="nav navbar-nav navbar-right">
        
          
            <li>
              <a title="About" href="/about/">About</a>
            </li>
          
        
          
            <li>
              <a title="GitHub" href="https://github.com/sebastiansauer">GitHub</a>
            </li>
          
        
          
            <li>
              <a title="Twitter" href="https://twitter.com/sauer_sebastian">Twitter</a>
            </li>
          
        

        

        
      </ul>
    </div>

    <div class="avatar-container">
      <div class="avatar-img-border">
        
          <a title="Data Se" href="/">
            <img class="avatar-img" src="" alt="Data Se" />
          </a>
        
      </div>
    </div>

  </div>
</nav>




    
  
  
  




  

  <header class="header-section ">
    
    <div class="intro-header no-img">
      
      <div class="container">
        <div class="row">
          <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
            <div class="post-heading">
              <h1>A predictor&#39;s unique contribution - (visual) demonstration</h1>
                
                
                  <span class="post-meta">
  Posted on May 17, 2017
  
</span>


                
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>


    
<div class="container" role="main">
  <div class="row">
    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
      <article role="main" class="blog-post">
        

<p>A well-known property of regression models is that they capture the <em>unique</em> contribution of a predictor. By &ldquo;unique&rdquo; we mean the effect of the predictor (on the criterion) <em>if the other predictor(s) is/are held constant</em>. A typical classroom example goes along the following lines.</p>

<h1 id="all-about-storks">All about storks</h1>

<ol>
<li><p>There&rsquo;s a correlation between babies and storks. Counties with lots of storks enjoy large number of babies and v.v.</p></li>

<li><p>However, I have children, I know the storks are not overly involved in that business, so says the teacher (polite laughters in the audience).</p></li>

<li><p>Once we consider a third variable, call it nature-level, we see that the correlation between storks and babies vanishes.</p></li>

<li><p>Assume that nature-level and storks are correlated - in nature-rich areas there are a lot of storks. Assume further that nature-level and the amount of babies are correlated - in nature-rich areas people have relatively many babies.</p></li>

<li><p>That&rsquo;s why we find a correlation between babies and storks (&ldquo;spurious&rdquo; it is called), which is (fully) attributable to the nature-level.</p></li>
</ol>

<p>This is all well-known but it helps to see it in real data. That&rsquo;s the objective of this post.</p>

<h1 id="tip-sex-and-total-bill-two-simple-bivariate-analyses">Tip, sex, and total_bill - two simple bivariate analyses</h1>

<p>Let&rsquo;s have a look at the tips dataset.</p>

<pre><code class="language-r">data(tips, package = &quot;reshape2&quot;)
</code></pre>

<p>And load some datajudo packages.</p>

<pre><code class="language-r">library(tidyverse)
</code></pre>

<p>First, simple bivariate assocations for sex-tip and total_bill-tip.</p>

<p>Is there an assocation between sex and tip?</p>

<pre><code class="language-r">ggplot(tips) +
  ggplot2::aes(x = sex, y = tip) +
  geom_jitter(color = &quot;grey80&quot;) +
  geom_jitter(data = tips, aes(color = sex)) +
  stat_summary(fun.y = mean, color = &quot;red&quot;, geom = &quot;line&quot;, size = 2, group = 1) +
  stat_summary(fun.y = mean, color = &quot;red&quot;, geom = &quot;point&quot;, size = 5, group = 1, alpha = .5)
</code></pre>

<p><img src="https://sebastiansauer.github.io/images/2017-05-17/figure/unnamed-chunk-3-1.png" title="plot of chunk unnamed-chunk-3" alt="plot of chunk unnamed-chunk-3" width="80%" style="display: block; margin: auto;" /></p>

<pre><code class="language-r">tips2 &lt;- select(tips, -sex)

tips %&gt;% 
  ggplot() +
  aes(x = total_bill, y = tip) +
  geom_point(data = tips2, color = &quot;grey80&quot;) +
  geom_point(aes(color = sex)) +
  facet_wrap(~sex)
</code></pre>

<p><img src="https://sebastiansauer.github.io/images/2017-05-17/figure/unnamed-chunk-3-2.png" title="plot of chunk unnamed-chunk-3" alt="plot of chunk unnamed-chunk-3" width="80%" style="display: block; margin: auto;" /></p>

<p>It appears that men do tip slightly more than women do.</p>

<pre><code class="language-r">tips %&gt;% 
  group_by(sex) %&gt;% 
  summarise(tip_sex_mean = mean(tip),
            tip_sex_md = median(tip))
</code></pre>

<pre><code>## # A tibble: 2 x 3
##      sex tip_sex_mean tip_sex_md
##   &lt;fctr&gt;        &lt;dbl&gt;      &lt;dbl&gt;
## 1 Female     2.833448       2.75
## 2   Male     3.089618       3.00
</code></pre>

<p>Ok, some 25 Cent difference, in favor of men. Some association is present in the data.</p>

<p>Let&rsquo;s run a regression on that, just to double-check.</p>

<pre><code class="language-r">lm(tip ~ sex,
   data = tips)
</code></pre>

<pre><code>## 
## Call:
## lm(formula = tip ~ sex, data = tips)
## 
## Coefficients:
## (Intercept)      sexMale  
##      2.8334       0.2562
</code></pre>

<p>Ok, confirmed.</p>

<p>Now, what about the association of total_bill and tip?</p>

<pre><code class="language-r">tips %&gt;% 
  ggplot +
  aes(x = total_bill, y = tip) +
  geom_point()
</code></pre>

<p><img src="https://sebastiansauer.github.io/images/2017-05-17/figure/unnamed-chunk-6-1.png" title="plot of chunk unnamed-chunk-6" alt="plot of chunk unnamed-chunk-6" width="80%" style="display: block; margin: auto;" /></p>

<p>Oh, clearly, some correlation is present between total_bill and tip.</p>

<pre><code class="language-r">tips %&gt;% 
  summarise(cor_tip_bill = cor(tip, total_bill))
</code></pre>

<pre><code>##   cor_tip_bill
## 1    0.6757341
</code></pre>

<p>And let&rsquo;s have a look at the slope of the regression.</p>

<pre><code class="language-r">lm(tip ~ total_bill, data = tips)
</code></pre>

<pre><code>## 
## Call:
## lm(formula = tip ~ total_bill, data = tips)
## 
## Coefficients:
## (Intercept)   total_bill  
##      0.9203       0.1050
</code></pre>

<h1 id="multivariate-analysis">Multivariate analysis</h1>

<p>Now let&rsquo;s do that in one run:</p>

<pre><code class="language-r">lm(tip ~ total_bill + sex,
   data = tips)
</code></pre>

<pre><code>## 
## Call:
## lm(formula = tip ~ total_bill + sex, data = tips)
## 
## Coefficients:
## (Intercept)   total_bill      sexMale  
##     0.93328      0.10523     -0.02661
</code></pre>

<p>Notice that the slope of the predictor <code>total_bill</code> has not changed much. But <code>sex</code> did!</p>

<p>So, the <em>unique</em> contribution of sex is very small, about 2 Cent, and in favor of <em>women</em> when considered in junction with total_bill!</p>

<h1 id="let-s-visualize-the-multivariate-appraoch">Let&rsquo;s visualize the multivariate appraoch</h1>

<p>First, for easier visualization, let&rsquo;s bin <code>total_bill</code> in say, 5, bins.</p>

<pre><code class="language-r">tips$bill_bins &lt;- cut_interval(tips$total_bill, n = 5)
</code></pre>

<p>Now let&rsquo;s plot all three variables in one go.</p>

<pre><code class="language-r">tips %&gt;% 
  ggplot +
  aes(x = bill_bins, 
      y = tip,
      fill = sex) +
  geom_boxplot() +
  geom_point(alpha = .5)
</code></pre>

<p><img src="https://sebastiansauer.github.io/images/2017-05-17/figure/unnamed-chunk-11-1.png" title="plot of chunk unnamed-chunk-11" alt="plot of chunk unnamed-chunk-11" width="80%" style="display: block; margin: auto;" /></p>

<p>We see that <em>females</em> do tip <em>more</em> than men when the 5 bins of <code>total_bill</code> are considered each in isolation. For 4 of the 5 bins we find that the median of the women is higher than that of the men. Only in the 5th, ie., highest bin, we found that men tip higher. However, this bin is slightly populated, so we may negligate it. In sum, looking at each bin of <code>total_bill</code> - women tip more than men do!</p>

<p>Depicted differently:</p>

<pre><code class="language-r">tips %&gt;% 
  ggplot() +
  aes(x = total_bill, y = tip) +
  geom_point(data = tips2, color = &quot;grey80&quot;) +
  geom_point(aes(color = sex)) +
  facet_wrap(~sex)
</code></pre>

<p><img src="https://sebastiansauer.github.io/images/2017-05-17/figure/unnamed-chunk-12-1.png" title="plot of chunk unnamed-chunk-12" alt="plot of chunk unnamed-chunk-12" width="80%" style="display: block; margin: auto;" /></p>

<h1 id="dichotomize-total-bill">Dichotomize total_bill</h1>

<p>Maybe even more vivid is we we do not bin total_bill in 5 bins, but just in two.</p>

<pre><code class="language-r">tips$bill_bins &lt;- cut_interval(tips$total_bill, n = 2)
</code></pre>

<p>Again, let&rsquo;s plot the three variables.</p>

<pre><code class="language-r">tips %&gt;% 
  ggplot +
  aes(x = bill_bins, 
      y = tip,
      fill = sex) +
  geom_boxplot() +
  geom_point(alpha = .5)
</code></pre>

<p><img src="https://sebastiansauer.github.io/images/2017-05-17/figure/unnamed-chunk-14-1.png" title="plot of chunk unnamed-chunk-14" alt="plot of chunk unnamed-chunk-14" width="80%" style="display: block; margin: auto;" /></p>

<p>We find that women seem to tip slightly more than men do; at least not less.</p>

<h1 id="a-simpson-case">A Simpson case</h1>

<p>What happens can be considered a Simpson&rsquo;s paradox, based on the fact that men spend more than women do (higher <code>total_bill</code>). Even though they <em>tip</em> less or equally to women it appears they tip &ldquo;in sum&rdquo; (not considering <code>total_bill</code>) more simply because <code>total_bill</code> and <code>tip</code> are related.</p>

<p>Let&rsquo;s dichotomize total_bill and see which sex group (females or males) occur more frequently.</p>

<pre><code class="language-r">tips %&gt;% 
  mutate(bill_di = ntile(total_bill, n = 2),
         bill_di_f = if_else(bill_di == 1, &quot;low&quot;, &quot;hi&quot;)) %&gt;% 
  count(sex, bill_di_f) %&gt;% 
 # gather(bill_group, n, -n) %&gt;% 
  ggplot() +
  aes(x = sex, fill = bill_di_f, y = n) +
  geom_col(position = &quot;fill&quot;)
</code></pre>

<p><img src="https://sebastiansauer.github.io/images/2017-05-17/figure/unnamed-chunk-15-1.png" title="plot of chunk unnamed-chunk-15" alt="plot of chunk unnamed-chunk-15" width="80%" style="display: block; margin: auto;" /></p>

<p>We see that the in the male group, high values occurr more frequently.</p>

<h1 id="path-model">Path model</h1>

<p><code>sex_male</code> has a positive effect on <code>total_bill</code>; and <code>total_bill</code> in turn on <code>tip</code>.
But <code>sex_male</code> does <em>not</em> exert much of an influence on <code>tip</code> anymore, after controling for <code>total_bill</code> (in fact, the positive effect turned to a weak <em>negative</em> impact).</p>

<pre><code class="language-r">library(DiagrammeR)
mermaid(&quot;
graph LR
  total_bill--&gt;tip
  sex_male--&gt;total_bill
  sex_male---tip
 &quot;)
</code></pre>

<p><img src="https://sebastiansauer.github.io/images/2017-05-17/figure/unnamed-chunk-16-1.png" title="plot of chunk unnamed-chunk-16" alt="plot of chunk unnamed-chunk-16" width="80%" style="display: block; margin: auto;" /></p>

<h1 id="conclusion">Conclusion</h1>

<p>That kind of &ldquo;swapping&rdquo; of the regression coefficient is a frequent observation in (multiple) regression. We may conclude that the multivariate analyses with 3 variables is <em>more</em> adequate than the bivariate analyses with one predictor only.</p>

<p>However, a caveat is that we can never be sure that this swapping process is now complete. Maybe we are missing out some more variable that will again make the coefficients swap. Alas, this we cannot know in observational reseach. That&rsquo;s why observational data should not be overinterpreted.</p>

<p>Of course, even if commonly speak of &ldquo;effects&rdquo; this language should never be taken as indicative of causal effects. Causal effects is nothing that can firmly be established by statistics. Causality claims rest of more logical and substantive argument.</p>

      </article>

      <ul class="pager blog-pager">
        
          <li class="previous">
            <a href="/2017/05/16/crashkurs/" data-toggle="tooltip" data-placement="top" title="Crashkurs Datenanalyse mit R">&larr; Previous Post</a>
          </li>
        
        
          <li class="next">
            <a href="/2017/05/19/maximize_area/" data-toggle="tooltip" data-placement="top" title="Squares maximize area - a visualization">Next Post &rarr;</a>
          </li>
        
      </ul>

      

    </div>
  </div>
</div>

    <footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center footer-links">
          
          
        </ul>
        <p class="credits copyright text-muted">
          

          &nbsp;&bull;&nbsp;
          2017

          
            &nbsp;&bull;&nbsp;
            <a href="/">Data Se</a>
          
        </p>
        
        <p class="credits theme-by text-muted">
          <a href="http://gohugo.io">Hugo v0.21</a> powered &nbsp;&bull;&nbsp; Theme by <a href="http://deanattali.com/beautiful-jekyll/">Beautiful Jekyll</a> adapted to <a href="https://github.com/halogenica/beautifulhugo">Beautiful Hugo</a>
          
        </p>
      </div>
    </div>
  </div>
</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.js" integrity="sha384-/y1Nn9+QQAipbNQWU65krzJralCnuOasHncUFXGkdwntGeSvQicrYkiUBwsgUqc1" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/contrib/auto-render.min.js" integrity="sha384-dq1/gEHSxPZQ7DdrM82ID4YVol9BYyU7GbWlIwnwyPzotpoc57wDw/guX8EaYGPx" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<script src="/js/main.js"></script>
<script src="/js/highlight.min.js"></script>
<script> hljs.initHighlightingOnLoad(); </script><script> renderMathInElement(document.body); </script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.1/photoswipe.min.js" integrity="sha256-UplRCs9v4KXVJvVY+p+RSo5Q4ilAUXh7kpjyIP5odyc=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.1/photoswipe-ui-default.min.js" integrity="sha256-PWHOlUzc96pMc8ThwRIXPn8yH4NOLu42RQ0b9SpnpFk=" crossorigin="anonymous"></script>
<script src="/js/load-photoswipe.js"></script>



  </body>
</html>

