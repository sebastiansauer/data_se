<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

  <title>Crashkurs Datenanalyse mit R</title>
  <meta property="og:title" content="Crashkurs Datenanalyse mit R" />
  <meta name="twitter:title" content="Crashkurs Datenanalyse mit R" />
  <meta name="description" content="Nicht jeder liebt Datenanalyse und Statistik&hellip; in gleichem Ma√üe. Das ist zumindest meine Erfahrung aus dem Unterricht üî•. Crashkurse zu R sind vergleichbar zu Crahskursen zu Franz√∂sisch - kann man machen, aber es sollte die Maxime gelten &ldquo;If everything else fails&rdquo;.
Dieser Crashkurs ist f√ºr Studierende oder Anf√§nger der Datenanalyse gedacht, die in kurzer Zeit einen verzweifelten Versuch &hellip; √§h &hellip; einen grundst√§ndigen √úberblick √ºber die Datenanalyse erwerben wollen.">
  <meta property="og:description" content="Nicht jeder liebt Datenanalyse und Statistik&hellip; in gleichem Ma√üe. Das ist zumindest meine Erfahrung aus dem Unterricht üî•. Crashkurse zu R sind vergleichbar zu Crahskursen zu Franz√∂sisch - kann man machen, aber es sollte die Maxime gelten &ldquo;If everything else fails&rdquo;.
Dieser Crashkurs ist f√ºr Studierende oder Anf√§nger der Datenanalyse gedacht, die in kurzer Zeit einen verzweifelten Versuch &hellip; √§h &hellip; einen grundst√§ndigen √úberblick √ºber die Datenanalyse erwerben wollen.">
  <meta name="twitter:description" content="Nicht jeder liebt Datenanalyse und Statistik&hellip; in gleichem Ma√üe. Das ist zumindest meine Erfahrung aus dem Unterricht üî•. Crashkurse zu R sind vergleichbar zu Crahskursen zu Franz√∂sisch - kann ‚Ä¶">
  <meta name="author" content="Sebastiuan Sauer"/>
  <link href='/img/logo-data-se.ico' rel='icon' type='image/x-icon'/>
  <meta property="og:image" content="/img/logo-data-se.png" />
  <meta name="twitter:image" content="/img/logo-data-se.png" />
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@sauer_sebasitan" />
  <meta name="twitter:creator" content="@sauer_sebasitan" />
  <meta property="og:url" content="/2017/05/16/crashkurs/" />
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="Data Se" />

  <meta name="generator" content="Hugo 0.21" />
  <link rel="canonical" href="/2017/05/16/crashkurs/" />
  <link rel="alternate" href="" type="application/rss+xml" title="Data Se">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.css" integrity="sha384-wITovz90syo1dJWVh32uuETPVEtGigN07tkttEqPv+uR2SE/mbQcG7ATL28aI9H0" crossorigin="anonymous">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" />
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  <link rel="stylesheet" href="/css/main.css" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" />
  <link rel="stylesheet" href="/css/highlighting.css" />
  <link rel="stylesheet" href="/css/pygment_highlights.css" />
  <link rel="stylesheet" href="/css/highlight.min.css" />


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.1/photoswipe.min.css" integrity="sha256-sCl5PUOGMLfFYctzDW3MtRib0ctyUvI9Qsmq2wXOeBY=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.1/default-skin/default-skin.min.css" integrity="sha256-BFeI1V+Vh1Rk37wswuOYn5lsTcaU96hGaI7OUVCLjPc=" crossorigin="anonymous" />



<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>

<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-99297878-1', 'auto');
ga('send', 'pageview');
</script>
<script async src='//www.google-analytics.com/analytics.js'></script>

</head>

  <body>
    <nav class="navbar navbar-default navbar-fixed-top navbar-custom">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/">Data Se</a>
    </div>

    <div class="collapse navbar-collapse" id="main-navbar">
      <ul class="nav navbar-nav navbar-right">
        
          
            <li>
              <a title="Blog" href="/">Blog</a>
            </li>
          
        
          
            <li>
              <a title="Tags" href="/tags">Tags</a>
            </li>
          
        
          
            <li>
              <a title="About" href="/page/about/">About</a>
            </li>
          
        

        

        
      </ul>
    </div>

    <div class="avatar-container">
      <div class="avatar-img-border">
        
          <a title="Data Se" href="/">
            <img class="avatar-img" src="/img/logo-data-se.png" alt="Data Se" />
          </a>
        
      </div>
    </div>

  </div>
</nav>




    
  
  
  




  

  <header class="header-section ">
    
    <div class="intro-header no-img">
      
      <div class="container">
        <div class="row">
          <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
            <div class="post-heading">
              <h1>Crashkurs Datenanalyse mit R</h1>
                
                
                  <span class="post-meta">
  Posted on May 16, 2017
  
</span>


                
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>


    
<div class="container" role="main">
  <div class="row">
    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
      <article role="main" class="blog-post">
        

<p>Nicht jeder liebt Datenanalyse und Statistik&hellip; in gleichem Ma√üe. Das ist zumindest meine Erfahrung aus dem Unterricht  üî•. Crashkurse zu R sind vergleichbar zu Crahskursen zu Franz√∂sisch - kann man machen, aber es sollte die Maxime gelten &ldquo;If everything else fails&rdquo;.</p>

<p>Dieser Crashkurs ist f√ºr Studierende oder Anf√§nger der Datenanalyse gedacht, die in kurzer Zeit einen verzweifelten Versuch &hellip; √§h &hellip; einen grundst√§ndigen √úberblick √ºber die Datenanalyse erwerben wollen.</p>

<p>Ok, also los geht&rsquo;s im Schweingalopp durch die Datenanalyse üé∂ üíÉ.</p>

<h1 id="software">Software</h1>

<p>Bevor wir uns die Schritte n√§her anschauen, ein paar Worte zur Software.</p>

<h2 id="programme">Programme</h2>

<p>Wir brauchen zwei Programme.</p>

<ul>
<li>R</li>
<li>RStudio</li>
</ul>

<p>Wenn R installiert ist, dann findet RStudio R auch direkt. Wenn alles l√§uft, sieht es etwa so aus:</p>

<p><img src="https://sebastiansauer.github.io/images/2017-05-16/figure/RStudio-Screenshot.png" alt="" /></p>

<h2 id="erweiterungen">Erweiterungen</h2>

<p>Au√üerdem brauchen wir diese Pakete f√ºr R:</p>

<ul>
<li><code>tidyverse</code></li>
<li><code>mosaic</code></li>
</ul>

<p>‚ö†Ô∏è Um einen Befehl zu verwenden, der <em>nicht</em> im Standard-R, sondern in einer Erweiterung von R (&ldquo;Paket&rdquo;) wohnt, m√ºssen sie dieses Paket erst starten (laden). Dazu k√∂nnen Sie den Befehl <code>library</code> verwenden. Oder Sie klicken den Namen des Pakets hier an:</p>

<p><img src="https://sebastiansauer.github.io/images/2017-05-16/figure/packages_load.png" alt="" /></p>

<p>‚ö†Ô∏è Um ein Paket zu laden, muss es installiert sein. Klicken Sie auf den Button &ldquo;Install&rdquo; unter dem Reiter &ldquo;Packages&rdquo; in RStudio:</p>

<p><img src="https://sebastiansauer.github.io/images/2017-05-16/figure/install_packages.png" alt="" /></p>

<p>Starten Sie jetzt die beiden Erweiterungen (per Klick oder mit folgenden Befehlen).</p>

<pre><code class="language-r">library(mosaic)
library(tidyverse)
</code></pre>

<h1 id="√ºber-sieben-br√ºcken-musst-du-gehen">√úber sieben Br√ºcken musst Du gehen</h1>

<p><img src="https://sebastiansauer.github.io/images/2017-05-16/figure/Peter_Maffay.jpg" alt="Peter Maffay" /></p>

<p>Lizenz: Andr√© D Conrad, CC BY SA 3.0 De, <a href="https://de.wikipedia.org/wiki/Peter_Maffay#/media/File:Peter_Maffay.jpg">https://de.wikipedia.org/wiki/Peter_Maffay#/media/File:Peter_Maffay.jpg</a></p>

<p>Man kann (wenn man will) die Datenanalyse in <del>sieben</del> f√ºnf Br√ºcken oder Schritte einteilen, angelehnt dem Song von Peter Maffay &ldquo;√úber sieben Br√ºcken musst du gehen&rdquo;.</p>

<p><img src="https://sebastiansauer.github.io/images/2017-05-16/figure/Prozess.png" alt="" /></p>

<h1 id="br√ºcke-1-daten-einlesen">Br√ºcke 1: Daten einlesen</h1>

<p>Der einfachste Weg, Daten einzulesen, ist √ºber den Button &ldquo;Import Dataset&rdquo; in RStudio.</p>

<p><img src="https://sebastiansauer.github.io/images/2017-05-16/figure/import_RStudio.png" alt="" /></p>

<p>So lassen sich verschiedene Formate - wie XLS(X) oder CSV - importieren.</p>

<p>‚ö†Ô∏è Beim Importieren von CSV-Dateien ist zu beachten, dass R davon von <em>us-amerikanisch</em> formatierten CSV-Dateien ausgeht. Was hei√üt das? Das bedeutet, das Spaltentrennzeichen (delimiter) ist ein Kommma <code>,</code>. <em>Deutsch</em> formatierte CSV-Dateien, wie sie ein deutsch-eingestellltes Excel ausgibt, nutzen aber ein Semikolon <code>;</code> (Strichpunkt) als Spaltentrennzeichen.</p>

<p>Ggf. m√ºssen Sie also in der Import-Maske von RStudio als <em>delimiter</em> ein <em>semicolon</em> ausw√§hlen.</p>

<p><img src="https://sebastiansauer.github.io/images/2017-05-16/figure/delimiter.png" alt="" /></p>

<p>Alternativ k√∂nnen Sie nat√ºrlich eine XLS- oder XLSX-Datei importieren.</p>

<p>üí° Am einfachsten ist es, XLSX-Dateien zu importieren.</p>

<h2 id="tidy-data-tabellen-in-normalform">tidy data - Tabellen in Normalform</h2>

<p>Damit Sie in R vern√ºnftig mit Ihren Daten arbeiten k√∂nnen, sollten die Daten &ldquo;tidy&rdquo; sein, d.h. in Normalform. Was ist Normalform? Betrachten Sie folgende Abbildung:</p>

<p><img src="https://sebastiansauer.github.io/images/2017-05-16/figure/Normalform.png" alt="" /></p>

<p>Die goldene Regel der Normalform einer Tabelle lautet also:</p>

<blockquote>
<p>In jeder Zeile steht eine Beobachtung (z.B. Person). In jeder Spalte eine Variable (z.B. Geschlecht). In der ersten Zeile stehen die Spaltennamen, danach folgen die Werte. Sonst steht nichts in der Tabelle.</p>
</blockquote>

<p>‚ö†Ô∏è Falls Ihre Daten <em>nicht</em> in Normalform sind, sollten Sie diese zun√§chst in Normalform bringen.</p>

<p>üí° Der einfachste Weg (von der Lernkurve her betrachtet, nicht vom Zeitaufwand), Daten in Normalform zu bringen, ist sie in Excel passend umzubauen.</p>

<h2 id="beispiel-f√ºr-daten-in-nicht-normalform">Beispiel f√ºr Daten in Nicht-Normalform</h2>

<p>Sie denken, dass Ihre Daten immer/auf jeden Fall in Normalform sind? Dann scheuen Sie sich mal dieses Bild an:</p>

<p><img src="https://sebastiansauer.github.io/images/2017-05-16/figure/breit_lang.png" alt="" /></p>

<h2 id="textkodierung-in-utf-8">Textkodierung in UTF-8</h2>

<p>Falls Sie RStudio oder ein beliebiger Texteditor irgendwann fragt, wie die Textdatei kodiert sein soll, w√§hlen Sie immer &ldquo;UTF-8&rdquo;. Googeln Sie bei Interesse, was da bedeutet.</p>

<h1 id="schritt-2-aufbereiten">Schritt 2: Aufbereiten</h1>

<p>Der Schritt des Aufbereitens ist h√§ufig der zeitintensivste Schritt. In diesem Schritt erledigen Sie alles, bevor Sie zu den &ldquo;coolen&rdquo; oder fortgeschrittenen Analysen kommen. Z.B.</p>

<ul>
<li>pr√ºfen auf Fehler beim Daten einlesen (und korrigieren)</li>
<li>Spaltennamen korrigieren</li>
<li>Daten umkodieren</li>
<li>Fehlende Werte verarzten</li>
<li>Komische Werte pr√ºfen</li>
<li>Daten zusammenfassen</li>
<li>Zeilenmittelwerte bilden</li>
<li>Logische Variablen bilden</li>
</ul>

<h2 id="auf-fehler-pr√ºfen">Auf Fehler pr√ºfen</h2>

<p>‚ö†Ô∏è Ein h√§ufiger Fehler ist, dass die Daten nicht richtig eingelesen werden. Zum Beispiel werden die Spaltentrennzeichen nicht richtig erkannt. Das kann dann so aussehen.</p>

<p><img src="https://sebastiansauer.github.io/images/2017-05-16/figure/delimiter_wrong.png" alt="" /></p>

<p>Unter &ldquo;delimiter&rdquo; in der Maske k√∂nnen Sie das Trennzeichen anpassen.</p>

<p>‚ö†Ô∏è &ldquo;Deutsche&rdquo; CSV-Dateien verwenden als <em>Dezimaltrennzeichen</em> ein Komma; englisch-formatierte CSV-Dateien hingegen einen Punk. R geht per Default von englisch-formatierten CSV-Dateien aus. Importieren Sie eine deutsch-formatierte CSV-Datei, m√ºssen Sie das Dezimaltrennzeichen von Hand √§ndern; es wird nicht automatisch erkannt.</p>

<p>üí° Unter &ldquo;locale&rdquo; k√∂nnen Sie das Dezimaltrennzeichen anpassen.</p>

<h2 id="spaltennamen-korrigieren">Spaltennamen korrigieren</h2>

<p>Spaltennamen m√ºssen auch &ldquo;tidy&rdquo; sein. Das hei√üt in diesem Fall:</p>

<ul>
<li>keine Leerzeichen</li>
<li>keine Sonderzeichen (#,√ü,√§,&hellip;)</li>
<li>nicht zu lang, aber trotzdem informativ</li>
</ul>

<blockquote>
<p>Spaltennamen sollten nur Buchstaben (ohne Umlaute) und Ziffern enthalten.</p>
</blockquote>

<p>üí° F√ºr Textdaten in den Spalten sind diese Regeln auch sinnvoll.</p>

<h2 id="umkodieren">Umkodieren</h2>

<p>Gerade bei der Analyse von Fragebogendaten ist es immer wieder n√∂tig, Daten umzukodieren. Klassisches Besispiel: Ein Item ist negativ kodiert. Zum Beispiel das Item &ldquo;Ich bin ein Couch-Potato&rdquo; in einem Fragebogen f√ºr Extraversion.</p>

<p>Nehmen wir an, das Item &ldquo;i04&rdquo; hat die Werte 1 (&ldquo;stimme √ºberhaupt nicht zu&rdquo;) bis 4 (&ldquo;stimme voll und ganz zu&rdquo;). Kreuzt jemand das Couch-Potato-Item mit 4 an, so sollte er nicht die maximale Extraversion-Punktzahl (4), sondern die <em>minimale</em> Extraversion-Punktzahl (1) erhalten. Also</p>

<p><code>
1 --&gt; 4
2 --&gt; 3
3 --&gt; 2
4 --&gt; 1
</code></p>

<p>Am einfachsten ist dies zu bewerkstelligen mit folgendem R-Befehl:</p>

<pre><code>meine_tabelle$i04_r &lt;- 5 - meine_Tabelle$i04
</code></pre>

<p>Rechnet man <code>5-i04</code> so kommt der richtige, &ldquo;neue&rdquo; Wert heraus.</p>

<p>Zur Erinnerung:</p>

<ul>
<li><code>$</code> ist das Trennzeichen zwischen Tabellennamen und Spaltenname.</li>
<li><code>&lt;-</code> ist der Zuweisungsbefehl. Wir definieren eine neue Spalte mit dem Namen <code>i04_r</code>. Das <code>r</code> soll stehen f√ºr &ldquo;rekodiert&rdquo;, damit wir wissen, dass in dieser Spalte die umkodierten Werte stehen.</li>
</ul>

<h2 id="fehlende-werte">Fehlende Werte</h2>

<p>Der einfachste Umgang mit fehlenden Werten ist: nichts machen. Denken Sie nur daran, dass viele R-Befehle von Natur aus nerv√∂s sind - beim Anblick von fehlenden Werten werden sie panisch und machen nix mehr. Zum Beispiel der Befehl <code>mean</code>. Haben sie fehlende Werte in ihren Daten, so verwenden Sie den Parameter <code>na.rm = TRUE</code>. <code>na</code> steht f√ºr &ldquo;not available&rdquo;, also fehlende Werte. <code>rm</code> steht f√ºr &ldquo;remove&rdquo;. Also <code>mean(meine_tabelle$i04_r, na.rm = TRUE)</code>.</p>

<p>üí° Der R-Befehl <code>summary</code> zeigt Ihnen an, ob es fehlende Werte gibt:</p>

<p><code>summary(meine_daten)</code>.</p>

<h2 id="komische-werte">Komische Werte</h2>

<p>Hat ein Spa√üvogel beim Alter 999 oder -1 angegeben, kann das Ihre Daten ganz sch√∂n verhageln. Pr√ºfen Sie die Daten auf komische Werte. Der einfachste Weg ist, sich die Daten in Excel anzuschauen. Cleverer ist noch, sich Zusammenfassungen auszugeben, wie der kleinste oder der gr√∂√üte Wert, oder der Mittelwert etc., und dann zu schauen, ob einem etwas spanisch vorkommt. Diagramme sind ebenfalls hilfreich.</p>

<h2 id="logische-variablen-bilden">Logische Variablen bilden</h2>

<p>Sagen wir, uns interessiert welches Auto mehr als 200 PS hat; wir wollen Autos mit mehr als 200 PS vergleichen (&ldquo;Spass&rdquo;) mit schwach motorisierten Autos (&ldquo;Kruecke&rdquo;). Wie k√∂nnen wir das (einfach) in R erreichen? Logische Variablen sind ein einfacher Weg.</p>

<pre><code class="language-r">mtcars$Spass &lt;- mtcars$hp &gt; 200
</code></pre>

<p>Dieser Befehl hat eine Spalte (Variable) in der Tabelle <code>mtcars</code> erzeugt, in der <code>TRUE</code> steht, wenn das Auto der jeweiligen Spalte die Bedingung (hp &gt; 200) erf√ºllt. Schauen Sie nach.</p>

<pre><code class="language-r">favstats(mtcars$Spass)
</code></pre>

<pre><code>## Warning in fav_stats(x, ..., na.rm = na.rm): Auto-converting logical to
## numeric.
</code></pre>

<pre><code>##  min Q1 median Q3 max    mean        sd  n missing
##    0  0      0  0   1 0.21875 0.4200134 32       0
</code></pre>

<h2 id="daten-zusammenfassen-deskriptivstatistik">Daten zusammenfassen: Deskriptivstatistik</h2>

<p>Deskriptive Statistik ist letztlich nichts anderes, als Daten geschickt zusammenzufassen.</p>

<blockquote>
<p>Praktisch sind es meistens Spalten, die zu einen Zahl zusammengefasst werden.</p>
</blockquote>

<p><img src="https://sebastiansauer.github.io/images/2017-05-16/figure/summarise.png" alt="" /></p>

<p>Schauen wir uns das mal mit echten Daten an. Der Datensatz &ldquo;mtcars&rdquo; ist schon in R eingebaut, so dass wir in nicht extra laden m√ºssen. Ganz praktisch.</p>

<pre><code class="language-r">summary(mtcars)
</code></pre>

<pre><code>##       mpg             cyl             disp             hp       
##  Min.   :10.40   Min.   :4.000   Min.   : 71.1   Min.   : 52.0  
##  1st Qu.:15.43   1st Qu.:4.000   1st Qu.:120.8   1st Qu.: 96.5  
##  Median :19.20   Median :6.000   Median :196.3   Median :123.0  
##  Mean   :20.09   Mean   :6.188   Mean   :230.7   Mean   :146.7  
##  3rd Qu.:22.80   3rd Qu.:8.000   3rd Qu.:326.0   3rd Qu.:180.0  
##  Max.   :33.90   Max.   :8.000   Max.   :472.0   Max.   :335.0  
##       drat             wt             qsec             vs        
##  Min.   :2.760   Min.   :1.513   Min.   :14.50   Min.   :0.0000  
##  1st Qu.:3.080   1st Qu.:2.581   1st Qu.:16.89   1st Qu.:0.0000  
##  Median :3.695   Median :3.325   Median :17.71   Median :0.0000  
##  Mean   :3.597   Mean   :3.217   Mean   :17.85   Mean   :0.4375  
##  3rd Qu.:3.920   3rd Qu.:3.610   3rd Qu.:18.90   3rd Qu.:1.0000  
##  Max.   :4.930   Max.   :5.424   Max.   :22.90   Max.   :1.0000  
##        am              gear            carb         Spass         cyl_f 
##  Min.   :0.0000   Min.   :3.000   Min.   :1.000   Mode :logical   4:11  
##  1st Qu.:0.0000   1st Qu.:3.000   1st Qu.:2.000   FALSE:25        6: 7  
##  Median :0.0000   Median :4.000   Median :2.000   TRUE :7         8:14  
##  Mean   :0.4062   Mean   :3.688   Mean   :2.812   NA's :0               
##  3rd Qu.:1.0000   3rd Qu.:4.000   3rd Qu.:4.000                         
##  Max.   :1.0000   Max.   :5.000   Max.   :8.000
</code></pre>

<p>Hilfe zu diesem Datensatz bekommen Sie so:</p>

<pre><code class="language-r">help(mtcars)
</code></pre>

<p>üí° mit <code>help(Befehl)</code> bekommt man Hilfe zu einem Befehl oder einem sonstigen Objekt (z.B. Datensatz).</p>

<h3 id="numerische-variablen">Numerische Variablen</h3>

<p>Der einfachste Weg, um Deskriptivstatistik f√ºr eine <em>numerische Variable</em> auf einen Abwasch zu erledigen ist dieser Befehl:</p>

<pre><code class="language-r">favstats(mtcars$mpg)
</code></pre>

<pre><code>##   min     Q1 median   Q3  max     mean       sd  n missing
##  10.4 15.425   19.2 22.8 33.9 20.09062 6.026948 32       0
</code></pre>

<p>Der Befehl <code>favstats</code> l√§sst auch Subgruppenanalysen zu, z.B. um M√§nner und Frauen zu vergleichen:</p>

<pre><code class="language-r">favstats(mpg ~ cyl, data = mtcars)
</code></pre>

<pre><code>##   cyl  min    Q1 median    Q3  max     mean       sd  n missing
## 1   4 21.4 22.80   26.0 30.40 33.9 26.66364 4.509828 11       0
## 2   6 17.8 18.65   19.7 21.00 21.4 19.74286 1.453567  7       0
## 3   8 10.4 14.40   15.2 16.25 19.2 15.10000 2.560048 14       0
</code></pre>

<p>Dabei ist <code>mpg</code> die Variable, die sie vergleichen wollen (Spritverbrauch); <code>cyl</code> die Gruppierungsvariable (Anzahl der Zylinder). Gruppierungsvariable bedeutet hier, dass den Spritverbrauch zwischen 4,6 und 8-Zylindern vergleichen wollen.</p>

<h3 id="nominale-variablen">Nominale Variablen</h3>

<p>Eine H√§ufigkeitstabelle f√ºr eine <em>nicht-metrische</em> Variable l√§sst √ºber den Befehl <code>table</code> erstellen.</p>

<p>Aber zuerst wandeln wir eine unserer metrischen Variablen in eine nominale um:</p>

<pre><code class="language-r">my_cars &lt;- mtcars

my_cars$cyl_f &lt;- factor(mtcars$cyl)
my_cars$Spass &lt;- my_cars$hp &gt; 200
</code></pre>

<p><code>factor</code> wandelt eine metrische (numerische)  Variable in einen nominale Variable um; nominale Variablen nennt man in R auch &ldquo;Faktor&rdquo;. Um den &ldquo;originalen&rdquo; Datensatz nicht zu √ºberschreiben, packen wir alles in eine Kopie mit dem Namen <code>my_cars</code>.</p>

<pre><code class="language-r">table(my_cars$cyl_f)
</code></pre>

<pre><code>## 
##  4  6  8 
## 11  7 14
</code></pre>

<p>Aha, 14 Autos in unserer Tabelle haben also 8 Zylinder.</p>

<p>Brechen wir jetzt die Ausz√§hlunng noch mal auf in &ldquo;Spass&rdquo; vs. &ldquo;Kr√ºcke&rdquo;.</p>

<pre><code class="language-r">table(my_cars$cyl_f, my_cars$Spass)
</code></pre>

<pre><code>##    
##     FALSE TRUE
##   4    11    0
##   6     7    0
##   8     7    7
</code></pre>

<h2 id="zeilenmittelwerte-bilden">Zeilenmittelwerte bilden</h2>

<p>Bei Umfragen kommt es h√§ufig vor, dass man Zeilenmittelwerte bildet. Wieso? Man m√∂chte z.B. in einer Mitarbeiterbefragung den &ldquo;Engagementwert&rdquo; jedes Besch√§ftigten wissen (klingt einfach gut). Dazu addiert man die Werte jedes passenden Items auf. Diese Summe teilen Sie durch die Anzahl der Spalten</p>

<p>üí° Zeilenmittelwerte bilden Sie am einfachsten in Excel.</p>

<p>In R k√∂nnen Sie Zeilen einfach mit dem <code>+</code> Zeichen addieren:</p>

<pre><code>meine_tabelle$zeilenmittelwert &lt;- (meine_tabelle$item1 + meine Tabelle$item2) / 2
</code></pre>

<h1 id="schritt-3-visualisieren">Schritt 3: Visualisieren</h1>

<p>Ein Bild sagt bekanntlich mehr als 1000 Worte. Betrachten Sie dazu &ldquo;Anscombes Quartett&rdquo;:</p>

<p><img src="https://sebastiansauer.github.io/images/2017-05-16/figure/anscombe.png" alt="" /></p>

<p>Diese vier Datens√§tze sehen ganz unterschiedlich aus, nicht wahr? Aber ihre zentralen deskriptiven Statistiken sind praktisch gleich! Ohne Diagramm w√§re uns diese Unterschiedlichkeit nicht (so leicht) aufgefallen!</p>

<p>Zur Visualisierung empfehle ich das R-Paket <code>ggplot2</code>. Es wird mit geladen, wenn Sie <code>tidyverse</code> laden.</p>

<p>Es gib einen recht einfachen Befehl in diesem Paket, <code>qplot</code>. Bei <code>qplot</code> geben Sie folgende Parameter an:</p>

<ul>
<li>X-Achse (<code>x</code>): Welche Variable (Spalte in ihrer Tabelle) soll auf der X-Achse stehen?<br /></li>
<li>Y-Achse (<code>y</code>): Welche Variable (Spalte in ihrer Tabelle) soll auf der Y-Achse stehen?</li>
<li>Daten (<code>data</code>): Wie hei√üt ihre Datentabelle?</li>
<li>Geom (<code>geom</code>): Welche Art von Bildchen wollen Sie malen (z.B. Punkte, Boxplots, Linien, Histogramm&hellip;)`</li>
</ul>

<p>Dar√ºber hinaus verkrafter der Befehl noch viele andere Schn√∂rkel, die wir uns hier sparen. Interessierte k√∂nnen googeln&hellip; Es ist ein sehr m√§chtiger Befehl, der sehr ansprechende Diagramme erzeugen kann.</p>

<p>Probieren wir&rsquo;s!</p>

<pre><code class="language-r">qplot(x = hp,
      y = mpg,
      geom = &quot;point&quot;,
      data = mtcars)
</code></pre>

<p><img src="https://sebastiansauer.github.io/images/2017-05-16/figure/unnamed-chunk-11-1.png" title="plot of chunk unnamed-chunk-11" alt="plot of chunk unnamed-chunk-11" width="70%" style="display: block; margin: auto;" /></p>

<p>Easy, oder?</p>

<p>Ein anderes Geom:</p>

<pre><code class="language-r">qplot(x = factor(cyl),
      y = mpg,
      data = mtcars,
      geom = &quot;boxplot&quot;)
</code></pre>

<p><img src="https://sebastiansauer.github.io/images/2017-05-16/figure/unnamed-chunk-12-1.png" title="plot of chunk unnamed-chunk-12" alt="plot of chunk unnamed-chunk-12" width="70%" style="display: block; margin: auto;" /></p>

<p>Beachten Sie, dass <code>qplot</code> nur dann <em>mehrere</em> Boxplots zeichnet, wenn auf der X-Achse eine nominal skalierte Variable steht.</p>

<p>üí° Eine metrische Variable wandeln Sie in eine nominal skalierte Variable um mit dem Befehl <code>factor(meine_metrische_variable)</code>.</p>

<p>Oder mal nur eine Variable:</p>

<pre><code class="language-r">qplot(x = hp,
      data = mtcars,
      geom = &quot;histogram&quot;)
</code></pre>

<p><img src="https://sebastiansauer.github.io/images/2017-05-16/figure/unnamed-chunk-13-1.png" title="plot of chunk unnamed-chunk-13" alt="plot of chunk unnamed-chunk-13" width="70%" style="display: block; margin: auto;" /></p>

<p>üí° Geben wir keine Y-Variable an, nimmt qplot eigenst√§ndig die H√§ufigkeit pro X-Wert!</p>

<p>üí° Tauschen Sie mal &ldquo;histogram&rdquo; mit &ldquo;density&rdquo;!</p>

<h1 id="schritt-4-modellieren">Schritt 4: Modellieren</h1>

<p>Modellieren h√∂rt sich kompliziert an. F√ºr uns hier hei√üt es vor allem ein inferenzstatistisches Verfahren anzuwenden.</p>

<p>üí° Das Schweizer Taschenmesser und den Modellierungsverfahren ist die Regressionsanalyse. Man kann sie f√ºr viele Zwecke einsetzen.</p>

<h2 id="wann-welchen-test">Wann welchen Test?</h2>

<p>Es gibt in vielen Lehrb√ºchern √úbersichten zur Frage, wann man welchen Test rechnen soll. Googeln hilft hier auch weiter. Eine √úbersicht findet man hier: <a href="http://www.methodenberatung.uzh.ch/de/datenanalyse.html">http://www.methodenberatung.uzh.ch/de/datenanalyse.html</a>.</p>

<h2 id="wie-hei√üt-der-jeweilige-r-befehl">Wie hei√üt der jeweilige R-Befehl?</h2>

<p>Wenn man diese Befehle nicht h√§ufig verwendet, ist es schwierig, sie ausw√§ndig zu wissen. Googeln Sie. Eine gute √úbersicht findet sich hier: <a href="http://r-statistics.co/Statistical-Tests-in-R.html">http://r-statistics.co/Statistical-Tests-in-R.html</a>.</p>

<h2 id="regression">Regression</h2>

<p>Weil die Regression so praktisch ist, hier ein Beispiel.</p>

<pre><code class="language-r">lm(mpg ~ cyl, data = mtcars)
</code></pre>

<pre><code>## 
## Call:
## lm(formula = mpg ~ cyl, data = mtcars)
## 
## Coefficients:
## (Intercept)          cyl  
##      37.885       -2.876
</code></pre>

<p><code>lm</code> hei√üt &ldquo;lineares Modell&rdquo; - weil man bei der (normalen) Regression eine Gerade in die Punktewolke der Daten legt, um den Trend zu abzusch√§tzen. Als n√§chstes gibt man die &ldquo;Ziel-Variable&rdquo; (Output) an, hier <code>mpg</code>. Dann kommt ein Kringel <code>~</code> gefolgt von einer (mehr) Input-Variablen (Pr√§diktoren, UVs). Schlie√ünoch muss noch die Datentabelle erw√§hnt werden.</p>

<p>Das Ergbebnis sagt uns, dass <em>pro Zylinder</em> die Variable <code>mpg</code> um knapp 3 Punkte sinkt. Also: Hat die Karre einen Zylinder mehr, so kann man pro Galone Sprit 3 Meilen weniger fahren. Immer im Schnitt, versteht sich. (Und wenn die Voraussetzungen erf√ºllt sind, aber darum k√ºmmern wir uns jetzt nicht.)</p>

<p>Allgemein:</p>

<pre><code>lm(output ~ input, data = meine_daten)
</code></pre>

<p>Easy, oder?</p>

<p>Man kann auch mehrere Pr√§diktoren anf√ºhren:</p>

<pre><code class="language-r">lm(mpg ~ cyl + hp, data = mtcars)
</code></pre>

<pre><code>## 
## Call:
## lm(formula = mpg ~ cyl + hp, data = mtcars)
## 
## Coefficients:
## (Intercept)          cyl           hp  
##    36.90833     -2.26469     -0.01912
</code></pre>

<p>Dazu werden die durch <code>+</code> getrennt. Die Ergebnisse zeigen uns, dass die PS-Zahl (¬¥hp¬¥) kaum Einfluss auf den Spritverbrauch haut. Genauer: Kaum <em>zus√§tzlichen</em> Einfluss auf den Spritverbrauch hat. Also Einfluss, der √ºber den Einfluss hinausgeht, der schon durch die Anzahl der Zylinder erkl√§rt werden w√ºrde. Es ist also praktisch wurscht, wie viel PS das Auto hat, wenn man den Verbrauch sch√§tzen will - Hauptsache, man wei√ü die Anzahl der Zylinder.</p>

<h2 id="vorhersagen">Vorhersagen</h2>

<p>Man kann die Regression nutzen, um Vorhersagen zu treffen. Sagen wir, unser neuer Lamborghini hat 400 PS und 12 Zylinder. Wie gro√ü ist wohl der Spritverbrauch laut unserem Regressionsmodell?</p>

<p>Als Vorbereitung speichern wir unser Regressionsmodell in einer eigenen Variablen:</p>

<pre><code class="language-r">mein_lm &lt;- lm(mpg ~ cyl + hp, data = mtcars)
</code></pre>

<p>Dazu nimmt man am besten den Befehl <code>predict</code>, weil wir wollen eine Vorhersage treffen:</p>

<pre><code class="language-r">predict(mein_lm, data.frame(cyl = 12, hp = 400))
</code></pre>

<pre><code>##        1 
## 2.083329
</code></pre>

<p>Aha. Pro Gallone k√§mmen wir 2 Meilen. Schluckspecht.</p>

<h2 id="visualisierung-des-modells">Visualisierung des Modells</h2>

<p>Schauen wir uns das Modell mal an, damit es nicht so theoretisch ist. Wie gesagt, ein Regressionsmodell ist nichts anderes als eine Trendgerade in einer Punktewolke.</p>

<p>üí° Gerade sind durch Achsenabschnitt (engl. &ldquo;intercept&rdquo;) f(x=0) und Steigung (englisch: &ldquo;slope&rdquo;) definiert. Der Steigungswert ist die Zahl, die der lm-Befehl f√ºr den Pr√§diktor ausspuckt</p>

<pre><code class="language-r">qplot(x = cyl,
      y = mpg,
      data = mtcars,
      geom = &quot;point&quot;) +
  geom_abline(slope = -2.9, intercept = 38)
</code></pre>

<p><img src="https://sebastiansauer.github.io/images/2017-05-16/figure/unnamed-chunk-18-1.png" title="plot of chunk unnamed-chunk-18" alt="plot of chunk unnamed-chunk-18" width="70%" style="display: block; margin: auto;" /></p>

<h1 id="schritt-5-kommunizieren">Schritt 5: Kommunizieren</h1>

<p>Kommunizieren soll sagen, dass Sie Ihre Ergebnisse anderen mitteilen - als Student hei√üt das h√§ufig in Form einer Seminararbeit an den Dozenten.</p>

<p>Einige Hinweise:</p>

<ul>
<li>Geben Sie nicht alle Ergebnisse heraus. Ihre Fehler m√ºssen niemanden interessieren.</li>
<li>Die wesentlichen Ergebnisse kommen in den Hauptteil der Arbeit. Interessante Details in den Anhang.</li>
<li>Der Mensch ist ein Augentier. Ihr Gutachter auch. Achten Sie auf optisch ansprechende Darstellung; sch√∂ne Diagramme helfen.</li>
<li>Dozenten achten gerne auf formale Korrektheit. Das Gute ist, dass dies relativ einfach sicherzustellen ist, da auf starren Regeln basierend.</li>
</ul>

<h2 id="tabellen-und-diagramme">Tabellen und Diagramme</h2>

<p>Daten kommunizieren hei√üt praktisch zumeist, Tabellen oder Diagramme zu erstellen. Meist gibt es dazu Richtlinien von Seiten irgendeiner (selbsterannten) Autorit√§t wie Dozenten oder Fachgesellschaften. Zum Beispiel hat die <a href="http://www.apa.org">APA</a> ein umfangreiches Manual zum Thema Manuskripterstellung publiziert; die deutsche Fachgesellschaft der Psychologie entsprechend. Googeln Sie mal, wie in ihren Richtlinien Tabellen und Diagramme zu erstellen sind (oder fragen Sie Ihren Gutachter).</p>

<h2 id="f√ºr-fortgeschrittene-rmarkdown">F√ºr Fortgeschrittene: RMarkdown</h2>

<p>W√§re das nicht cool: Jegliches Formatieren wird automatisch √ºbernommen und sogar so, das ses schick aussieht? Au√üerdem wird Ihr R-Code und dessen Ergebnisse (Tabellen und Diagramme oder reine Zahlen) automatisch in Ihr Dokument √ºbernommen. Keine Copy-Paste-Fehler mehr. Keine h√§ndisches Aktualisieren, weil Sie Daten oder die vorhergehende Analyse ge√§ndert haben. H√∂rt sich gut an? Probieren Sie mal <a href="http://rmarkdown.rstudio.com">RMarkdown</a> aus :one_up:.</p>

<h1 id="fazit">Fazit</h1>

<p>Gl√ºck auf üòÑ</p>

<p><a href="https://sebastiansauer.github.io/Lieblingsbefehle/">Hier</a> finden Sie einen √úberblick an einige &ldquo;Lieblings-R-Befehle&rdquo;.</p>

      </article>

      <ul class="pager blog-pager">
        
          <li class="previous">
            <a href="/2017/05/15/books/" data-toggle="tooltip" data-placement="top" title="Introductory books for data analysis">&larr; Previous Post</a>
          </li>
        
        
          <li class="next">
            <a href="/2017/05/17/storks/" data-toggle="tooltip" data-placement="top" title="A predictor&#39;s unique contribution - (visual) demonstration">Next Post &rarr;</a>
          </li>
        
      </ul>

      
        
          <div class="disqus-comments">
            <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'https-sebastiansauer-github-io';
    var disqus_identifier = '\/2017\/05\/16\/crashkurs\/';
    var disqus_title = 'Crashkurs Datenanalyse mit R';
    var disqus_url = '\/2017\/05\/16\/crashkurs\/';

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
          </div>
        
      

    </div>
  </div>
</div>

    <footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center footer-links">
          
              <li>
                <a href="mailto:ssauer@posteo.de" title="Email me">
                  <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-envelope fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://github.com/sebastian_sauer" title="GitHub">
                  <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://twitter.com/sauer_sebasitan" title="Twitter">
                  <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://reddit.com/u/username" title="Reddit">
                  <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-reddit-alien fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://linkedin.com/in/https://www.linkedin.com/in/dr-sebastian-sauer-4791762/" title="LinkedIn">
                  <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://www.xing.com/profile/https://www.xing.com/profile/Sebastian_Sauer2" title="Xing">
                  <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-xing fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
          
          <li>
            <a href="" title="RSS">
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
        </ul>
        <p class="credits copyright text-muted">
          
            
              <a href="yourwebsite.com">Sebastiuan Sauer</a>
            
          

          &nbsp;&bull;&nbsp;
          2017

          
            &nbsp;&bull;&nbsp;
            <a href="/">Data Se</a>
          
        </p>
        
        <p class="credits theme-by text-muted">
          <a href="http://gohugo.io">Hugo v0.21</a> powered &nbsp;&bull;&nbsp; Theme by <a href="http://deanattali.com/beautiful-jekyll/">Beautiful Jekyll</a> adapted to <a href="https://github.com/halogenica/beautifulhugo">Beautiful Hugo</a>
          
        </p>
      </div>
    </div>
  </div>
</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.js" integrity="sha384-/y1Nn9+QQAipbNQWU65krzJralCnuOasHncUFXGkdwntGeSvQicrYkiUBwsgUqc1" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/contrib/auto-render.min.js" integrity="sha384-dq1/gEHSxPZQ7DdrM82ID4YVol9BYyU7GbWlIwnwyPzotpoc57wDw/guX8EaYGPx" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<script src="/js/main.js"></script>
<script src="/js/highlight.min.js"></script>
<script> hljs.initHighlightingOnLoad(); </script><script> renderMathInElement(document.body); </script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.1/photoswipe.min.js" integrity="sha256-UplRCs9v4KXVJvVY+p+RSo5Q4ilAUXh7kpjyIP5odyc=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.1/photoswipe-ui-default.min.js" integrity="sha256-PWHOlUzc96pMc8ThwRIXPn8yH4NOLu42RQ0b9SpnpFk=" crossorigin="anonymous"></script>
<script src="/js/load-photoswipe.js"></script>



  </body>
</html>

