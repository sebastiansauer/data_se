

  
    
  


  




  


  

<!DOCTYPE html>
<html lang="en-us">
  <head>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Hugo 0.21 with theme Tranquilpeak 0.4.3-BETA">
    <title>Drawing a country map</title>
    <meta name="author" content="Sebastian Sauer">
    <meta name="keywords" content=", rstats, datascience">

    <link rel="icon" href="/favicon.png">
    

    
    <meta name="description" content="Let&rsquo;s draw a map of Bavaria, a state of Germany, in this post.
Packages library(tidyverse) library(maptools) library(sf) library(RColorBrewer) library(ggmap) library(viridis) library(stringr)  Data Let&rsquo;s get the data first. Basically, we need to data files:
 the shape file, ie., a geographic details of state borders and points of interest the semantic information to points of interest eg., town names  Shape file The shape file can be downloaded from this source: http://www.">
    <meta property="og:description" content="Let&rsquo;s draw a map of Bavaria, a state of Germany, in this post.
Packages library(tidyverse) library(maptools) library(sf) library(RColorBrewer) library(ggmap) library(viridis) library(stringr)  Data Let&rsquo;s get the data first. Basically, we need to data files:
 the shape file, ie., a geographic details of state borders and points of interest the semantic information to points of interest eg., town names  Shape file The shape file can be downloaded from this source: http://www.">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="Drawing a country map">
    <meta property="og:url" content="/2017/10/chloromap/">
    <meta property="og:site_name" content="Data Se">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Data Se">
    <meta name="twitter:description" content="Let&rsquo;s draw a map of Bavaria, a state of Germany, in this post.
Packages library(tidyverse) library(maptools) library(sf) library(RColorBrewer) library(ggmap) library(viridis) library(stringr)  Data Let&rsquo;s get the data first. Basically, we need to data files:
 the shape file, ie., a geographic details of state borders and points of interest the semantic information to points of interest eg., town names  Shape file The shape file can be downloaded from this source: http://www.">
    
      <meta name="twitter:creator" content="@sauer_sebastian">
    
    

    
    

    
      <meta property="og:image" content="//www.gravatar.com/avatar/8851f7754d1792f008b8874cd258f5b7?s=640">
    

    
    
    

    

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/jquery.fancybox.min.css" integrity="sha256-vuXZ9LGmmwtjqFX1F+EKin1ThZMub58gKULUyf0qECk=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/helpers/jquery.fancybox-thumbs.min.css" integrity="sha256-SEa4XYAHihTcEP1f5gARTB2K26Uk8PsndQYHQC1f4jU=" crossorigin="anonymous" />
    
    
    <link rel="stylesheet" href="/css/style-jsjn0006wyhpyzivf6yceb31gvpjatbcs3qzjvlumobfnugccvobqwxnnaj8.min.css" />
    
    

    
      
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-99297878-1', 'auto');
ga('send', 'pageview');
</script>

    
    
  </head>

  <body>
    <div id="blog">
      <header id="header" data-behavior="4">
  <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
  <div class="header-title">
    <a class="header-title-link" href="/">Data Se</a>
  </div>
  
    
      <a class="header-right-picture "
         href="/#about">
    
    
    
      
        <img class="header-picture" src="//www.gravatar.com/avatar/8851f7754d1792f008b8874cd258f5b7?s=90" alt="Author&#39;s picture" />
      
    
    </a>
  
</header>

      <nav id="sidebar" data-behavior="4">
  <div class="sidebar-container">
    
      <div class="sidebar-profile">
        <a href="/#about">
          <img class="sidebar-profile-picture" src="//www.gravatar.com/avatar/8851f7754d1792f008b8874cd258f5b7?s=110" alt="Author&#39;s picture" />
        </a>
        <h4 class="sidebar-profile-name">Sebastian Sauer</h4>
        
          <h5 class="sidebar-profile-bio"><strong>Data Scie</strong>nce blog of Sebastian Sauer</h5>
        
      </div>
    
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="/">
    
      <i class="sidebar-button-icon fa fa-lg fa-home"></i>
      
      <span class="sidebar-button-desc">Home</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="/categories">
    
      <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
      
      <span class="sidebar-button-desc">Categories</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="/tags">
    
      <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
      
      <span class="sidebar-button-desc">Tags</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="/archives">
    
      <i class="sidebar-button-icon fa fa-lg fa-archive"></i>
      
      <span class="sidebar-button-desc">Archives</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="/#about">
    
      <i class="sidebar-button-icon fa fa-lg fa-question"></i>
      
      <span class="sidebar-button-desc">About</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://github.com/sebastiansauer">
    
      <i class="sidebar-button-icon fa fa-lg fa-github"></i>
      
      <span class="sidebar-button-desc">GitHub</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="/index.xml">
    
      <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
      
      <span class="sidebar-button-desc">RSS</span>
    </a>
  </li>


    </ul>
  </div>
</nav>

      

      <div id="main" data-behavior="4"
        class="
               hasCoverMetaIn
               ">
        <article class="post" itemscope itemType="http://schema.org/BlogPosting">
          
          
            <div class="post-header main-content-wrap text-left">
  
    <h1 class="post-title" itemprop="headline">
      Drawing a country map
    </h1>
  
  
  <div class="postShorten-meta post-meta">
    
      <time itemprop="datePublished" datetime="2017-10-06T00:00:00Z">
        
  October 6, 2017

      </time>
    
    
  </div>

</div>
          
          <div class="post-content markdown" itemprop="articleBody">
            <div class="main-content-wrap">
              

<p>Let&rsquo;s draw a map of Bavaria, a state of Germany, in this post.</p>

<h1 id="packages">Packages</h1>

<pre><code class="language-r">library(tidyverse)
library(maptools)
library(sf)
library(RColorBrewer)
library(ggmap)
library(viridis)
library(stringr)
</code></pre>

<h1 id="data">Data</h1>

<p>Let&rsquo;s get the data first. Basically, we need to data files:</p>

<ul>
<li>the shape file, ie., a geographic details of state borders and points of interest</li>
<li>the semantic information to points of interest eg., town names</li>
</ul>

<h2 id="shape-file">Shape file</h2>

<p>The shape file can be downloaded from this source: <a href="http://www.metaspatial.net/download/plz.tar.gz">http://www.metaspatial.net/download/plz.tar.gz</a></p>

<p><a href="http://gadm.org/country">This site</a> also looks great to get geospatial data.</p>

<p>These data are PD as stated <a href="http://arnulf.us/PLZ">here</a>. Download and unpack the data. Let&rsquo;s assume that the data are stored in a path called <code>my_path</code>. See for instance in my case:</p>

<pre><code class="language-r"># replace the following path with your path:
my_path &lt;- &quot;/Users/sebastiansauer/Documents/Datensaetze/plz/&quot;
my_shape &lt;- &quot;post_pl.shp&quot;

shape_dest &lt;- paste0(my_path, my_shape)
file.exists(shape_dest)
#&gt; [1] TRUE
</code></pre>

<p>Parse the shape data:</p>

<pre><code class="language-r">de_shape &lt;- sf::st_read(shape_dest)  # &quot;de&quot; is for Germany
#&gt; Reading layer `post_pl' from data source `/Users/sebastiansauer/Documents/Datensaetze/plz/post_pl.shp' using driver `ESRI Shapefile'
#&gt; Simple feature collection with 8270 features and 3 fields
#&gt; geometry type:  MULTIPOLYGON
#&gt; dimension:      XY
#&gt; bbox:           xmin: 5.866286 ymin: 47.2736 xmax: 15.04863 ymax: 55.05826
#&gt; epsg (SRID):    NA
#&gt; proj4string:    NA
</code></pre>

<p>Check the result:</p>

<pre><code class="language-r">head(de_shape)
#&gt; Simple feature collection with 6 features and 3 fields
#&gt; geometry type:  MULTIPOLYGON
#&gt; dimension:      XY
#&gt; bbox:           xmin: 13.69598 ymin: 51.02433 xmax: 13.91312 ymax: 51.14665
#&gt; epsg (SRID):    NA
#&gt; proj4string:    NA
#&gt;   PLZ99 PLZ99_N PLZORT99                       geometry
#&gt; 1 01067    1067  Dresden MULTIPOLYGON (((13.7189358 ...
#&gt; 2 01069    1069  Dresden MULTIPOLYGON (((13.74983892...
#&gt; 3 01097    1097  Dresden MULTIPOLYGON (((13.727583 5...
#&gt; 4 01099    1099  Dresden MULTIPOLYGON (((13.82015592...
#&gt; 5 01109    1109  Dresden MULTIPOLYGON (((13.75953588...
#&gt; 6 01127    1127  Dresden MULTIPOLYGON (((13.72007952...
de_shape$PLZORT99 %&gt;% head
#&gt; [1] Dresden Dresden Dresden Dresden Dresden Dresden
#&gt; 6359 Levels: Aach Aachen Aalen Aarbergen Abenberg Abensberg ... \xdfxheim
</code></pre>

<p>Note that the file contains semantic data, too (zip code, town names).</p>

<p>Some encoding problems. More often than not, text data is in the wrong format. Blind guessing: Data was stored on a Windows machine, hence in Latin1. My system assumes UTF-8, so culture clash is to expected. Let&rsquo;s try to fix.</p>

<pre><code class="language-r">de_shape$PLZORT99 &lt;- as.character(de_shape$PLZORT99)
Encoding(de_shape$PLZORT99) &lt;- &quot;latin1&quot;
slice(de_shape$PLZORT99, 90:100)
#&gt; Error in UseMethod(&quot;slice_&quot;): no applicable method for 'slice_' applied to an object of class &quot;character&quot;
</code></pre>

<p>Ok, fixed.</p>

<h2 id="shape-semantics">Shape semantics</h2>

<p>&ldquo;Shape semantics&rdquo; is a rather fancy word for the county/community/town names. We can access the data <a href="http://download.geonames.org/export/zip/DE.zip">here</a>.</p>

<p>Download and unzip the data, then move it to <code>my_path</code>. The German word for &ldquo;zip code&rdquo; is &ldquo;PLZ&rdquo;, so that&rsquo;s why I call it <code>my_plz</code>:</p>

<pre><code class="language-r">my_plz &lt;- &quot;PLZ_Ort_Long_Lat_Land_DE.txt&quot;
de_plz &lt;- paste0(my_path, my_plz)
file.exists(de_plz)
#&gt; [1] TRUE

plz_df &lt;- read_tsv(file = de_plz, col_names = FALSE)  # tab separated data
</code></pre>

<p>In the help file from the downloaded data, we find some explanation as to the columns:</p>

<pre><code class="language-r">plz_df &lt;- plz_df %&gt;%
  rename(country_code = X1,
         postal_code = X2,
         place_name = X3,
         state = X4,
         state_code = X5,
         county = X6,
         county_code = X7,
         community = X8,
         community_code = X9,
         lat = X10,
         long = X11,
         accuracy = X12)  # accuracy of lat/lng from 1=estimated to 6=centroid


glimpse(plz_df)
#&gt; Observations: 16,481
#&gt; Variables: 12
#&gt; $ country_code   &lt;chr&gt; &quot;DE&quot;, &quot;DE&quot;, &quot;DE&quot;, &quot;DE&quot;, &quot;DE&quot;, &quot;DE&quot;, &quot;DE&quot;, &quot;DE&quot;,...
#&gt; $ postal_code    &lt;chr&gt; &quot;01945&quot;, &quot;01945&quot;, &quot;01945&quot;, &quot;01945&quot;, &quot;01945&quot;, &quot;0...
#&gt; $ place_name     &lt;chr&gt; &quot;Hohenbocka&quot;, &quot;Lindenau&quot;, &quot;Schwarzbach&quot;, &quot;Grüne...
#&gt; $ state          &lt;chr&gt; &quot;Brandenburg&quot;, &quot;Brandenburg&quot;, &quot;Brandenburg&quot;, &quot;B...
#&gt; $ state_code     &lt;chr&gt; &quot;BB&quot;, &quot;BB&quot;, &quot;BB&quot;, &quot;BB&quot;, &quot;BB&quot;, &quot;BB&quot;, &quot;BB&quot;, &quot;BB&quot;,...
#&gt; $ county         &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...
#&gt; $ county_code    &lt;chr&gt; &quot;00&quot;, &quot;00&quot;, &quot;00&quot;, &quot;00&quot;, &quot;00&quot;, &quot;00&quot;, &quot;00&quot;, &quot;00&quot;,...
#&gt; $ community      &lt;chr&gt; &quot;Landkreis Oberspreewald-Lausitz&quot;, &quot;Landkreis O...
#&gt; $ community_code &lt;int&gt; 12066, 12066, 12066, 12066, 12066, 12066, 12066...
#&gt; $ lat            &lt;dbl&gt; 51.4, 51.4, 51.5, 51.4, 51.4, 51.5, 51.4, 51.4,...
#&gt; $ long           &lt;dbl&gt; 14.0, 13.7, 13.9, 14.0, 13.9, 13.9, 13.9, 13.7,...
#&gt; $ accuracy       &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...
</code></pre>

<h2 id="test-it">Test it</h2>

<p>Now, enough of grey theory! Unfortunately, I don&rsquo;t know any nice Hamlet citation here, which would certainly be impressive.</p>

<pre><code class="language-r">my_col &lt;- sample(1:7, length(de_shape), replace = T)
plot(de_shape[c(&quot;PLZ99&quot;, &quot;geometry&quot;)],
     col = brewer.pal(7, &quot;Greens&quot;)[my_col], border = F)
</code></pre>

<p><img src="https://sebastiansauer.github.io/images/2017-10-06/unnamed-chunk-8-1.png" title="plot of chunk unnamed-chunk-8" alt="plot of chunk unnamed-chunk-8" width="70%" style="display: block; margin: auto;" /></p>

<h2 id="filter-bavaria">Filter Bavaria</h2>

<pre><code class="language-r">plz_bavaria &lt;- plz_df %&gt;%
  filter(state == &quot;Bayern&quot;)

plz_bavaria_vec &lt;- plz_bavaria$postal_code
</code></pre>

<p>Easy; ~2259 zip codes in Bavaria.</p>

<p>Now let&rsquo;s filter the shape file.</p>

<pre><code class="language-r">my_rows &lt;- de_shape$PLZ99 %in% plz_bavaria_vec
</code></pre>

<p>And plot Bavaria:</p>

<pre><code class="language-r">my_col &lt;- sample(1:7, length(de_shape), replace = T)

bav_data &lt;- de_shape[my_rows,c(&quot;PLZ99&quot;, &quot;geometry&quot;)]
plot(bav_data,
     col = brewer.pal(7, &quot;Oranges&quot;)[my_col], border = F)
</code></pre>

<p><img src="https://sebastiansauer.github.io/images/2017-10-06/unnamed-chunk-11-1.png" title="plot of chunk unnamed-chunk-11" alt="plot of chunk unnamed-chunk-11" width="70%" style="display: block; margin: auto;" /></p>

<h2 id="now-plot-with-ggplot2">Now plot with ggplot2</h2>

<pre><code class="language-r">
bav_data$PLZ2 &lt;- str_extract(bav_data$PLZ99, &quot;\\d\\d&quot;)


ggplot(data = bav_data) +
  geom_sf(aes(fill = PLZ2)) +
  scale_fill_viridis_d() +
  guides(fill = FALSE) -&gt; p_bavaria
p_bavaria
</code></pre>

<p><img src="https://sebastiansauer.github.io/images/2017-10-06/unnamed-chunk-12-1.png" title="plot of chunk unnamed-chunk-12" alt="plot of chunk unnamed-chunk-12" width="70%" style="display: block; margin: auto;" /></p>

<h2 id="sample-some-counties">Sample some counties</h2>

<p>FWIW, let&rsquo;s sample some counties, and fill them in a distinct color.</p>

<pre><code class="language-r">
bav_data$PLZ_sample &lt;- sample(c(0,1),
                              size = nrow(bav_data),
                              prob = c(.99, .01),
                              replace = TRUE)


ggplot(data = bav_data) +
  geom_sf(aes(fill = PLZ_sample)) +
  scale_fill_viridis() +
  guides(fill = FALSE) -&gt; p_bavaria2
p_bavaria2
</code></pre>

<p><img src="https://sebastiansauer.github.io/images/2017-10-06/unnamed-chunk-13-1.png" title="plot of chunk unnamed-chunk-13" alt="plot of chunk unnamed-chunk-13" width="70%" style="display: block; margin: auto;" /></p>

<p>Let&rsquo;s define our own palette:</p>

<pre><code class="language-r">bav_data$PLZ_sample &lt;- sample(c(0,1),
                              size = nrow(bav_data),
                              prob = c(.99, .01),
                              replace = TRUE) %&gt;% factor
my_pal &lt;- c(&quot;grey80&quot;, &quot;firebrick&quot;)
ggplot(data = bav_data) +
  geom_sf(aes(fill = PLZ_sample)) +
  scale_fill_manual(values = my_pal) +
  guides(fill = FALSE) -&gt; p_bavaria3
p_bavaria3
</code></pre>

<p><img src="https://sebastiansauer.github.io/images/2017-10-06/unnamed-chunk-14-1.png" title="plot of chunk unnamed-chunk-14" alt="plot of chunk unnamed-chunk-14" width="70%" style="display: block; margin: auto;" /></p>

<h1 id="bigger-visual-chunks">Bigger visual chunks</h1>

<p>Let&rsquo;s cut the polygons in bigger chunks, say, according to the first digit in the zip code.</p>

<pre><code class="language-r">bav_data$PLZ1 &lt;- str_extract(bav_data$PLZ99, &quot;\\d&quot;)

my_pal &lt;- c(&quot;grey80&quot;, &quot;firebrick&quot;)
ggplot(data = bav_data) +
  geom_sf(aes(fill = PLZ1)) +
  scale_fill_viridis_d() -&gt; p_bavaria4
p_bavaria4
</code></pre>

<p><img src="https://sebastiansauer.github.io/images/2017-10-06/unnamed-chunk-15-1.png" title="plot of chunk unnamed-chunk-15" alt="plot of chunk unnamed-chunk-15" width="70%" style="display: block; margin: auto;" /></p>

<p>Happy map painting!</p>

              
            </div>
          </div>
          <div id="post-footer" class="post-footer main-content-wrap">
            
              
                
                
                  <div class="post-footer-tags">
                    <span class="text-color-light text-small">TAGGED IN</span><br/>
                    
  <a class="tag tag--primary tag--small" href="/tags/rstats/">rstats</a>

  <a class="tag tag--primary tag--small" href="/tags/plotting/">plotting</a>

                  </div>
                
              
            
            
  <div class="post-actions-wrap">
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="/2017/10/unemp-map/" data-tooltip="Mapping unemployment rate to German district areas">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="/2017/09/kongresse_2018/" data-tooltip="Kongresse 2018 - Wirtschaftspsychologie und verwandte Gebiete">
              
                  <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=/2017/10/chloromap/">
              <i class="fa fa-facebook-official"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=/2017/10/chloromap/">
              <i class="fa fa-twitter"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=/2017/10/chloromap/">
              <i class="fa fa-google-plus"></i>
            </a>
          </li>
        
      
      
        <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#disqus_thread">
            <i class="fa fa-comment-o"></i>
          </a>
        </li>
      
      <li class="post-action">
        
          <a class="post-action-btn btn btn--default" href="#">
        
          <i class="fa fa-list"></i>
        </a>
      </li>
    </ul>
  </div>


            
              
                <div id="disqus_thread">
  <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
              
            
          </div>
        </article>
        <footer id="footer" class="main-content-wrap">
  <span class="copyrights">
    &copy; 2017 <a Sebastian Sauer CC-BY-SA 4.0 </a>. All Rights Reserved
  </span>
</footer>

      </div>
      <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
        
  <div class="post-actions-wrap">
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="/2017/10/unemp-map/" data-tooltip="Mapping unemployment rate to German district areas">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="/2017/09/kongresse_2018/" data-tooltip="Kongresse 2018 - Wirtschaftspsychologie und verwandte Gebiete">
              
                  <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=/2017/10/chloromap/">
              <i class="fa fa-facebook-official"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=/2017/10/chloromap/">
              <i class="fa fa-twitter"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=/2017/10/chloromap/">
              <i class="fa fa-google-plus"></i>
            </a>
          </li>
        
      
      
        <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#disqus_thread">
            <i class="fa fa-comment-o"></i>
          </a>
        </li>
      
      <li class="post-action">
        
          <a class="post-action-btn btn btn--default" href="#">
        
          <i class="fa fa-list"></i>
        </a>
      </li>
    </ul>
  </div>


      </div>
      <div id="share-options-bar" class="share-options-bar" data-behavior="4">
  <i id="btn-close-shareoptions" class="fa fa-close"></i>
  <ul class="share-options">
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=%2F2017%2F10%2Fchloromap%2F">
          <i class="fa fa-facebook-official"></i><span>Share on Facebook</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=%2F2017%2F10%2Fchloromap%2F">
          <i class="fa fa-twitter"></i><span>Share on Twitter</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://plus.google.com/share?url=%2F2017%2F10%2Fchloromap%2F">
          <i class="fa fa-google-plus"></i><span>Share on Google&#43;</span>
        </a>
      </li>
    
  </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>
    </div>
    
    <div id="about">
  <div id="about-card">
    <div id="about-btn-close">
      <i class="fa fa-remove"></i>
    </div>
    
      <img id="about-card-picture" src="//www.gravatar.com/avatar/8851f7754d1792f008b8874cd258f5b7?s=110" alt="Author&#39;s picture" />
    
    <h4 id="about-card-name">Sebastian Sauer</h4>
    
      <div id="about-card-bio"><strong>Data Scie</strong>nce blog of Sebastian Sauer</div>
    
    
      <div id="about-card-job">
        <i class="fa fa-briefcase"></i>
        <br/>
        Data enthusiast
      </div>
    
    
      <div id="about-card-location">
        <i class="fa fa-map-marker"></i>
        <br/>
        Nuremberg
      </div>
    
  </div>
</div>

    <div id="algolia-search-modal" class="modal-container">
  <div class="modal">
    <div class="modal-header">
      <span class="close-button"><i class="fa fa-close"></i></span>
      <a href="https://algolia.com" target="_blank" rel="noopener" class="searchby-algolia text-color-light link-unstyled">
        <span class="searchby-algolia-text text-color-light text-small">by</span>
        <img class="searchby-algolia-logo" src="https://www.algolia.com/static_assets/images/press/downloads/algolia-light.svg">
      </a>
      <i class="search-icon fa fa-search"></i>
      <form id="algolia-search-form">
        <input type="text" id="algolia-search-input" name="search"
          class="form-control input--large search-input" placeholder="Search" />
      </form>
    </div>
    <div class="modal-body">
      <div class="no-result text-color-light text-center">no post found</div>
      <div class="results">
        
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="/2017/11/textmining-grundlagen/">
                <h3 class="media-heading">Grundlagen des Textminings mit R</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Nov 11, 2017
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">Lernziele:
  - Sie kennen zentrale Ziele und Begriffe des Textminings. - Sie wissen, was ein &#39;tidy text dataframe&#39; ist. - Sie können Worthäufigkeiten auszählen. - Sie können Worthäufigkeiten anhand einer Wordcloud visualisieren. In dieser Übung benötigte R-Pakete:
library(tidyverse) # Datenjudo library(stringr) # Textverarbeitung library(tidytext) # Textmining library(lsa) # Stopwörter library(SnowballC) # Wörter trunkieren library(wordcloud) # Wordcloud anzeigen  Bitte installieren Sie rechtzeitig alle Pakete, z.B. in RStudio über den Reiter Packages … Install.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="/2017/11/grundlagen-des-textminings-mit-r-teil-2/">
                <h3 class="media-heading">Grundlagen des Textminings mit R - Teil 2</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Nov 11, 2017
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">In dieser Übung benötigte R-Pakete:
library(tidyverse) # Datenjudo library(stringr) # Textverarbeitung library(tidytext) # Textmining library(lsa) # Stopwörter library(SnowballC) # Wörter trunkieren library(wordcloud) # Wordcloud anzeigen library(skimr) # Überblicksstatistiken Aus dem letzten Post Daten einlesen:
osf_link &lt;- paste0(&quot;https://osf.io/b35r7//?action=download&quot;) afd &lt;- read_csv(osf_link) Aus breit mach lang:
afd %&gt;% unnest_tokens(output = token, input = content) %&gt;% dplyr::filter(str_detect(token, &quot;[a-z]&quot;)) -&gt; afd_long Stopwörter entfernen:
data(stopwords_de, package = &quot;lsa&quot;) stopwords_de &lt;- data_frame(word = stopwords_de) # Für das Joinen werden gleiche Spaltennamen benötigt stopwords_de &lt;- stopwords_de %&gt;% rename(token = word) afd_long %&gt;% anti_join(stopwords_de) -&gt; afd_no_stop Wörter zählen:</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="/2017/11/image-path-for-blogdown/">
                <h3 class="media-heading">Image path for blogdown</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Nov 11, 2017
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">How to include external images to a hugo post?
Suppose we have a file img1.png in project1, ie., project1/img1.png. Do this:
Copy your folder with images to static/. Use this path in your blogdown post: /project/img1.png.   Mind the leading slash!  Example time This code (on my machine) ![](/images/textmining/tidytext-crop.png){ width=&quot;20%&quot; }
renders this:
 Note the nice width option.
 Knitr way The knitr way works similarly:
knitr::include_graphics(&quot;/images/textmining/tidytext-crop.png&quot;)  </div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="/2017/11/test/">
                <h3 class="media-heading">test</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Nov 11, 2017
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather"> knitr way
knitr::include_graphics(&quot;/images/textmining/tidytext-crop.png&quot;) </div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="/2017/11/dummy-variables-and-regression/">
                <h3 class="media-heading">Dummy variables and regression</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Nov 11, 2017
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">For modeling cause-effect relationships, linear regression is among the most typically used methods.
Take, for example, the idea that the Gross Domestic Product (GDP) drives religiosity. Of course, we should have a strong theory that defends this choice and this directionality. Without a convincing theory it may be argued that the cause-relationship is the other way round or complete different (ie., some third variable accounts for any association between GDP and religiosity).</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="/2017/11/interactive-diagrams-in-lieu-of-shiny/">
                <h3 class="media-heading">Interactive diagrams in lieu of shiny?</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Nov 11, 2017
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">One frequent use of the Shiny server software is displaying interactive data diagrams. The pro of using Shiny is the great flexibility; much more than “just graphics” can be done.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="/2017/11/my-favorite-stats-text-book/">
                <h3 class="media-heading">My favorite stats text book</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Nov 11, 2017
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">Some thoughts how my favorite applied stats text book would look like. I am looking at eg., business fields such as MBA as consumers.
My ideal applied stats text book is case study oriented (“Assume you would like to predict which movie will score highest next year based on some movie characteristics you know”)
 makes use of recent data analytics techniques such as tree based methods (Random Forests) or Shrinkage models (Lasso)</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="/2017/11/use-case-for-purrr-map/">
                <h3 class="media-heading">Use case for purrr::map</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Nov 11, 2017
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">library(tidyverse) d &lt;- data_frame( id = c(1,1,1,1,1,1,2,2,3,3,3,4,1,2,2) ) d$id %&gt;% map </div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="/2017/11/compute-effect-sizes-with-r-a-primer/">
                <h3 class="media-heading">Compute effect sizes with R. A primer.</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Nov 11, 2017
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">A typical “cook book recipe” for doing data analysis is an applied stats course is:
report descriptive statistics plot some nice diagrams test hypothesis report effect sizes  Let’s have a quick glance at these steps. We will use the dataset flights of the package nycflights13.
data(flights, package = &quot;nycflights13&quot;) This post will be tidyverse-driven.
library(tidyverse) library(skimr) library(mosaic) Let’s compute some summaries:
flights %&gt;% select(arr_delay) %&gt;% skim #&gt; Skim summary statistics #&gt; n obs: 336776 #&gt; n variables: 1 #&gt; #&gt; Variable type: numeric #&gt; var missing complete n mean sd min p25 median p75 max #&gt; 1 arr_delay 9430 327346 336776 6.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="/2017/11/get-your-stats-result-in-a-table-easily/">
                <h3 class="media-heading">Get your stats result in a table easily</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Nov 11, 2017
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">Having computed some staticis, one would like to display them. Either in a figure, on in a table, that’s the two typical ways.
Let’s explore some helper functions to get your stats to a table easily.
A nice overview on packages can be found here.
Let’s have a quick glance at these steps. We will use the dataset flights of the package nycflights13.
data(flights, package = &quot;nycflights13&quot;) This post will be tidyverse-driven:</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
      </div>
    </div>
    <div class="modal-footer">
      <p class="results-count text-medium"
         data-message-zero="no post found"
         data-message-one="1 post found"
         data-message-other="{n} posts found">
         144 posts found
      </p>
    </div>
  </div>
</div>
    
  
    
    <div id="cover" style="background-image:url('/images/wildblue.jpg');"></div>
  


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js" integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw=" crossorigin="anonymous"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.7/js/jquery.fancybox.min.js" integrity="sha256-GEAnjcTqVP+vBp3SSc8bEDQqvWAZMiHyUSIorrWwH50=" crossorigin="anonymous"></script>


<script src="/js/script-qi9wbxp2ya2j6p7wx1i6tgavftewndznf4v0hy2gvivk1rxgc3lm7njqb6bz.min.js"></script>



<script>
$(document).ready(function() {
  hljs.configure({ classPrefix: '', useBR: false });
  $('pre.code-highlight > code, pre > code').each(function(i, block) {
    if (!$(this).hasClass('codeblock')) {
      $(this).addClass('codeblock');
    }
    hljs.highlightBlock(block);
  });
});
</script>


  
    
      <script>
        var disqus_config = function () {
          this.page.url = '\/2017\/10\/chloromap\/';
          
            this.page.identifier = '\/2017\/10\/chloromap\/'
          
        };
        (function() {
          
          
          if (window.location.hostname == "localhost") {
            return;
          }
          var d = document, s = d.createElement('script');
          var disqus_shortname = 'https-sebastiansauer-github-io';
          s.src = '//' + disqus_shortname + '.disqus.com/embed.js';

          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
        })();
      </script>
    
  



    
  </body>
</html>

