<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

  <title>The two ggplot2-ways of plottings bars</title>
  <meta property="og:title" content="The two ggplot2-ways of plottings bars" />
  <meta name="twitter:title" content="The two ggplot2-ways of plottings bars" />
  <meta name="description" content="Bar plots, whereas not appropriate for means, are helpful for conveying impressions of frequencies, particularly relative frequencies, ie., proportions.
Intuition: Bar plots and histograms alike can be thought of as piles of Lego pieces, put onto each each other, where each Lego piece represents (is) one observation.
Presenting tables of frequencies are often not insightful to the eye. Bar plots are often much more accessible and present the story more clearly.">
  <meta property="og:description" content="Bar plots, whereas not appropriate for means, are helpful for conveying impressions of frequencies, particularly relative frequencies, ie., proportions.
Intuition: Bar plots and histograms alike can be thought of as piles of Lego pieces, put onto each each other, where each Lego piece represents (is) one observation.
Presenting tables of frequencies are often not insightful to the eye. Bar plots are often much more accessible and present the story more clearly.">
  <meta name="twitter:description" content="Bar plots, whereas not appropriate for means, are helpful for conveying impressions of frequencies, particularly relative frequencies, ie., proportions.
Intuition: Bar plots and histograms alike can …">
  <meta name="author" content="Sebastiuan Sauer"/>
  <link href='/img/logo-data-se.ico' rel='icon' type='image/x-icon'/>
  <meta property="og:image" content="/img/logo-data-se.png" />
  <meta name="twitter:image" content="/img/logo-data-se.png" />
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@sauer_sebasitan" />
  <meta name="twitter:creator" content="@sauer_sebasitan" />
  <meta property="og:url" content="/2017/01/20/two_ways_barplots_with_ggplot2/" />
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="Data Se" />

  <meta name="generator" content="Hugo 0.21" />
  <link rel="canonical" href="/2017/01/20/two_ways_barplots_with_ggplot2/" />
  <link rel="alternate" href="" type="application/rss+xml" title="Data Se">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.css" integrity="sha384-wITovz90syo1dJWVh32uuETPVEtGigN07tkttEqPv+uR2SE/mbQcG7ATL28aI9H0" crossorigin="anonymous">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" />
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  <link rel="stylesheet" href="/css/main.css" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" />
  <link rel="stylesheet" href="/css/highlighting.css" />
  <link rel="stylesheet" href="/css/pygment_highlights.css" />
  <link rel="stylesheet" href="/css/highlight.min.css" />


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.1/photoswipe.min.css" integrity="sha256-sCl5PUOGMLfFYctzDW3MtRib0ctyUvI9Qsmq2wXOeBY=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.1/default-skin/default-skin.min.css" integrity="sha256-BFeI1V+Vh1Rk37wswuOYn5lsTcaU96hGaI7OUVCLjPc=" crossorigin="anonymous" />



<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>

<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-99297878-1', 'auto');
ga('send', 'pageview');
</script>
<script async src='//www.google-analytics.com/analytics.js'></script>

</head>

  <body>
    <nav class="navbar navbar-default navbar-fixed-top navbar-custom">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/">Data Se</a>
    </div>

    <div class="collapse navbar-collapse" id="main-navbar">
      <ul class="nav navbar-nav navbar-right">
        
          
            <li>
              <a title="Blog" href="/">Blog</a>
            </li>
          
        
          
            <li>
              <a title="Tags" href="/tags">Tags</a>
            </li>
          
        
          
            <li>
              <a title="About" href="/page/about/">About</a>
            </li>
          
        

        

        
      </ul>
    </div>

    <div class="avatar-container">
      <div class="avatar-img-border">
        
          <a title="Data Se" href="/">
            <img class="avatar-img" src="/img/logo-data-se.png" alt="Data Se" />
          </a>
        
      </div>
    </div>

  </div>
</nav>




    
  
  
  




  

  <header class="header-section ">
    
    <div class="intro-header no-img">
      
      <div class="container">
        <div class="row">
          <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
            <div class="post-heading">
              <h1>The two ggplot2-ways of plottings bars</h1>
                
                
                  <span class="post-meta">
  Posted on January 20, 2017
  
</span>


                
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>


    
<div class="container" role="main">
  <div class="row">
    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
      <article role="main" class="blog-post">
        

<p>Bar plots, whereas not appropriate for means, are helpful for conveying impressions of frequencies, particularly relative frequencies, ie., proportions.</p>

<p>Intuition: Bar plots and histograms alike can be thought of as piles of Lego pieces, put onto each each other, where each Lego piece represents (is) one observation.</p>

<p>Presenting tables of frequencies are often not insightful to the eye. Bar plots are often much more accessible and present the story more clearly.</p>

<p>In R, using <code>ggplot2</code>, there are basically two ways of plotting bar plots (as far as I know). First, we can just take a data frame in its raw form and let <code>ggplot2</code> count the rows so to compute frequencies and map that to the height of the bar. Second, we can do the computation of frequencies ourselves and just give the condensed numbers to ggplot2. Let&rsquo;s look at each of the two ways in turn.</p>

<h1 id="way-one-give-raw-unprocessed-data-to-ggplot">Way one: Give raw, unprocessed data to <code>ggplot</code></h1>

<p>First, let&rsquo;s give the raw (unprocessed) data frame to <code>ggplot2</code>, and let <code>ggplot2</code> compute frequencies. For example:</p>

<pre><code class="language-r">data(Affairs, package = &quot;AER&quot;) # package must be installed upfron

library(ggplot2)
library(dplyr)


ggplot(Affairs) +
  aes(x = rating, fill = factor(affairs)) +
  geom_bar(position = &quot;fill&quot;)
</code></pre>

<p><img src="https://sebastiansauer.github.io/images/2017-01-20/unnamed-chunk-1-1.png" alt="plot of chunk unnamed-chunk-1" /></p>

<pre><code class="language-r"># Recode: 0 -&gt; &quot;Iron Heart&quot;; else -&gt; &quot;Player&quot;
Affairs$halodrie &lt;- recode(Affairs$affairs, `0` = &quot;Iron Heart&quot;, .default = &quot;Heart Breaker&quot;)


ggplot(Affairs) +
  aes(x = rating, fill = factor(halodrie)) +
  geom_bar(position = &quot;fill&quot;)
</code></pre>

<p><img src="https://sebastiansauer.github.io/images/2017-01-20/unnamed-chunk-1-2.png" alt="plot of chunk unnamed-chunk-1" /></p>

<p>Data comes from Fair (1978):
Fair, R.C. (1978). A Theory of Extramarital Affairs. <em>Journal of Political Economy</em>, <strong>86</strong>, 45–61.</p>

<p>Some notes. We use <code>fill = ...</code> to say &ldquo;put the number of &lsquo;Heart Breakers&rsquo; and &lsquo;Iron Hearts&rsquo; onto each other&rdquo;. So the columns for &lsquo;Heart breakers&rsquo; and for &lsquo;Iron Hearts&rsquo; pile up on each other. Of importance, the <code>position = &quot;fill&quot;</code> (note the quotation marks) will make &ldquo;proportion bars&rdquo;, so the height of the bar goes up to 100%. This is obviously only of use if different colors indicate the relative height (frequencies) of the categories in the bar. Don&rsquo;t forget to make the filling variable of type <code>factor</code>, otherwise the filling can go awry.</p>

<p>Also note that you cannot make use of <code>qplot</code> here, as <code>qplot</code> does <em>not</em> support the <code>position</code> parameter (see documentation; <code>qplot</code> is designed for easy, quick plotting):</p>

<pre><code class="language-r">qplot(data = Affairs,
      x = rating, fill = halodrie, geom = &quot;bar&quot;, position = &quot;fill&quot;)
</code></pre>

<pre><code>## Warning: `position` is deprecated
</code></pre>

<p><img src="https://sebastiansauer.github.io/images/2017-01-20/unnamed-chunk-2-1.png" alt="plot of chunk unnamed-chunk-2" /></p>

<h1 id="way-two-summarise-the-frequencies-upfront-and-give-the-summaries-to-ggplot">Way two: Summarise the frequencies upfront, and give the summaries to <code>ggplot</code></h1>

<p>Way two basically consists of doing the computation of the frequencies by oneself and of then giving the frequencies per category/group for plotting. See:</p>

<pre><code class="language-r">A2 &lt;- count(Affairs, rating, halodrie)
A2 &lt;- group_by(A2, rating)
A2 &lt;- mutate(A2, prop = n / sum(n))
</code></pre>

<p>Now we handover <code>A2</code>, the dataframe consisting of summarized data (frequencies) to <code>qplot</code>:</p>

<pre><code class="language-r">qplot(x = rating, y = prop, fill = halodrie, data = A2, geom = &quot;col&quot;)
</code></pre>

<p><img src="https://sebastiansauer.github.io/images/2017-01-20/unnamed-chunk-4-1.png" alt="plot of chunk unnamed-chunk-4" /></p>

<p>Easy, right? Note that geom <code>col</code> (as in column) expects single numbers; it does <em>not</em> count rows (as does <code>geom_bar</code>). In effect, <code>geom_col(...)</code> is <code>geom_bar(stat = identity, ...)</code>. As our proportions sum up to 100% we do need need to care to tell about relative height plotting. Works out automatically.</p>

<p>To the contrary, <code>geom_bar</code> won&rsquo;t work:</p>

<pre><code class="language-r">qplot(x = rating, fill = halodrie, data = A2, geom = &quot;bar&quot;)
</code></pre>

<p><img src="https://sebastiansauer.github.io/images/2017-01-20/unnamed-chunk-5-1.png" alt="plot of chunk unnamed-chunk-5" /></p>

<p>Translating <code>qplot</code> to <code>ggplot</code> is easy enough:</p>

<pre><code class="language-r">ggplot(A2) +
  aes(x = rating, y = prop, fill = halodrie) +
  geom_col()
</code></pre>

<p><img src="https://sebastiansauer.github.io/images/2017-01-20/unnamed-chunk-6-1.png" alt="plot of chunk unnamed-chunk-6" /></p>

<p>Some polishment:</p>

<pre><code class="language-r">qplot(x = rating, y = prop, fill = halodrie, geom = &quot;col&quot;, data = A2) + theme(legend.position = &quot;bottom&quot;) + labs(title = &quot;Halodrie-status \nacross different levels of marital satisfaction&quot;) +
  theme(plot.title = element_text(hjust = 0.5))
</code></pre>

<p><img src="https://sebastiansauer.github.io/images/2017-01-20/unnamed-chunk-7-1.png" alt="plot of chunk unnamed-chunk-7" /></p>

<p>Now suppose, we want not showing the proportions, ie., the bars should not have height 100%, but the real count-height. <code>position = &quot;stack&quot;</code> will accomplish that.</p>

<pre><code class="language-r">ggplot(A2) +
  geom_col(aes(x = rating, y = n, fill = halodrie), position = &quot;stack&quot;)
</code></pre>

<p><img src="https://sebastiansauer.github.io/images/2017-01-20/unnamed-chunk-8-1.png" alt="plot of chunk unnamed-chunk-8" /></p>

<p>Note that this view makes it more difficult to tell in which column the proportion of &ldquo;Heart Players&rdquo; is high(er).</p>

<p>In <code>qplot</code>:</p>

<pre><code class="language-r">qplot(data = A2,
      x = rating,
      y = n,
      fill = halodrie,
      geom = &quot;col&quot;)
</code></pre>

<p><img src="https://sebastiansauer.github.io/images/2017-01-20/unnamed-chunk-9-1.png" alt="plot of chunk unnamed-chunk-9" /></p>

<p>Happy plotting!</p>

      </article>

      <ul class="pager blog-pager">
        
          <li class="previous">
            <a href="/2017/01/18/fallstudie_flights/" data-toggle="tooltip" data-placement="top" title="Fallstudie (YACSDA) zur praktischen Datenanalyse mit dplyr">&larr; Previous Post</a>
          </li>
        
        
          <li class="next">
            <a href="/2017/01/20/rsquared/" data-toggle="tooltip" data-placement="top" title="Gentle intro to &#39;R-squared equals squared r&#39;">Next Post &rarr;</a>
          </li>
        
      </ul>

      
        
          <div class="disqus-comments">
            <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'https-sebastiansauer-github-io';
    var disqus_identifier = '\/2017\/01\/20\/two_ways_barplots_with_ggplot2\/';
    var disqus_title = 'The two ggplot2-ways of plottings bars';
    var disqus_url = '\/2017\/01\/20\/two_ways_barplots_with_ggplot2\/';

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
          </div>
        
      

    </div>
  </div>
</div>

    <footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center footer-links">
          
              <li>
                <a href="mailto:ssauer@posteo.de" title="Email me">
                  <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-envelope fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://github.com/sebastian_sauer" title="GitHub">
                  <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://twitter.com/sauer_sebasitan" title="Twitter">
                  <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://reddit.com/u/username" title="Reddit">
                  <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-reddit-alien fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://linkedin.com/in/https://www.linkedin.com/in/dr-sebastian-sauer-4791762/" title="LinkedIn">
                  <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://www.xing.com/profile/https://www.xing.com/profile/Sebastian_Sauer2" title="Xing">
                  <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-xing fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
          
          <li>
            <a href="" title="RSS">
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
        </ul>
        <p class="credits copyright text-muted">
          
            
              <a href="yourwebsite.com">Sebastiuan Sauer</a>
            
          

          &nbsp;&bull;&nbsp;
          2017

          
            &nbsp;&bull;&nbsp;
            <a href="/">Data Se</a>
          
        </p>
        
        <p class="credits theme-by text-muted">
          <a href="http://gohugo.io">Hugo v0.21</a> powered &nbsp;&bull;&nbsp; Theme by <a href="http://deanattali.com/beautiful-jekyll/">Beautiful Jekyll</a> adapted to <a href="https://github.com/halogenica/beautifulhugo">Beautiful Hugo</a>
          
        </p>
      </div>
    </div>
  </div>
</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.js" integrity="sha384-/y1Nn9+QQAipbNQWU65krzJralCnuOasHncUFXGkdwntGeSvQicrYkiUBwsgUqc1" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/contrib/auto-render.min.js" integrity="sha384-dq1/gEHSxPZQ7DdrM82ID4YVol9BYyU7GbWlIwnwyPzotpoc57wDw/guX8EaYGPx" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<script src="/js/main.js"></script>
<script src="/js/highlight.min.js"></script>
<script> hljs.initHighlightingOnLoad(); </script><script> renderMathInElement(document.body); </script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.1/photoswipe.min.js" integrity="sha256-UplRCs9v4KXVJvVY+p+RSo5Q4ilAUXh7kpjyIP5odyc=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.1/photoswipe-ui-default.min.js" integrity="sha256-PWHOlUzc96pMc8ThwRIXPn8yH4NOLu42RQ0b9SpnpFk=" crossorigin="anonymous"></script>
<script src="/js/load-photoswipe.js"></script>



  </body>
</html>

