<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Hugo 0.74.3" />


<title>YACSDA (Fallstudie) zum Datensatz &#39;Affairs&#39; - Data Se</title>
<meta property="og:title" content="YACSDA (Fallstudie) zum Datensatz &#39;Affairs&#39; - Data Se">



  








<link href='//cdn.bootcss.com/highlight.js/9.11.0/styles/github.min.css' rel='stylesheet' type='text/css' />



<link rel="stylesheet" href="/css/fonts.css" media="all">
<link rel="stylesheet" href="/css/main.css" media="all">



  </head>
  <body>
    <div class="wrapper">
      <header class="header">
        <nav class="nav">
  <a href="/" class="nav-logo">
    <img src="/images/logo-data-se.png"
         width="50"
         height="50"
         alt="Logo">
  </a>

  <ul class="nav-links">
    
    <li><a href="/about/">About</a></li>
    
    <li><a href="/">Blog</a></li>
    
    <li><a href="/privacy/">Data privacy</a></li>
    
  </ul>
</nav>

      </header>


<main class="content" role="main">

  <article class="article">
    
    <span class="article-duration">17 min read</span>
    

    <h1 class="article-title">YACSDA (Fallstudie) zum Datensatz &#39;Affairs&#39;</h1>

    
    <span class="article-date">2017/01/05</span>
    

    <div class="article-content">
      <hr>
<p>This YACSDA (Yet-another-case-study-on-data-analysis) in composed in German language. Some typical data analytical steps are introduced.</p>
<hr>
<p>Wovon ist die Häufigkeit von Affären (Seitensprüngen) in Ehen abhängig? Diese Frage soll anhand des Datensates <code>Affair</code> untersucht werden.</p>
<p>Dieser Post stellt beispielhaft eine grundlegende Methoden der praktischen Datenanalyse im Rahmen einer kleinen Fallstudie (YACSDA) vor.</p>
<p>Quelle der Daten: <a href="http://statsmodels.sourceforge.net/0.5.0/datasets/generated/fair.html">http://statsmodels.sourceforge.net/0.5.0/datasets/generated/fair.html</a></p>
<p>Der Datensatz findet sich (in ähnlicher Form) auch im R-Paket <code>COUNT</code> (<a href="https://cran.r-project.org/web/packages/COUNT/index.html)">https://cran.r-project.org/web/packages/COUNT/index.html)</a>.</p>
<p>Laden wir als erstes den Datensatz in R. Wählen Sie zuerst das Verzeichnis als Arbeitsverzeichnis, in dem die Daten liegen. Dann laden Sie z.B. mit dem R-Commander (s. Skript) oder &ldquo;per Hand&rdquo; z.B. bei mir so:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">Affair <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">read.csv</span>(<span style="color:#e6db74">&#34;~/Documents/Literatur/Methoden_Literatur/Datensaetze/Affair.csv&#34;</span>)
</code></pre></div><p>Schauen wir mal, ob es funktioniert hat (&ldquo;Datenmatrix betrachten&rdquo;):</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#a6e22e">head</span>(Affair)
<span style="color:#75715e">#&gt;   affairs gender age yearsmarried children religiousness education</span>
<span style="color:#75715e">#&gt; 1       0   male  37        10.00       no             3        18</span>
<span style="color:#75715e">#&gt; 2       0 female  27         4.00       no             4        14</span>
<span style="color:#75715e">#&gt; 3       0 female  32        15.00      yes             1        12</span>
<span style="color:#75715e">#&gt; 4       0   male  57        15.00      yes             5        18</span>
<span style="color:#75715e">#&gt; 5       0   male  22         0.75       no             2        17</span>
<span style="color:#75715e">#&gt; 6       0 female  32         1.50       no             2        17</span>
<span style="color:#75715e">#&gt;   occupation rating</span>
<span style="color:#75715e">#&gt; 1          7      4</span>
<span style="color:#75715e">#&gt; 2          6      4</span>
<span style="color:#75715e">#&gt; 3          1      4</span>
<span style="color:#75715e">#&gt; 4          6      5</span>
<span style="color:#75715e">#&gt; 5          6      3</span>
<span style="color:#75715e">#&gt; 6          5      5</span>
</code></pre></div><p>Ok scheint zu passen. Was jetzt?</p>
<h1 id="geben-sie-zentrale-deskriptive-statistiken-an-für-affärenhäufigkeit-und-ehezufriedenheit">Geben Sie zentrale deskriptive Statistiken an für Affärenhäufigkeit und Ehezufriedenheit!</h1>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#75715e"># nicht robust:</span>
<span style="color:#a6e22e">mean</span>(Affair<span style="color:#f92672">$</span>affairs, na.rm <span style="color:#f92672">=</span> T)
<span style="color:#75715e">#&gt; [1] 1.455907</span>
<span style="color:#a6e22e">sd</span>(Affair<span style="color:#f92672">$</span>affairs, na.rm <span style="color:#f92672">=</span> T)
<span style="color:#75715e">#&gt; [1] 3.298758</span>
<span style="color:#75715e"># robust:</span>
<span style="color:#a6e22e">median</span>(Affair<span style="color:#f92672">$</span>affair, na.rm <span style="color:#f92672">=</span> T)
<span style="color:#75715e">#&gt; [1] 0</span>
<span style="color:#a6e22e">IQR</span>(Affair<span style="color:#f92672">$</span>affair, na.rm <span style="color:#f92672">=</span> T)
<span style="color:#75715e">#&gt; [1] 0</span>
</code></pre></div><p>Es scheint, die meisten Leute haben keine Affären:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#a6e22e">table</span>(Affair<span style="color:#f92672">$</span>affairs)
<span style="color:#75715e">#&gt; </span>
<span style="color:#75715e">#&gt;   0   1   2   3   7  12 </span>
<span style="color:#75715e">#&gt; 451  34  17  19  42  38</span>
</code></pre></div><p>Man kann sich viele Statistiken mit dem Befehl <code>describe</code> aus <code>psych</code> ausgeben lassen, das ist etwas praktischer:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#a6e22e">library</span>(psych)
                 
<span style="color:#a6e22e">describe</span>(Affair<span style="color:#f92672">$</span>affairs)
<span style="color:#75715e">#&gt;    vars   n mean  sd median trimmed mad min max range skew kurtosis   se</span>
<span style="color:#75715e">#&gt; X1    1 601 1.46 3.3      0    0.55   0   0  12    12 2.34     4.19 0.13</span>
<span style="color:#a6e22e">describe</span>(Affair<span style="color:#f92672">$</span>rating)
<span style="color:#75715e">#&gt;    vars   n mean  sd median trimmed  mad min max range  skew kurtosis   se</span>
<span style="color:#75715e">#&gt; X1    1 601 3.93 1.1      4    4.07 1.48   1   5     4 -0.83    -0.22 0.04</span>
</code></pre></div><p>Dazu muss das Paket <code>psych</code> natürlich vorher installiert sein. Beachten Sie, dass man ein Paket nur <em>einmal</em> installieren muss, aber jedes Mal, wen Sie R starten, auch starten muss (mit <code>library</code>).</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#a6e22e">install.packages</span>(<span style="color:#e6db74">&#34;psych&#34;</span>)
</code></pre></div><h1 id="visualisieren-sie-zentrale-variablen">Visualisieren Sie zentrale Variablen!</h1>
<p>Sicherlich sind Diagramme auch hilfreich. Dies geht wiederum mit dem R-Commander oder z.B. mit folgenden Befehlen:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">
<span style="color:#a6e22e">library</span>(ggplot2)
<span style="color:#a6e22e">qplot</span>(x <span style="color:#f92672">=</span> affairs, data <span style="color:#f92672">=</span> Affair)
<span style="color:#a6e22e">qplot</span>(x <span style="color:#f92672">=</span> rating, data <span style="color:#f92672">=</span> Affair)
</code></pre></div><p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<p>Die meisten Menschen (dieser Stichprobe) scheinen mit Ihrer Beziehung sehr zufrieden zu sein.</p>
<h1 id="wer-ist-zufriedener-mit-der-partnerschaft-personen-mit-kindern-oder-ohne">Wer ist zufriedener mit der Partnerschaft: Personen mit Kindern oder ohne?</h1>
<p>Nehmen wir dazu mal ein paar <code>dplyr</code>-Befehle:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#a6e22e">library</span>(dplyr)
Affair <span style="color:#f92672">%&gt;%</span> 
  <span style="color:#a6e22e">group_by</span>(children) <span style="color:#f92672">%&gt;%</span> 
  <span style="color:#a6e22e">summarise</span>(rating_children <span style="color:#f92672">=</span> <span style="color:#a6e22e">mean</span>(rating, na.rm <span style="color:#f92672">=</span> T))
<span style="color:#75715e">#&gt; # A tibble: 2 × 2</span>
<span style="color:#75715e">#&gt;   children rating_children</span>
<span style="color:#75715e">#&gt;     &lt;fctr&gt;           &lt;dbl&gt;</span>
<span style="color:#75715e">#&gt; 1       no        4.274854</span>
<span style="color:#75715e">#&gt; 2      yes        3.795349</span>
</code></pre></div><p>Ah! Kinder sind also ein Risikofaktor für eine Partnerschaft! Gut, dass wir das geklärt haben.</p>
<h1 id="wie-viele-fehlende-werte-gibt-es-was-machen-wir-am-besten-damit">Wie viele fehlende Werte gibt es? Was machen wir am besten damit?</h1>
<p>Diesen Befehl könnten wir für jede Spalte auführen:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#a6e22e">sum</span>(<span style="color:#a6e22e">is.na</span>(Affair<span style="color:#f92672">$</span>affairs))
<span style="color:#75715e">#&gt; [1] 0</span>
</code></pre></div><p>Oder lieber alle auf einmal:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">Affair <span style="color:#f92672">%&gt;%</span> 
  <span style="color:#a6e22e">summarise_each</span>(<span style="color:#a6e22e">funs</span>(<span style="color:#a6e22e">sum</span>(<span style="color:#a6e22e">is.na</span>(.))))
<span style="color:#75715e">#&gt;   affairs gender age yearsmarried children religiousness education</span>
<span style="color:#75715e">#&gt; 1       0      0   0            0        0             0         0</span>
<span style="color:#75715e">#&gt;   occupation rating</span>
<span style="color:#75715e">#&gt; 1          0      0</span>
</code></pre></div><p>Übrigens gibt es ein gutes <a href="https://www.rstudio.com/wp-content/uploads/2015/02/data-wrangling-cheatsheet.pdf">Cheat Sheet</a> für <code>dplyr</code>.</p>
<p>Ah, gut, keine fehlenden Werte. Das macht uns das Leben leichter.</p>
<h1 id="wer-ist-glücklicher-männer-oder-frauen">Wer ist glücklicher: Männer oder Frauen?</h1>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">Affair <span style="color:#f92672">%&gt;%</span> 
  <span style="color:#a6e22e">group_by</span>(gender) <span style="color:#f92672">%&gt;%</span> 
  <span style="color:#a6e22e">summarise</span>(rating_gender <span style="color:#f92672">=</span> <span style="color:#a6e22e">mean</span>(rating))
<span style="color:#75715e">#&gt; # A tibble: 2 × 2</span>
<span style="color:#75715e">#&gt;   gender rating_gender</span>
<span style="color:#75715e">#&gt;   &lt;fctr&gt;         &lt;dbl&gt;</span>
<span style="color:#75715e">#&gt; 1 female      3.939683</span>
<span style="color:#75715e">#&gt; 2   male      3.923077</span>
</code></pre></div><p>Praktisch kein Unterschied. Heißt das auch, es gibt keinen Unterschied in der Häufigkeit der Affären?</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">Affair <span style="color:#f92672">%&gt;%</span> 
  <span style="color:#a6e22e">group_by</span>(gender) <span style="color:#f92672">%&gt;%</span> 
  <span style="color:#a6e22e">summarise</span>(affairs_gender <span style="color:#f92672">=</span> <span style="color:#a6e22e">mean</span>(affairs))
<span style="color:#75715e">#&gt; # A tibble: 2 × 2</span>
<span style="color:#75715e">#&gt;   gender affairs_gender</span>
<span style="color:#75715e">#&gt;   &lt;fctr&gt;          &lt;dbl&gt;</span>
<span style="color:#75715e">#&gt; 1 female       1.419048</span>
<span style="color:#75715e">#&gt; 2   male       1.496503</span>
</code></pre></div><p>Scheint auch kein Unterschied zu sein&hellip;</p>
<p>Und zum Abschluss noch mal etwas genauer: Teilen wir mal nach Geschlecht und nach Kinderstatus auf, also in 4 Gruppen. Theoretisch dürfte es hier auch keine Unterschiede/Zusammenhänge geben. Zumindest fällt mir kein sinnvoller Grund ein; zumal die vorherige eindimensionale Analyse keine Unterschiede zu Tage gefördert hat.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">Affair <span style="color:#f92672">%&gt;%</span> 
  <span style="color:#a6e22e">group_by</span>(gender, children) <span style="color:#f92672">%&gt;%</span> 
  <span style="color:#a6e22e">summarise</span>(affairs_mean <span style="color:#f92672">=</span> <span style="color:#a6e22e">mean</span>(affairs),
            rating_mean <span style="color:#f92672">=</span> <span style="color:#a6e22e">mean</span>(rating))
<span style="color:#75715e">#&gt; Source: local data frame [4 x 4]</span>
<span style="color:#75715e">#&gt; Groups: gender [?]</span>
<span style="color:#75715e">#&gt; </span>
<span style="color:#75715e">#&gt;   gender children affairs_mean rating_mean</span>
<span style="color:#75715e">#&gt;   &lt;fctr&gt;   &lt;fctr&gt;        &lt;dbl&gt;       &lt;dbl&gt;</span>
<span style="color:#75715e">#&gt; 1 female       no    0.8383838    4.404040</span>
<span style="color:#75715e">#&gt; 2 female      yes    1.6851852    3.726852</span>
<span style="color:#75715e">#&gt; 3   male       no    1.0138889    4.097222</span>
<span style="color:#75715e">#&gt; 4   male      yes    1.6588785    3.864486</span>

Affair <span style="color:#f92672">%&gt;%</span> 
  <span style="color:#a6e22e">group_by</span>(children, gender) <span style="color:#f92672">%&gt;%</span> 
  <span style="color:#a6e22e">summarise</span>(affairs_mean <span style="color:#f92672">=</span> <span style="color:#a6e22e">mean</span>(affairs),
            rating_mean <span style="color:#f92672">=</span> <span style="color:#a6e22e">mean</span>(rating))
<span style="color:#75715e">#&gt; Source: local data frame [4 x 4]</span>
<span style="color:#75715e">#&gt; Groups: children [?]</span>
<span style="color:#75715e">#&gt; </span>
<span style="color:#75715e">#&gt;   children gender affairs_mean rating_mean</span>
<span style="color:#75715e">#&gt;     &lt;fctr&gt; &lt;fctr&gt;        &lt;dbl&gt;       &lt;dbl&gt;</span>
<span style="color:#75715e">#&gt; 1       no female    0.8383838    4.404040</span>
<span style="color:#75715e">#&gt; 2       no   male    1.0138889    4.097222</span>
<span style="color:#75715e">#&gt; 3      yes female    1.6851852    3.726852</span>
<span style="color:#75715e">#&gt; 4      yes   male    1.6588785    3.864486</span>
</code></pre></div><h1 id="berichten-sie-eine-relevante-effektstärke">Berichten Sie eine relevante Effektstärke!</h1>
<p>Hm, auch keine gewaltigen Unterschiede. Höchstens für die Zufriedenheit mit der Partnerschaft bei kinderlosen Personen scheinen sich Männer und Frauen etwas zu unterscheiden. Hier stellt sich die Frage nach der Größe des Effekts, z.B. anhand Cohen&rsquo;s d. Dafür müssen wir noch die SD pro Gruppe wissen:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">Affair <span style="color:#f92672">%&gt;%</span> 
  <span style="color:#a6e22e">group_by</span>(children, gender) <span style="color:#f92672">%&gt;%</span> 
  <span style="color:#a6e22e">summarise</span>(rating_mean <span style="color:#f92672">=</span> <span style="color:#a6e22e">mean</span>(rating),
            rating_sd <span style="color:#f92672">=</span> <span style="color:#a6e22e">sd</span>(rating))
<span style="color:#75715e">#&gt; Source: local data frame [4 x 4]</span>
<span style="color:#75715e">#&gt; Groups: children [?]</span>
<span style="color:#75715e">#&gt; </span>
<span style="color:#75715e">#&gt;   children gender rating_mean rating_sd</span>
<span style="color:#75715e">#&gt;     &lt;fctr&gt; &lt;fctr&gt;       &lt;dbl&gt;     &lt;dbl&gt;</span>
<span style="color:#75715e">#&gt; 1       no female    4.404040 0.9138302</span>
<span style="color:#75715e">#&gt; 2       no   male    4.097222 1.0636070</span>
<span style="color:#75715e">#&gt; 3      yes female    3.726852 1.1829884</span>
<span style="color:#75715e">#&gt; 4      yes   male    3.864486 1.0460525</span>
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">d <span style="color:#f92672">&lt;-</span> (<span style="color:#ae81ff">4.4</span> <span style="color:#f92672">-</span> <span style="color:#ae81ff">4.1</span>)<span style="color:#f92672">/</span>(<span style="color:#ae81ff">1</span>)
</code></pre></div><p>Die Effektstärke beträgt etwa 0.3.</p>
<h1 id="berechnen-und-visualisieren-sie-zentrale-korrelationen">Berechnen und visualisieren Sie zentrale Korrelationen!</h1>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">Affair <span style="color:#f92672">%&gt;%</span> 
  <span style="color:#a6e22e">select_if</span>(is.numeric) <span style="color:#f92672">%&gt;%</span> 
  cor <span style="color:#f92672">-&gt;</span> cor_tab

cor_tab
<span style="color:#75715e">#&gt;                    affairs        age yearsmarried religiousness</span>
<span style="color:#75715e">#&gt; affairs        1.000000000  0.0952372   0.18684169   -0.14450135</span>
<span style="color:#75715e">#&gt; age            0.095237204  1.0000000   0.77754585    0.19377693</span>
<span style="color:#75715e">#&gt; yearsmarried   0.186841686  0.7775458   1.00000000    0.21826067</span>
<span style="color:#75715e">#&gt; religiousness -0.144501345  0.1937769   0.21826067    1.00000000</span>
<span style="color:#75715e">#&gt; education     -0.002437441  0.1345960   0.04000272   -0.04257108</span>
<span style="color:#75715e">#&gt; occupation     0.049611758  0.1664125   0.04459201   -0.03972232</span>
<span style="color:#75715e">#&gt; rating        -0.279512403 -0.1989999  -0.24311883    0.02429578</span>
<span style="color:#75715e">#&gt;                  education  occupation      rating</span>
<span style="color:#75715e">#&gt; affairs       -0.002437441  0.04961176 -0.27951240</span>
<span style="color:#75715e">#&gt; age            0.134596015  0.16641254 -0.19899990</span>
<span style="color:#75715e">#&gt; yearsmarried   0.040002716  0.04459201 -0.24311883</span>
<span style="color:#75715e">#&gt; religiousness -0.042571079 -0.03972232  0.02429578</span>
<span style="color:#75715e">#&gt; education      1.000000000  0.53360524  0.10930347</span>
<span style="color:#75715e">#&gt; occupation     0.533605242  1.00000000  0.01742227</span>
<span style="color:#75715e">#&gt; rating         0.109303473  0.01742227  1.00000000</span>

<span style="color:#a6e22e">library</span>(corrplot)
<span style="color:#a6e22e">corrplot</span>(cor_tab)
</code></pre></div><p><!-- raw HTML omitted --></p>
<h1 id="wie-groß-ist-der-einfluss-das-einflussgewicht-der-ehejahre-bzw-ehezufriedenheit-auf-die-anzahl-der-affären">Wie groß ist der Einfluss (das Einflussgewicht) der Ehejahre bzw. Ehezufriedenheit auf die Anzahl der Affären?</h1>
<p>Dazu sagen wir R: &ldquo;Hey R, rechne mal ein lineares Modell&rdquo;, also eine normale
(lineare) Regression. Dazu können wir entweder das entsprechende Menü im R-Commander auswählen, oder folgende R-Befehle ausführen:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">lm1 <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">lm</span>(affairs <span style="color:#f92672">~</span> yearsmarried, data <span style="color:#f92672">=</span> Affair)
<span style="color:#a6e22e">summary</span>(lm1)  <span style="color:#75715e"># Ergebnisse der Regression zeigen</span>
<span style="color:#75715e">#&gt; </span>
<span style="color:#75715e">#&gt; Call:</span>
<span style="color:#75715e">#&gt; lm(formula = affairs ~ yearsmarried, data = Affair)</span>
<span style="color:#75715e">#&gt; </span>
<span style="color:#75715e">#&gt; Residuals:</span>
<span style="color:#75715e">#&gt;     Min      1Q  Median      3Q     Max </span>
<span style="color:#75715e">#&gt; -2.2106 -1.6575 -0.9937 -0.5974 11.3658 </span>
<span style="color:#75715e">#&gt; </span>
<span style="color:#75715e">#&gt; Coefficients:</span>
<span style="color:#75715e">#&gt;              Estimate Std. Error t value Pr(&gt;|t|)    </span>
<span style="color:#75715e">#&gt; (Intercept)   0.55122    0.23511   2.345   0.0194 *  </span>
<span style="color:#75715e">#&gt; yearsmarried  0.11063    0.02377   4.655    4e-06 ***</span>
<span style="color:#75715e">#&gt; ---</span>
<span style="color:#75715e">#&gt; Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</span>
<span style="color:#75715e">#&gt; </span>
<span style="color:#75715e">#&gt; Residual standard error: 3.243 on 599 degrees of freedom</span>
<span style="color:#75715e">#&gt; Multiple R-squared:  0.03491,	Adjusted R-squared:  0.0333 </span>
<span style="color:#75715e">#&gt; F-statistic: 21.67 on 1 and 599 DF,  p-value: 3.996e-06</span>
lm2 <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">lm</span>(affairs <span style="color:#f92672">~</span> rating, data <span style="color:#f92672">=</span> Affair)
<span style="color:#a6e22e">summary</span>(lm2)
<span style="color:#75715e">#&gt; </span>
<span style="color:#75715e">#&gt; Call:</span>
<span style="color:#75715e">#&gt; lm(formula = affairs ~ rating, data = Affair)</span>
<span style="color:#75715e">#&gt; </span>
<span style="color:#75715e">#&gt; Residuals:</span>
<span style="color:#75715e">#&gt;     Min      1Q  Median      3Q     Max </span>
<span style="color:#75715e">#&gt; -3.9063 -1.3989 -0.5631 -0.5631 11.4369 </span>
<span style="color:#75715e">#&gt; </span>
<span style="color:#75715e">#&gt; Coefficients:</span>
<span style="color:#75715e">#&gt;             Estimate Std. Error t value Pr(&gt;|t|)    </span>
<span style="color:#75715e">#&gt; (Intercept)   4.7421     0.4790   9.900   &lt;2e-16 ***</span>
<span style="color:#75715e">#&gt; rating       -0.8358     0.1173  -7.125    3e-12 ***</span>
<span style="color:#75715e">#&gt; ---</span>
<span style="color:#75715e">#&gt; Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</span>
<span style="color:#75715e">#&gt; </span>
<span style="color:#75715e">#&gt; Residual standard error: 3.17 on 599 degrees of freedom</span>
<span style="color:#75715e">#&gt; Multiple R-squared:  0.07813,	Adjusted R-squared:  0.07659 </span>
<span style="color:#75715e">#&gt; F-statistic: 50.76 on 1 and 599 DF,  p-value: 3.002e-12</span>
</code></pre></div><p>Also: <code>yearsmarried</code> und <code>rating</code> sind beide statistisch signifikante Prädiktoren für die Häufigkeit von Affären. Das adjustierte $$R^2$$ ist allerdings in beiden Fällen nicht so groß.</p>
<h1 id="um-wie-viel-erhöht-sich-die-erklärte-varianz-r-quadrat-von-affärenhäufigkeit-wenn-man-den-prädiktor-ehezufriedenheit-zum-prädiktor-ehejahre-hinzufügt-wie-verändern-sich-die-einflussgewichte-b">Um wie viel erhöht sich die erklärte Varianz (R-Quadrat) von Affärenhäufigkeit wenn man den Prädiktor Ehezufriedenheit zum Prädiktor Ehejahre hinzufügt? (Wie) verändern sich die Einflussgewichte (b)?</h1>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">lm3 <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">lm</span>(affairs <span style="color:#f92672">~</span> rating <span style="color:#f92672">+</span> yearsmarried, data <span style="color:#f92672">=</span> Affair)
lm4 <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">lm</span>(affairs <span style="color:#f92672">~</span> yearsmarried <span style="color:#f92672">+</span> rating, data <span style="color:#f92672">=</span> Affair)
<span style="color:#a6e22e">summary</span>(lm3)
<span style="color:#75715e">#&gt; </span>
<span style="color:#75715e">#&gt; Call:</span>
<span style="color:#75715e">#&gt; lm(formula = affairs ~ rating + yearsmarried, data = Affair)</span>
<span style="color:#75715e">#&gt; </span>
<span style="color:#75715e">#&gt; Residuals:</span>
<span style="color:#75715e">#&gt;     Min      1Q  Median      3Q     Max </span>
<span style="color:#75715e">#&gt; -4.1474 -1.6495 -0.8365 -0.1616 11.8945 </span>
<span style="color:#75715e">#&gt; </span>
<span style="color:#75715e">#&gt; Coefficients:</span>
<span style="color:#75715e">#&gt;              Estimate Std. Error t value Pr(&gt;|t|)    </span>
<span style="color:#75715e">#&gt; (Intercept)   3.76913    0.56715   6.646 6.80e-11 ***</span>
<span style="color:#75715e">#&gt; rating       -0.74395    0.12005  -6.197 1.07e-09 ***</span>
<span style="color:#75715e">#&gt; yearsmarried  0.07481    0.02377   3.147  0.00173 ** </span>
<span style="color:#75715e">#&gt; ---</span>
<span style="color:#75715e">#&gt; Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</span>
<span style="color:#75715e">#&gt; </span>
<span style="color:#75715e">#&gt; Residual standard error: 3.147 on 598 degrees of freedom</span>
<span style="color:#75715e">#&gt; Multiple R-squared:  0.09315,	Adjusted R-squared:  0.09012 </span>
<span style="color:#75715e">#&gt; F-statistic: 30.71 on 2 and 598 DF,  p-value: 2.01e-13</span>
<span style="color:#a6e22e">summary</span>(lm4)
<span style="color:#75715e">#&gt; </span>
<span style="color:#75715e">#&gt; Call:</span>
<span style="color:#75715e">#&gt; lm(formula = affairs ~ yearsmarried + rating, data = Affair)</span>
<span style="color:#75715e">#&gt; </span>
<span style="color:#75715e">#&gt; Residuals:</span>
<span style="color:#75715e">#&gt;     Min      1Q  Median      3Q     Max </span>
<span style="color:#75715e">#&gt; -4.1474 -1.6495 -0.8365 -0.1616 11.8945 </span>
<span style="color:#75715e">#&gt; </span>
<span style="color:#75715e">#&gt; Coefficients:</span>
<span style="color:#75715e">#&gt;              Estimate Std. Error t value Pr(&gt;|t|)    </span>
<span style="color:#75715e">#&gt; (Intercept)   3.76913    0.56715   6.646 6.80e-11 ***</span>
<span style="color:#75715e">#&gt; yearsmarried  0.07481    0.02377   3.147  0.00173 ** </span>
<span style="color:#75715e">#&gt; rating       -0.74395    0.12005  -6.197 1.07e-09 ***</span>
<span style="color:#75715e">#&gt; ---</span>
<span style="color:#75715e">#&gt; Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</span>
<span style="color:#75715e">#&gt; </span>
<span style="color:#75715e">#&gt; Residual standard error: 3.147 on 598 degrees of freedom</span>
<span style="color:#75715e">#&gt; Multiple R-squared:  0.09315,	Adjusted R-squared:  0.09012 </span>
<span style="color:#75715e">#&gt; F-statistic: 30.71 on 2 and 598 DF,  p-value: 2.01e-13</span>
</code></pre></div><p>Ok. Macht eigentlich die Reihenfolge der Prädiktoren in der Regression einen
Unterschied? Der Vergleich von Modell 3 vs. Modell 4 beantwortet diese Frage.</p>
<p>Wir sehen, dass beim 1. Regressionsmodell das R^2 0.03 war; beim 2. Modell 0.08 und beim 3. Modell liegt R^2 bei 0.09. Die Differenz zwischen Modell 1 und 3 liegt bei (gerundet) 0.06; wenig.</p>
<h1 id="welche-prädiktoren-würden-sie-noch-in-die-regressionsanalyse-aufnehmen">Welche Prädiktoren würden Sie noch in die Regressionsanalyse aufnehmen?</h1>
<p>Hm, diese Frage klingt nicht so, als ob der Dozent die Antwort selber wüsste&hellip; Naja, welche Variablen gibt es denn alles:</p>
<pre><code>#&gt; [1] &quot;affairs&quot;       &quot;gender&quot;        &quot;age&quot;           &quot;yearsmarried&quot; 
#&gt; [5] &quot;children&quot;      &quot;religiousness&quot; &quot;education&quot;     &quot;occupation&quot;   
#&gt; [9] &quot;rating&quot;
</code></pre><p>Z.B. wäre doch interessant, ob Ehen mit Kinder mehr oder weniger Seitensprüngen aufweisen. Und ob die &ldquo;Kinderfrage&rdquo; die anderen Zusammenhänge/Einflussgewichte in der Regression verändert. Probieren wir es auch. Wir können wiederum im R-Comamnder ein Regressionsmodell anfordern oder es mit der Syntax probieren:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">lm5 <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">lm</span>(affairs<span style="color:#f92672">~</span> rating <span style="color:#f92672">+</span> yearsmarried <span style="color:#f92672">+</span> children, data <span style="color:#f92672">=</span> Affair)
<span style="color:#a6e22e">summary</span>(lm5)
<span style="color:#75715e">#&gt; </span>
<span style="color:#75715e">#&gt; Call:</span>
<span style="color:#75715e">#&gt; lm(formula = affairs ~ rating + yearsmarried + children, data = Affair)</span>
<span style="color:#75715e">#&gt; </span>
<span style="color:#75715e">#&gt; Residuals:</span>
<span style="color:#75715e">#&gt;     Min      1Q  Median      3Q     Max </span>
<span style="color:#75715e">#&gt; -4.3537 -1.7316 -0.8927 -0.1719 12.0162 </span>
<span style="color:#75715e">#&gt; </span>
<span style="color:#75715e">#&gt; Coefficients:</span>
<span style="color:#75715e">#&gt;              Estimate Std. Error t value Pr(&gt;|t|)    </span>
<span style="color:#75715e">#&gt; (Intercept)   3.85245    0.58808   6.551 1.24e-10 ***</span>
<span style="color:#75715e">#&gt; rating       -0.74861    0.12043  -6.216 9.57e-10 ***</span>
<span style="color:#75715e">#&gt; yearsmarried  0.08332    0.02853   2.921  0.00362 ** </span>
<span style="color:#75715e">#&gt; childrenyes  -0.18805    0.34817  -0.540  0.58932    </span>
<span style="color:#75715e">#&gt; ---</span>
<span style="color:#75715e">#&gt; Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</span>
<span style="color:#75715e">#&gt; </span>
<span style="color:#75715e">#&gt; Residual standard error: 3.148 on 597 degrees of freedom</span>
<span style="color:#75715e">#&gt; Multiple R-squared:  0.09359,	Adjusted R-squared:  0.08904 </span>
<span style="color:#75715e">#&gt; F-statistic: 20.55 on 3 and 597 DF,  p-value: 1.107e-12</span>
r2_lm5 <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">summary</span>(lm5)<span style="color:#f92672">$</span>r.squared
</code></pre></div><p>Das Regressionsgewicht von <code>childrenyes</code> ist negativ. Das bedeutet, dass Ehen mit Kindern weniger Affären verbuchen (aber geringe Zufriedenheit, wie wir oben gesehen haben! Hrks!). Allerdings ist der p-Wert nich signifikant, was wir als Zeichen der Unbedeutsamkeit dieses Prädiktors verstehen können. $$R^2$$ lungert immer noch bei mickrigen 0.09 herum. Wir haben bisher kaum verstanden, wie es zu Affären kommt. Oder unsere Daten bergen diese Informationen einfach nicht.</p>
<p>Wir könnten auch einfach mal Prädiktoren, die wir haben, ins Feld schicken. Mal sehen, was dann passiert:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">lm6 <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">lm</span>(affairs <span style="color:#f92672">~</span> ., data <span style="color:#f92672">=</span> Affair)
<span style="color:#a6e22e">summary</span>(lm6)
<span style="color:#75715e">#&gt; </span>
<span style="color:#75715e">#&gt; Call:</span>
<span style="color:#75715e">#&gt; lm(formula = affairs ~ ., data = Affair)</span>
<span style="color:#75715e">#&gt; </span>
<span style="color:#75715e">#&gt; Residuals:</span>
<span style="color:#75715e">#&gt;     Min      1Q  Median      3Q     Max </span>
<span style="color:#75715e">#&gt; -5.0503 -1.7226 -0.7947  0.2101 12.7036 </span>
<span style="color:#75715e">#&gt; </span>
<span style="color:#75715e">#&gt; Coefficients:</span>
<span style="color:#75715e">#&gt;               Estimate Std. Error t value Pr(&gt;|t|)    </span>
<span style="color:#75715e">#&gt; (Intercept)    5.87201    1.13750   5.162 3.34e-07 ***</span>
<span style="color:#75715e">#&gt; gendermale     0.05409    0.30049   0.180   0.8572    </span>
<span style="color:#75715e">#&gt; age           -0.05098    0.02262  -2.254   0.0246 *  </span>
<span style="color:#75715e">#&gt; yearsmarried   0.16947    0.04122   4.111 4.50e-05 ***</span>
<span style="color:#75715e">#&gt; childrenyes   -0.14262    0.35020  -0.407   0.6840    </span>
<span style="color:#75715e">#&gt; religiousness -0.47761    0.11173  -4.275 2.23e-05 ***</span>
<span style="color:#75715e">#&gt; education     -0.01375    0.06414  -0.214   0.8303    </span>
<span style="color:#75715e">#&gt; occupation     0.10492    0.08888   1.180   0.2383    </span>
<span style="color:#75715e">#&gt; rating        -0.71188    0.12001  -5.932 5.09e-09 ***</span>
<span style="color:#75715e">#&gt; ---</span>
<span style="color:#75715e">#&gt; Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</span>
<span style="color:#75715e">#&gt; </span>
<span style="color:#75715e">#&gt; Residual standard error: 3.095 on 592 degrees of freedom</span>
<span style="color:#75715e">#&gt; Multiple R-squared:  0.1317,	Adjusted R-squared:   0.12 </span>
<span style="color:#75715e">#&gt; F-statistic: 11.23 on 8 and 592 DF,  p-value: 7.472e-15</span>
r2_lm6 <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">round</span>(<span style="color:#a6e22e">summary</span>(lm6)<span style="color:#f92672">$</span>r.squared, <span style="color:#ae81ff">2</span>)
</code></pre></div><p>Der &ldquo;.&rdquo; im Befehl <code>affairs ~ .</code> oben soll sagen: nimm &ldquo;alle Variablen, die noch in der Datenmatrix übrig sind&rdquo;.</p>
<p>Insgesamt bleibt die erklärte Varian in sehr bescheidenem Rahmen: 0.13. Das zeigt uns, dass es immer noch nur schlecht verstanden ist &ndash; im Rahmen dieser Analyse &ndash; welche Faktoren die Affärenhäufigkeit erklärt.</p>
<h1 id="unterscheiden-sich-die-geschlechter-statistisch-signifikant-wie-groß-ist-der-unterschied-sollte-hierlieber-das-d-maß-oder-rohwerte-als-effektmaß--angegeben-werden">Unterscheiden sich die Geschlechter statistisch signifikant? Wie groß ist der Unterschied? Sollte hierlieber das d-Maß oder Rohwerte als Effektmaß  angegeben werden?</h1>
<p>Hier bietet sich ein t-Test für unabhängige Gruppen an. Die Frage lässt auf eine ungerichtete Hypothese schließen ($$\alpha$$ sei .05). Mit dem entsprechenden Menüpunkt im R-Commander oder mit folgender Syntax lässt sich diese Analyse angehen:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">t1 <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">t.test</span>(affairs <span style="color:#f92672">~</span> gender, data <span style="color:#f92672">=</span> Affair)
t1
<span style="color:#75715e">#&gt; </span>
<span style="color:#75715e">#&gt; 	Welch Two Sample t-test</span>
<span style="color:#75715e">#&gt; </span>
<span style="color:#75715e">#&gt; data:  affairs by gender</span>
<span style="color:#75715e">#&gt; t = -0.28733, df = 594.01, p-value = 0.774</span>
<span style="color:#75715e">#&gt; alternative hypothesis: true difference in means is not equal to 0</span>
<span style="color:#75715e">#&gt; 95 percent confidence interval:</span>
<span style="color:#75715e">#&gt;  -0.6068861  0.4519744</span>
<span style="color:#75715e">#&gt; sample estimates:</span>
<span style="color:#75715e">#&gt; mean in group female   mean in group male </span>
<span style="color:#75715e">#&gt;             1.419048             1.496503</span>
</code></pre></div><p>Der p-Wert ist mit 0.7739606 &gt; $$\alpha$$. Daher wird die $$H_0$$ beibehalten. Auf Basis der Stichprobendaten entscheiden wir uns für die $$H_0$$. Entsprechend umschließt das 95%-KI die Null.</p>
<p>Da die Differenz nicht signifikant ist, kann argumentiert werden, dass wir <code>d</code> auf 0 schätzen müssen. Man kann sich den d-Wert auch z.B. von {MBESS} schätzen lassen.</p>
<p>Dafür brauchen wir die Anzahl an Männer und Frauen: 315, 286.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#a6e22e">library</span>(MBESS)
<span style="color:#a6e22e">ci.smd</span>(ncp <span style="color:#f92672">=</span> t1<span style="color:#f92672">$</span>statistic,
    n.1 <span style="color:#f92672">=</span> <span style="color:#ae81ff">315</span>,
    n.2 <span style="color:#f92672">=</span> <span style="color:#ae81ff">286</span>)
<span style="color:#75715e">#&gt; $Lower.Conf.Limit.smd</span>
<span style="color:#75715e">#&gt; [1] -0.1835475</span>
<span style="color:#75715e">#&gt; </span>
<span style="color:#75715e">#&gt; $smd</span>
<span style="color:#75715e">#&gt;           t </span>
<span style="color:#75715e">#&gt; -0.02346813 </span>
<span style="color:#75715e">#&gt; </span>
<span style="color:#75715e">#&gt; $Upper.Conf.Limit.smd</span>
<span style="color:#75715e">#&gt; [1] 0.1366308</span>
</code></pre></div><p>Das Konfidenzintervall ist zwar relativ klein (die Schätzung also aufgrund der recht großen Stichprobe relativ präzise), aber der Schätzwert für d <code>smd</code> liegt sehr nahe bei Null. Das stärkt unsere Entscheidung, von einer Gleichheit der Populationen (Männer vs. Frauen) auszugehen.</p>
<h1 id="rechnen-sie-die-regressionsanalyse-getrennt-für-kinderlose-ehe-und-ehen-mit-kindern">Rechnen Sie die Regressionsanalyse getrennt für kinderlose Ehe und Ehen mit Kindern!</h1>
<p>Hier geht es im ersten Schritt darum, die entsprechenden Teil-Mengen der Datenmatrix zu erstellen. Das kann man natürlich mit Excel o.ä. tun. Alternativ könnte man es in R z.B. so machen:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">Affair2 <span style="color:#f92672">&lt;-</span> Affair[Affair<span style="color:#f92672">$</span>children <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;yes&#34;</span>, ]
lm7 <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">lm</span>(affairs<span style="color:#f92672">~</span> rating, data <span style="color:#f92672">=</span> Affair2)
<span style="color:#a6e22e">summary</span>(lm7)
<span style="color:#75715e">#&gt; </span>
<span style="color:#75715e">#&gt; Call:</span>
<span style="color:#75715e">#&gt; lm(formula = affairs ~ rating, data = Affair2)</span>
<span style="color:#75715e">#&gt; </span>
<span style="color:#75715e">#&gt; Residuals:</span>
<span style="color:#75715e">#&gt;     Min      1Q  Median      3Q     Max </span>
<span style="color:#75715e">#&gt; -4.1903 -1.4877 -0.5869 -0.4877 11.4131 </span>
<span style="color:#75715e">#&gt; </span>
<span style="color:#75715e">#&gt; Coefficients:</span>
<span style="color:#75715e">#&gt;             Estimate Std. Error t value Pr(&gt;|t|)    </span>
<span style="color:#75715e">#&gt; (Intercept)   5.0912     0.5701   8.930  &lt; 2e-16 ***</span>
<span style="color:#75715e">#&gt; rating       -0.9009     0.1441  -6.252 9.84e-10 ***</span>
<span style="color:#75715e">#&gt; ---</span>
<span style="color:#75715e">#&gt; Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</span>
<span style="color:#75715e">#&gt; </span>
<span style="color:#75715e">#&gt; Residual standard error: 3.336 on 428 degrees of freedom</span>
<span style="color:#75715e">#&gt; Multiple R-squared:  0.08367,	Adjusted R-squared:  0.08153 </span>
<span style="color:#75715e">#&gt; F-statistic: 39.08 on 1 and 428 DF,  p-value: 9.845e-10</span>

Affair3 <span style="color:#f92672">&lt;-</span> Affair[Affair<span style="color:#f92672">$</span>children <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;no&#34;</span>, ]
lm8 <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">lm</span>(affairs<span style="color:#f92672">~</span> rating, data <span style="color:#f92672">=</span> Affair3)
<span style="color:#a6e22e">summary</span>(lm8)
<span style="color:#75715e">#&gt; </span>
<span style="color:#75715e">#&gt; Call:</span>
<span style="color:#75715e">#&gt; lm(formula = affairs ~ rating, data = Affair3)</span>
<span style="color:#75715e">#&gt; </span>
<span style="color:#75715e">#&gt; Residuals:</span>
<span style="color:#75715e">#&gt;     Min      1Q  Median      3Q     Max </span>
<span style="color:#75715e">#&gt; -2.5465 -1.0494 -0.5504 -0.5504 11.4496 </span>
<span style="color:#75715e">#&gt; </span>
<span style="color:#75715e">#&gt; Coefficients:</span>
<span style="color:#75715e">#&gt;             Estimate Std. Error t value Pr(&gt;|t|)   </span>
<span style="color:#75715e">#&gt; (Intercept)   3.0455     0.9140   3.332  0.00106 **</span>
<span style="color:#75715e">#&gt; rating       -0.4990     0.2083  -2.395  0.01771 * </span>
<span style="color:#75715e">#&gt; ---</span>
<span style="color:#75715e">#&gt; Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</span>
<span style="color:#75715e">#&gt; </span>
<span style="color:#75715e">#&gt; Residual standard error: 2.685 on 169 degrees of freedom</span>
<span style="color:#75715e">#&gt; Multiple R-squared:  0.03283,	Adjusted R-squared:  0.02711 </span>
<span style="color:#75715e">#&gt; F-statistic: 5.737 on 1 and 169 DF,  p-value: 0.01771</span>
</code></pre></div><p>Übrigens, einfacher geht das &ldquo;Subsetten&rdquo; so:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#a6e22e">library</span>(dplyr)
Affair4 <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">filter</span>(Affair, children <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;yes&#34;</span>)
<span style="color:#a6e22e">head</span>(Affair4)
<span style="color:#75715e">#&gt;   affairs gender age yearsmarried children religiousness education</span>
<span style="color:#75715e">#&gt; 1       0 female  32           15      yes             1        12</span>
<span style="color:#75715e">#&gt; 2       0   male  57           15      yes             5        18</span>
<span style="color:#75715e">#&gt; 3       0   male  57           15      yes             2        14</span>
<span style="color:#75715e">#&gt; 4       0 female  32           15      yes             4        16</span>
<span style="color:#75715e">#&gt; 5       0   male  37           15      yes             2        20</span>
<span style="color:#75715e">#&gt; 6       0   male  27            4      yes             4        18</span>
<span style="color:#75715e">#&gt;   occupation rating</span>
<span style="color:#75715e">#&gt; 1          1      4</span>
<span style="color:#75715e">#&gt; 2          6      5</span>
<span style="color:#75715e">#&gt; 3          4      4</span>
<span style="color:#75715e">#&gt; 4          1      2</span>
<span style="color:#75715e">#&gt; 5          7      2</span>
<span style="color:#75715e">#&gt; 6          6      4</span>
</code></pre></div><h1 id="rechnen-sie-die-regression-nur-für-halodries-dh-für-menschen-mit-seitensprüngen-dafür-müssen-sie-alle-menschen-ohne-affären-aus-den-datensatz-entfernen">Rechnen Sie die Regression nur für &ldquo;Halodries&rdquo;; d.h. für Menschen mit Seitensprüngen. Dafür müssen Sie alle Menschen ohne Affären aus den Datensatz entfernen.</h1>
<p>Also, rechnen wir nochmal die Standardregression (<code>lm1</code>). Probieren wir den Befehl <code>filter</code> dazu nochmal aus:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">Affair5 <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">filter</span>(Affair, affairs <span style="color:#f92672">!=</span> <span style="color:#ae81ff">0</span>)
lm9 <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">lm</span>(affairs <span style="color:#f92672">~</span> rating, data <span style="color:#f92672">=</span> Affair5)
<span style="color:#a6e22e">summary</span>(lm9)
<span style="color:#75715e">#&gt; </span>
<span style="color:#75715e">#&gt; Call:</span>
<span style="color:#75715e">#&gt; lm(formula = affairs ~ rating, data = Affair5)</span>
<span style="color:#75715e">#&gt; </span>
<span style="color:#75715e">#&gt; Residuals:</span>
<span style="color:#75715e">#&gt;     Min      1Q  Median      3Q     Max </span>
<span style="color:#75715e">#&gt; -6.0605 -3.5157 -0.0605  3.6895  7.4843 </span>
<span style="color:#75715e">#&gt; </span>
<span style="color:#75715e">#&gt; Coefficients:</span>
<span style="color:#75715e">#&gt;             Estimate Std. Error t value Pr(&gt;|t|)    </span>
<span style="color:#75715e">#&gt; (Intercept)   8.7570     1.0225   8.564  1.3e-14 ***</span>
<span style="color:#75715e">#&gt; rating       -0.8483     0.2800  -3.030  0.00289 ** </span>
<span style="color:#75715e">#&gt; ---</span>
<span style="color:#75715e">#&gt; Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</span>
<span style="color:#75715e">#&gt; </span>
<span style="color:#75715e">#&gt; Residual standard error: 4.144 on 148 degrees of freedom</span>
<span style="color:#75715e">#&gt; Multiple R-squared:  0.05841,	Adjusted R-squared:  0.05205 </span>
<span style="color:#75715e">#&gt; F-statistic: 9.181 on 1 and 148 DF,  p-value: 0.002887</span>
</code></pre></div><h1 id="berechnen-sie-für-eine-logistische-regression-mit-affäre-ja-vs-nein-als-kriterium-wie-stark-der-einfluss-von-geschlecht-kinderstatus-ehezufriedenheit-und-ehedauer-ist">Berechnen Sie für eine logistische Regression mit &ldquo;Affäre ja vs. nein&rdquo; als Kriterium, wie stark der Einfluss von Geschlecht, Kinderstatus, Ehezufriedenheit und Ehedauer ist!</h1>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">
Affair <span style="color:#f92672">%&gt;%</span> 
  <span style="color:#a6e22e">mutate</span>(affairs_dichotom <span style="color:#f92672">=</span> <span style="color:#a6e22e">if_else</span>(affairs <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">1</span>)) <span style="color:#f92672">%&gt;%</span> 
  <span style="color:#a6e22e">glm</span>(affairs_dichotom <span style="color:#f92672">~</span>gender <span style="color:#f92672">+</span> children <span style="color:#f92672">+</span> rating <span style="color:#f92672">+</span> yearsmarried, data <span style="color:#f92672">=</span> .) <span style="color:#f92672">-&gt;</span> lm10

<span style="color:#a6e22e">summary</span>(lm10)
<span style="color:#75715e">#&gt; </span>
<span style="color:#75715e">#&gt; Call:</span>
<span style="color:#75715e">#&gt; glm(formula = affairs_dichotom ~ gender + children + rating + </span>
<span style="color:#75715e">#&gt;     yearsmarried, data = .)</span>
<span style="color:#75715e">#&gt; </span>
<span style="color:#75715e">#&gt; Deviance Residuals: </span>
<span style="color:#75715e">#&gt;      Min        1Q    Median        3Q       Max  </span>
<span style="color:#75715e">#&gt; -0.57662  -0.26766  -0.17186  -0.06459   0.93295  </span>
<span style="color:#75715e">#&gt; </span>
<span style="color:#75715e">#&gt; Coefficients:</span>
<span style="color:#75715e">#&gt;               Estimate Std. Error t value Pr(&gt;|t|)    </span>
<span style="color:#75715e">#&gt; (Intercept)   0.515778   0.079344   6.501 1.69e-10 ***</span>
<span style="color:#75715e">#&gt; gendermale    0.037945   0.034218   1.109    0.268    </span>
<span style="color:#75715e">#&gt; childrenyes   0.054032   0.046307   1.167    0.244    </span>
<span style="color:#75715e">#&gt; rating       -0.090337   0.015985  -5.651 2.47e-08 ***</span>
<span style="color:#75715e">#&gt; yearsmarried  0.003947   0.003787   1.042    0.298    </span>
<span style="color:#75715e">#&gt; ---</span>
<span style="color:#75715e">#&gt; Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</span>
<span style="color:#75715e">#&gt; </span>
<span style="color:#75715e">#&gt; (Dispersion parameter for gaussian family taken to be 0.1746456)</span>
<span style="color:#75715e">#&gt; </span>
<span style="color:#75715e">#&gt;     Null deviance: 112.56  on 600  degrees of freedom</span>
<span style="color:#75715e">#&gt; Residual deviance: 104.09  on 596  degrees of freedom</span>
<span style="color:#75715e">#&gt; AIC: 663.8</span>
<span style="color:#75715e">#&gt; </span>
<span style="color:#75715e">#&gt; Number of Fisher Scoring iterations: 2</span>
</code></pre></div><p>Wenn <code>if_else</code> unbekannt ist, lohnt sich ein Blick in die Hilfe mit <code>?if_else</code> (<code>dplyr</code> muss vorher geladen sein).</p>
<p>Aha, signifikant ist die Ehezufriedenheit: Je größer <code>rating</code> desto geringer die Wahrscheinlickeit für <code>affairs_dichotom</code>. Macht Sinn! Je zufriedener, desto geringer Seitensprung-Gefahr&hellip;</p>
<p>Übrigens, die Funktion <code>lm</code> und <code>glm</code> spucken leider keine brave Tabelle in Normalform aus. Aber man leicht eine schöne Tabelle (data.frame) bekommen mit dem Befehl <code>tidy</code> aus <code>broom</code>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#a6e22e">library</span>(broom)
<span style="color:#a6e22e">tidy</span>(lm10) 
<span style="color:#75715e">#&gt;           term     estimate   std.error statistic      p.value</span>
<span style="color:#75715e">#&gt; 1  (Intercept)  0.515777667 0.079343849  6.500537 1.693109e-10</span>
<span style="color:#75715e">#&gt; 2   gendermale  0.037944509 0.034217912  1.108908 2.679172e-01</span>
<span style="color:#75715e">#&gt; 3  childrenyes  0.054032156 0.046307172  1.166820 2.437495e-01</span>
<span style="color:#75715e">#&gt; 4       rating -0.090336904 0.015984908 -5.651387 2.468646e-08</span>
<span style="color:#75715e">#&gt; 5 yearsmarried  0.003946811 0.003786673  1.042290 2.976998e-01</span>
</code></pre></div><p>Und Tabellen (d.h. brave Dataframes) kann man sich schön ausgeben lassen z.B. mit dem Befehl <code>knitr::kable</code>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#a6e22e">library</span>(knitr)
<span style="color:#a6e22e">tidy</span>(lm10) <span style="color:#f92672">%&gt;%</span> kable
</code></pre></div><table>
<thead>
<tr>
<th align="left">term</th>
<th align="right">estimate</th>
<th align="right">std.error</th>
<th align="right">statistic</th>
<th align="right">p.value</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">(Intercept)</td>
<td align="right">0.5157777</td>
<td align="right">0.0793438</td>
<td align="right">6.500538</td>
<td align="right">0.0000000</td>
</tr>
<tr>
<td align="left">gendermale</td>
<td align="right">0.0379445</td>
<td align="right">0.0342179</td>
<td align="right">1.108908</td>
<td align="right">0.2679172</td>
</tr>
<tr>
<td align="left">childrenyes</td>
<td align="right">0.0540322</td>
<td align="right">0.0463072</td>
<td align="right">1.166821</td>
<td align="right">0.2437495</td>
</tr>
<tr>
<td align="left">rating</td>
<td align="right">-0.0903369</td>
<td align="right">0.0159849</td>
<td align="right">-5.651387</td>
<td align="right">0.0000000</td>
</tr>
<tr>
<td align="left">yearsmarried</td>
<td align="right">0.0039468</td>
<td align="right">0.0037867</td>
<td align="right">1.042290</td>
<td align="right">0.2976998</td>
</tr>
</tbody>
</table>
<h1 id="visualisieren-wir-mal-was">Visualisieren wir mal was!</h1>
<p>Ok, wie wäre es damit:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">Affair <span style="color:#f92672">%&gt;%</span> 
   <span style="color:#a6e22e">select</span>(affairs, gender, children, rating) <span style="color:#f92672">%&gt;%</span>
  <span style="color:#a6e22e">ggplot</span>(<span style="color:#a6e22e">aes</span>(x <span style="color:#f92672">=</span> affairs, y <span style="color:#f92672">=</span> rating)) <span style="color:#f92672">+</span> <span style="color:#a6e22e">geom_jitter</span>(<span style="color:#a6e22e">aes</span>(color <span style="color:#f92672">=</span> gender, shape <span style="color:#f92672">=</span> children)) 
</code></pre></div><p><!-- raw HTML omitted --></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">Affair <span style="color:#f92672">%&gt;%</span> 
   <span style="color:#a6e22e">mutate</span>(rating_dichotom <span style="color:#f92672">=</span> <span style="color:#a6e22e">ntile</span>(rating, <span style="color:#ae81ff">2</span>)) <span style="color:#f92672">%&gt;%</span> 
   <span style="color:#a6e22e">ggplot</span>(<span style="color:#a6e22e">aes</span>(x <span style="color:#f92672">=</span> yearsmarried, y <span style="color:#f92672">=</span> affairs)) <span style="color:#f92672">+</span> <span style="color:#a6e22e">geom_jitter</span>(<span style="color:#a6e22e">aes</span>(color <span style="color:#f92672">=</span> gender)) <span style="color:#f92672">+</span>
  <span style="color:#a6e22e">geom_smooth</span>()
</code></pre></div><p><!-- raw HTML omitted --></p>
<p>Puh. Geschafft!</p>
<h1 id="versionshinweise-und-sessioninfo">Versionshinweise und SessionInfo</h1>
<ul>
<li>Datum erstellt: 2017-01-06</li>
<li>R Version: 3.3.2</li>
<li><code>dplyr</code> Version: 0.5.0</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#a6e22e">sessionInfo</span>()
<span style="color:#75715e">#&gt; R version 3.3.2 (2016-10-31)</span>
<span style="color:#75715e">#&gt; Platform: x86_64-apple-darwin13.4.0 (64-bit)</span>
<span style="color:#75715e">#&gt; Running under: macOS Sierra 10.12.2</span>
<span style="color:#75715e">#&gt; </span>
<span style="color:#75715e">#&gt; locale:</span>
<span style="color:#75715e">#&gt; [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8</span>
<span style="color:#75715e">#&gt; </span>
<span style="color:#75715e">#&gt; attached base packages:</span>
<span style="color:#75715e">#&gt; [1] stats     graphics  grDevices utils     datasets  methods   base     </span>
<span style="color:#75715e">#&gt; </span>
<span style="color:#75715e">#&gt; other attached packages:</span>
<span style="color:#75715e">#&gt; [1] broom_0.4.1   MBESS_4.1.0   corrplot_0.77 ggplot2_2.2.1 psych_1.6.9  </span>
<span style="color:#75715e">#&gt; [6] knitr_1.15.1  dplyr_0.5.0  </span>
<span style="color:#75715e">#&gt; </span>
<span style="color:#75715e">#&gt; loaded via a namespace (and not attached):</span>
<span style="color:#75715e">#&gt;  [1] Rcpp_0.12.8         magrittr_1.5        munsell_0.4.3      </span>
<span style="color:#75715e">#&gt;  [4] mnormt_1.5-5        lattice_0.20-34     colorspace_1.3-2   </span>
<span style="color:#75715e">#&gt;  [7] R6_2.2.0            plyr_1.8.4          stringr_1.1.0      </span>
<span style="color:#75715e">#&gt; [10] highr_0.6           tools_3.3.2         parallel_3.3.2     </span>
<span style="color:#75715e">#&gt; [13] grid_3.3.2          nlme_3.1-128        gtable_0.2.0       </span>
<span style="color:#75715e">#&gt; [16] DBI_0.5-1           htmltools_0.3.5     yaml_2.1.14        </span>
<span style="color:#75715e">#&gt; [19] lazyeval_0.2.0.9000 assertthat_0.1      rprojroot_1.1      </span>
<span style="color:#75715e">#&gt; [22] digest_0.6.11       tibble_1.2          tidyr_0.6.0        </span>
<span style="color:#75715e">#&gt; [25] reshape2_1.4.2      codetools_0.2-15    rsconnect_0.7      </span>
<span style="color:#75715e">#&gt; [28] evaluate_0.10       rmarkdown_1.3       labeling_0.3       </span>
<span style="color:#75715e">#&gt; [31] stringi_1.1.2       scales_0.4.1        backports_1.0.4    </span>
<span style="color:#75715e">#&gt; [34] foreign_0.8-67</span>
</code></pre></div>
    </div>
  </article>

  
<section id="comments">
  <div id="disqus_thread"></div>
  <script>
  var disqus_config = function () {
  
  };
  (function() {
    var inIFrame = function() {
      var iframe = true;
      try { iframe = window.self !== window.top; } catch (e) {}
      return iframe;
    };
    if (inIFrame()) return;
    var d = document, s = d.createElement('script');
    s.src = '//https-data-se-netlify-com.disqus.com/embed.js'; s.async = true;
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
  })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>



</main>

      <footer class="footer">
        <ul class="footer-links">
          <li>
            <a href="/index.xml" type="application/rss+xml" target="_blank">RSS feed</a>
          </li>
          <li>
            <a href="https://gohugo.io/" class="footer-links-kudos">Made with <img src="/images/hugo-logo.png" width="22" height="22"></a>
          </li>
        </ul>
      </footer>

    </div>
    



<script src="//cdn.bootcss.com/highlight.js/9.11.0/highlight.min.js"></script>



<script src="//cdn.bootcss.com/highlight.js/9.11.0/languages/r.min.js"></script>
<script src="//cdn.bootcss.com/highlight.js/9.11.0/languages/yaml.min.js"></script>
<script>hljs.configure({languages: []}); hljs.initHighlightingOnLoad();</script>



    
<script src="/js/math-code.js"></script>
<script async src="//cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>


    
  </body>
</html>

