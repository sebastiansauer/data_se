<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

  <title>Preparing survey results data</title>
  <meta property="og:title" content="Preparing survey results data" />
  <meta name="twitter:title" content="Preparing survey results data" />
  <meta name="description" content="Analyzing survey results is a frequent endeavor (for some including me). Let&rsquo;s not think about arguments whether and when surveys are useful or not (for some recent criticism see Briggs&rsquo; book).
Typically, respondents circle some option ranging from &ldquo;don&rsquo;t agree at all&rdquo; to &ldquo;completely agree&rdquo; for each question (or &ldquo;item&rdquo;). Typically, four to six boxes are given where one is expected to tick one.
In this tutorial, I will discuss some typical steps to prepare the data for subsequent analyses.">
  <meta property="og:description" content="Analyzing survey results is a frequent endeavor (for some including me). Let&rsquo;s not think about arguments whether and when surveys are useful or not (for some recent criticism see Briggs&rsquo; book).
Typically, respondents circle some option ranging from &ldquo;don&rsquo;t agree at all&rdquo; to &ldquo;completely agree&rdquo; for each question (or &ldquo;item&rdquo;). Typically, four to six boxes are given where one is expected to tick one.
In this tutorial, I will discuss some typical steps to prepare the data for subsequent analyses.">
  <meta name="twitter:description" content="Analyzing survey results is a frequent endeavor (for some including me). Let&rsquo;s not think about arguments whether and when surveys are useful or not (for some recent criticism see Briggs&rsquo; â€¦">
  <meta name="author" content="Sebastiuan Sauer"/>
  <link href='/img/favicon.ico' rel='icon' type='image/x-icon'/>
  <meta property="og:image" content="/img/logo-data-se-small.png" />
  <meta name="twitter:image" content="/img/logo-data-se-small.png" />
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@sauer_sebasitan" />
  <meta name="twitter:creator" content="@sauer_sebasitan" />
  <meta property="og:url" content="/post/preparing_survey_data/" />
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="Data Se" />

  <meta name="generator" content="Hugo 0.21" />
  <link rel="canonical" href="/post/preparing_survey_data/" />
  <link rel="alternate" href="" type="application/rss+xml" title="Data Se">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.css" integrity="sha384-wITovz90syo1dJWVh32uuETPVEtGigN07tkttEqPv+uR2SE/mbQcG7ATL28aI9H0" crossorigin="anonymous">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" />
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  <link rel="stylesheet" href="/css/main.css" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" />
  <link rel="stylesheet" href="/css/highlighting.css" />
  <link rel="stylesheet" href="/css/pygment_highlights.css" />
  <link rel="stylesheet" href="/css/highlight.min.css" />


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.1/photoswipe.min.css" integrity="sha256-sCl5PUOGMLfFYctzDW3MtRib0ctyUvI9Qsmq2wXOeBY=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.1/default-skin/default-skin.min.css" integrity="sha256-BFeI1V+Vh1Rk37wswuOYn5lsTcaU96hGaI7OUVCLjPc=" crossorigin="anonymous" />



<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>

<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-99297878-1', 'auto');
ga('send', 'pageview');
</script>
<script async src='//www.google-analytics.com/analytics.js'></script>

</head>

  <body>
    <nav class="navbar navbar-default navbar-fixed-top navbar-custom">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/">Data Se</a>
    </div>

    <div class="collapse navbar-collapse" id="main-navbar">
      <ul class="nav navbar-nav navbar-right">
        
          
            <li>
              <a title="Blog" href="/">Blog</a>
            </li>
          
        
          
            <li>
              <a title="Tags" href="/tags">Tags</a>
            </li>
          
        
          
            <li>
              <a title="About" href="/page/about/">About</a>
            </li>
          
        

        

        
      </ul>
    </div>

    <div class="avatar-container">
      <div class="avatar-img-border">
        
          <a title="Data Se" href="/">
            <img class="avatar-img" src="/img/logo-data-se-small.png" alt="Data Se" />
          </a>
        
      </div>
    </div>

  </div>
</nav>




    
  
  
  




  

  <header class="header-section ">
    
    <div class="intro-header no-img">
      
      <div class="container">
        <div class="row">
          <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
            <div class="post-heading">
              <h1>Preparing survey results data</h1>
                
                
                  <span class="post-meta">
  Posted on November 19, 2016
  
</span>


                
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>


    
<div class="container" role="main">
  <div class="row">
    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
      <article role="main" class="blog-post">
        

<p>Analyzing survey results is a frequent endeavor (for some including me). Let&rsquo;s not think about arguments whether and when surveys are useful or not (for some recent criticism see <a href="http://www.springer.com/de/book/9783319397559">Briggs&rsquo; book</a>).</p>

<p>Typically, respondents circle some option ranging from &ldquo;don&rsquo;t agree at all&rdquo; to &ldquo;completely agree&rdquo; for each question (or &ldquo;item&rdquo;). Typically, four to six boxes are given where one is expected to tick one.</p>

<p>In this tutorial, I will discuss some typical steps to prepare the data for subsequent analyses. The goal is that we have the dataset ready for analyzing with basic preparations (eg. recoding of reversed variables) already done.</p>

<p>Some needed packages.</p>

<pre><code class="language-r">library(tidyverse)
library(forcats)  # recoding
library(psych)  # testing for internal consistency
</code></pre>

<h1 id="prepare-data">Prepare data</h1>

<p>So, first, let&rsquo;s load some data. That&rsquo;s a data set of a survey on extraversion. Folks were asked a bunch of questions tapping at their &ldquo;psychometric extraversion&rdquo;, and some related behavior, that is, behavior <em>supposed to</em> be related such as &ldquo;number of Facebook friends&rdquo;, &ldquo;how often at a party&rdquo; etc. Note that college students form the sample.</p>

<p>Data are available only (free as in free and free as in beer).</p>

<pre><code class="language-r">data_raw &lt;- read.csv(&quot;https://sebastiansauer.github.io/data/extra_raw_WS16.csv&quot;)

data &lt;- data_raw  # backup just in case
</code></pre>

<p>Here&rsquo;s the DOI of this data: 10.17605/OSF.IO/4KGZH.</p>

<p>OK, we got &lsquo;em; a dataset of dimension 501, 24. Let&rsquo;s glimpse at the data:</p>

<pre><code class="language-r">glimpse(data)
</code></pre>

<pre><code>## Observations: 501
## Variables: 24
## $ Zeitstempel                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            &lt;fctr&gt; ...
## $ Bitte.geben.Sie.Ihren.dreistellen.anonymen.Code.ein..1...Anfangsbuchstabe.des.Vornamens.Ihres.Vaters..2...Anfangsbuchstabe.des.MÃ¤dchennamens.Ihrer.Mutter..3..Anfangsbuchstabe.Ihres.Geburstsorts.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     &lt;fctr&gt; ...
## $ Ich.bin.gerne.mit.anderen.Menschen.zusammen.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           &lt;int&gt; ...
## $ Ich.bin.ein.EinzelgÃ¤nger.....                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          &lt;int&gt; ...
## $ Ich.bin.in.vielen.Vereinen.aktiv.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      &lt;int&gt; ...
## $ Ich.bin.ein.gesprÃ¤chiger.und.kommunikativer.Mensch.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    &lt;int&gt; ...
## $ Ich.bin.sehr.kontaktfreudig.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           &lt;int&gt; ...
## $ Im.Grunde.bin.ich.oft.lieber.fÃ¼r.mich.allein.....                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      &lt;int&gt; ...
## $ Ich.kann.schnell.gute.Stimmung.verbreiten.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             &lt;int&gt; ...
## $ Ich.gehe.gerne.auf.Partys.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             &lt;int&gt; ...
## $ Ich.bin.unternehmungslustig.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           &lt;int&gt; ...
## $ Ich.stehe.gerne.im.Mittelpunkt.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        &lt;int&gt; ...
## $ Wie.viele.Facebook.Freunde..Kontakte..haben.Sie..wenn.Sie.nicht.bei.Facebook.sind..bitte.LEER.lassen..                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 &lt;int&gt; ...
## $ Wie.viele..Kater...Ã¼berreichlicher.Alkoholkonsum..hatten.Sie.in.den.letzten12.Monaten.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 &lt;fctr&gt; ...
## $ Wie.alt.sind.Sie.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      &lt;int&gt; ...
## $ Bitte.geben.Sie.Ihr.Geschlecht.an.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     &lt;fctr&gt; ...
## $ Ich.wÃ¼rde.sagen..ich.bin.extrovertiert.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                &lt;int&gt; ...
## $ Sie.gehen.alleine.auf.eine.Party..Nach.wie.viel.Minuten.sind.Sie.im.GesprÃ¤ch.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          &lt;fctr&gt; ...
## $ Es.wird.ein.Mitarbeiter..m.w..fÃ¼r.eine.PrÃ¤sentation..Messe..gesucht..Melden.Sie.sich.freiwillig.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       &lt;fctr&gt; ...
## $ Wie.hÃ¤ufig.waren.Sie.in.den.letzten.12.Monaten.auf.einer.Party.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        &lt;fctr&gt; ...
## $ Wie.oft.haben.Sie.Kundenkontakt.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       &lt;fctr&gt; ...
## $ Passt.die.folgende.Beschreibung.auf.Sie...........Eine.extravertierte.Person.ist.jemand..der.seine.Energie.eher.nach.auÃŸen.richtet.und.weniger.in.die.innere.Welt.der.Gedanken..Ideen.oder.Vorstellungen..Daher.neigen.extravertierte.Menschen.dazu..in.neuen.Situationen.ohne.zu.zÃ¶gern.sich.in.die.neue.Situationen.zu.begeben..Zum.Beispiel.wÃ¼rde.eine.extravertierte.Person..die.zum.ersten.Mal.einen.Yogakurs.besucht..sich.nicht.scheuen..direkt.bei.den.Ãœbungen.mitzumachen..Oder.wenn.eine.extravertierte.Person.eine.Kneipe.zum.ersten.besucht..wÃ¼rde.sie.sich.nicht.unbehaglich.fÃ¼hlen..Man.kann.daher.sagen..dass.extravertierte.Personen.als.aktiv.wahrgenommen.werden.und.sich.zu.Unternehmungen.hingezogen.fÃ¼hlen..bei.denen.sie.mit.anderen.Personen.in.Kontakt.kommen. &lt;fctr&gt; ...
## $ X                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      &lt;lgl&gt; ...
## $ Wie.sehr.treffen.die.folgenden.Aussagen.auf.Sie.zu..Bitte.denken.Sie.dabei.nicht.an.spezifische.Situationen..sondern.ganz.allgemein..wie.sehr.die.Aussagen.Sie.selbst.in.den.meisten.Bereichen.und.Situationen.in.Ihrem.Leben.beschreiben.Allgemein.wirke.ich.tendenziell.eher.wie.eine.Person..die......                                                                                                                                                                                                                                                                                                                                                                                                                                                                              &lt;int&gt; ...
</code></pre>

<h2 id="renaming">Renaming</h2>

<p>Looks like a jungle. Now what? Let&rsquo;s start with renaming the columns (variables).</p>

<pre><code class="language-r">extra_colnames &lt;- names(data)  # save names in this vector

names(data)[3:12] &lt;- paste(&quot;i&quot;, formatC(1:10, width = 2, flag = &quot;0&quot;), sep = &quot;&quot;) 
</code></pre>

<p>There&rsquo;s a saying that naming variables/objects in one of the hardest things in computer stuff. One time I renamed the columns from &ldquo;i01&rdquo; to &ldquo;i26&rdquo; or so. That&rsquo;s <em>different</em> to the naming scheme we used now! This ambivalence can lead to confusion (happened to me). That&rsquo;s why I now follow this rule:</p>

<ul>
<li>Renaming strange columns names -&gt; use <code>v01</code> to <code>v25</code> (or how many columns you have)</li>
<li>Renaming <em>items</em> of e.g. some questionnaire -&gt; use <code>01</code> to <code>i10</code> etc.</li>
</ul>

<p>Now columns 3 to 12 are now named &ldquo;i1&rdquo;, &ldquo;i2&rdquo;, etc. These columns reflect the items of a extraversion questionnaire.</p>

<pre><code class="language-r">names(data)[1] &lt;- &quot;timestamp&quot;
names(data)[2] &lt;- &quot;code&quot;
names(data)[13] &lt;- &quot;n_facebook_friends&quot; 
names(data)[14] &lt;- &quot;n_hangover&quot; 
names(data)[15] &lt;- &quot;age&quot;
names(data)[16] &lt;- &quot;sex&quot; 
names(data)[17] &lt;- &quot;extra_single_item&quot;
names(data)[18] &lt;- &quot;time_conversation&quot;
names(data)[19] &lt;- &quot;presentation&quot;
names(data)[20] &lt;- &quot;n_party&quot;
names(data)[21] &lt;- &quot;clients&quot;
names(data)[22] &lt;- &quot;extra_vignette&quot; 
names(data)[24] &lt;- &quot;extra_description&quot; 
data$X &lt;- NULL
</code></pre>

<h2 id="recoding">Recoding</h2>

<p>Importantly, two items are negatively coded; we need to recode them (ie., &ldquo;yes&rdquo; gets &ldquo;no&rdquo;, and vice versa).</p>

<p>They are:</p>

<pre><code class="language-r">extra_colnames[c(4, 8)]
</code></pre>

<pre><code>## [1] &quot;Ich.bin.ein.EinzelgÃ¤nger.....&quot;                    
## [2] &quot;Im.Grunde.bin.ich.oft.lieber.fÃ¼r.mich.allein.....&quot;
</code></pre>

<p>Double check whether <em>still</em> nothing is recoded (I&rsquo;ve run this code a couple of times already).</p>

<pre><code class="language-r">identical(data$i02, data_raw[[4]])
</code></pre>

<pre><code>## [1] TRUE
</code></pre>

<pre><code class="language-r">identical(data$i06, data_raw[[8]])
</code></pre>

<pre><code>## [1] TRUE
</code></pre>

<p>OK.</p>

<pre><code class="language-r">rename(data, 
       i02r = i02,
       i06r = i06) -&gt; data

data %&gt;% 
  mutate(i02r = recode(i02r, `1` = 4L, `2` = 3L, `3` = 2L, `4` = 1L),
         i06r = recode(i06r, `1` = 4L, `2` = 3L, `3` = 2L, `4` = 1L)) -&gt; data
</code></pre>

<p>This may lead us too far afield, but let&rsquo;s see whether the items correlate with each other, and each with the rest. We can compute Cronbach&rsquo;s Alpha for that purpose</p>

<pre><code class="language-r">data %&gt;% 
  select(i01:i10) %&gt;% 
  psych::alpha() %&gt;% 
  print
</code></pre>

<pre><code>## 
## Reliability analysis   
## Call: psych::alpha(x = .)
## 
##   raw_alpha std.alpha G6(smc) average_r S/N   ase mean   sd
##       0.78      0.79    0.81      0.28 3.9 0.015  2.9 0.46
## 
##  lower alpha upper     95% confidence boundaries
## 0.75 0.78 0.81 
## 
##  Reliability if an item is dropped:
##      raw_alpha std.alpha G6(smc) average_r S/N alpha se
## i01       0.75      0.76    0.77      0.26 3.2    0.017
## i02r      0.76      0.77    0.78      0.27 3.4    0.016
## i03       0.81      0.81    0.82      0.33 4.4    0.013
## i04       0.75      0.76    0.77      0.26 3.2    0.017
## i05       0.75      0.76    0.77      0.26 3.2    0.017
## i06r      0.76      0.77    0.78      0.27 3.4    0.016
## i07       0.76      0.77    0.79      0.27 3.4    0.016
## i08       0.76      0.78    0.79      0.28 3.5    0.016
## i09       0.77      0.78    0.79      0.28 3.6    0.016
## i10       0.78      0.79    0.80      0.30 3.8    0.015
## 
##  Item statistics 
##        n raw.r std.r r.cor r.drop mean   sd
## i01  499  0.69  0.71  0.68   0.60  3.3 0.68
## i02r 498  0.63  0.63  0.59   0.50  3.1 0.80
## i03  500  0.33  0.30  0.16   0.14  1.9 0.92
## i04  498  0.68  0.69  0.67   0.57  3.2 0.73
## i05  498  0.69  0.70  0.68   0.59  3.1 0.77
## i06r 499  0.62  0.62  0.57   0.50  2.9 0.77
## i07  498  0.62  0.62  0.57   0.50  3.0 0.73
## i08  499  0.61  0.60  0.53   0.47  2.9 0.86
## i09  499  0.55  0.57  0.49   0.43  3.4 0.71
## i10  498  0.51  0.49  0.39   0.34  2.2 0.90
## 
## Non missing response frequency for each item
##         1    2    3    4 miss
## i01  0.01 0.08 0.46 0.45 0.00
## i02r 0.04 0.16 0.45 0.35 0.01
## i03  0.41 0.33 0.19 0.06 0.00
## i04  0.01 0.16 0.43 0.41 0.01
## i05  0.02 0.20 0.47 0.30 0.01
## i06r 0.05 0.18 0.54 0.22 0.00
## i07  0.02 0.21 0.54 0.23 0.01
## i08  0.06 0.23 0.44 0.27 0.00
## i09  0.01 0.10 0.41 0.47 0.00
## i10  0.21 0.43 0.26 0.10 0.01
</code></pre>

<p>Ok, looks good.</p>

<p>I suspect there are rows with <em>no</em> values at, complete blank. Let&rsquo;s compute the proportion of NAs per row.</p>

<pre><code class="language-r">rowSums(is.na(data))
</code></pre>

<pre><code>##   [1]  1  1  1  1  1  1  1  1  1  2  1  1  1  1  1  1  1  2  1  1  1  1  1
##  [24]  2  1  2  2  1  1  1  1  1  1  1  1  1  1  2  1  2  1  1  1  1  1  1
##  [47]  1  1  2  1  1  3  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1
##  [70]  1  1  1  1  1  1  1  2  1  1  1  1  1  1  1  1  1  1  1  1  2  2  1
##  [93]  1  2  1  1  1  2  2  1  1  2  1  1  3  1  1  1  1  2  1  2  1  1  1
## [116]  0  0  0  0  0  0  0  1  0  0  0  0  0  0  0  0  1  0  0  1  0  1  0
## [139]  1  0  0  1  0  0  0  0  0  0  1  0  0  0  0  0  0  0  0  1  0  0  2
## [162]  0  0  0  0  0  1  1  0  0  0  0  0  0  1  0  1  0  1  0  0  1  1  1
## [185]  1  0  3  0  2  0  0  0  0  0  0  1  1  0  0  0  0  1  1  0  0  0  0
## [208]  0  0  0  0  0  0  0  0  0  0  0  0  1  0  0  0  0  1  0  0  0  1  1
## [231]  1  1  0  1  1  0  1  1  0  0  0  1  0  0  0  0  0  0  0  0  0  0  0
## [254]  0  0  0  0  0  0  0  0  0  0  1  0  0  0  0  1  0  0  0  0  0  0  0
## [277]  0  1  0  1  0  0  0  1  0  0  0  0  0  0  0  0  0  0  0  1  0  0  0
## [300]  0  0  0  0  0  0  1  0  0  1  0  0  0  0  0  0  2  0  0  0  0  0  0
## [323]  1  0  0  1  0  0  0  0  0  0  0  1  0  0  0  0  0  0  1  1  0  0  0
## [346]  0  0  0  1  0  0  2  0  0  0  0  1  1  0  0  0  0  0  0  0  0  1  0
## [369]  0  0  1  0  0  0  0  0  0  0  1  1  0  0  0  0  1  0  0  0  0  0  1
## [392]  0  1  0  1  0  0  0  0  0  0  0  0  0  0  0  0  0  0  1  0  0  0  0
## [415]  0  0  0  0  0  0  0  0  0  0  1  1  0  0  0  0  0  0  0  1  0  0  0
## [438]  0  0  0  1  1  0  1  0  0  0  0  0  0  0  0 14  1  1  0  1  0  1  0
## [461]  0  0  0  0  0 11  0  0  0  1  0  0  0  1  1  0  1  1  0  0  0  0  0
## [484]  0  0  0  0  0  0  0  0  0  0  0  0  1  1  0  0  1  0
</code></pre>

<pre><code class="language-r">table(data$extra_description)
</code></pre>

<pre><code>## 
##   1   2   3   4   5   6   7   8  10 
##  31 118  98  68  44  12   5   1   1
</code></pre>

<pre><code class="language-r">data %&gt;% 
  mutate(prop_na_per_row = rowSums(is.na(data))/ncol(data)) -&gt; data

count(data, prop_na_per_row) 
</code></pre>

<pre><code>## # A tibble: 6 Ã— 2
##   prop_na_per_row     n
##             &lt;dbl&gt; &lt;int&gt;
## 1      0.00000000   304
## 2      0.04347826   171
## 3      0.08695652    21
## 4      0.13043478     3
## 5      0.47826087     1
## 6      0.60869565     1
</code></pre>

<h2 id="rowwise-means-for-survey-etc">Rowwise means for survey etc.</h2>

<p>Let&rsquo;s compute the mean and the median extraversion.</p>

<pre><code class="language-r">data %&gt;% 
  mutate(extra_mean = rowMeans(.[3:12], na.rm = TRUE),
         extra_median = apply(.[3:12], 1, median, na.rm = TRUE)) -&gt; data
</code></pre>

<h2 id="cleaning-data">Cleaning data</h2>

<p>The number of hangovers should be numeric, but it isn&rsquo;t. Let&rsquo;s see.</p>

<pre><code class="language-r">count(data, n_hangover) %&gt;% kable
</code></pre>

<table>
<thead>
<tr>
<th align="left">n_hangover</th>
<th align="right">n</th>
</tr>
</thead>

<tbody>
<tr>
<td align="left"></td>
<td align="right">13</td>
</tr>

<tr>
<td align="left">0</td>
<td align="right">98</td>
</tr>

<tr>
<td align="left">1</td>
<td align="right">59</td>
</tr>

<tr>
<td align="left">10</td>
<td align="right">38</td>
</tr>

<tr>
<td align="left">100</td>
<td align="right">1</td>
</tr>

<tr>
<td align="left">106</td>
<td align="right">4</td>
</tr>

<tr>
<td align="left">12</td>
<td align="right">18</td>
</tr>

<tr>
<td align="left">15</td>
<td align="right">10</td>
</tr>

<tr>
<td align="left">153</td>
<td align="right">1</td>
</tr>

<tr>
<td align="left">18</td>
<td align="right">1</td>
</tr>

<tr>
<td align="left">2</td>
<td align="right">63</td>
</tr>

<tr>
<td align="left">20</td>
<td align="right">14</td>
</tr>

<tr>
<td align="left">200</td>
<td align="right">1</td>
</tr>

<tr>
<td align="left">24</td>
<td align="right">8</td>
</tr>

<tr>
<td align="left">25</td>
<td align="right">5</td>
</tr>

<tr>
<td align="left">28</td>
<td align="right">1</td>
</tr>

<tr>
<td align="left">3</td>
<td align="right">42</td>
</tr>

<tr>
<td align="left">30</td>
<td align="right">11</td>
</tr>

<tr>
<td align="left">35</td>
<td align="right">1</td>
</tr>

<tr>
<td align="left">4</td>
<td align="right">25</td>
</tr>

<tr>
<td align="left">40</td>
<td align="right">9</td>
</tr>

<tr>
<td align="left">48</td>
<td align="right">2</td>
</tr>

<tr>
<td align="left">5</td>
<td align="right">38</td>
</tr>

<tr>
<td align="left">50</td>
<td align="right">6</td>
</tr>

<tr>
<td align="left">6</td>
<td align="right">15</td>
</tr>

<tr>
<td align="left">7</td>
<td align="right">2</td>
</tr>

<tr>
<td align="left">70</td>
<td align="right">2</td>
</tr>

<tr>
<td align="left">8</td>
<td align="right">7</td>
</tr>

<tr>
<td align="left">80</td>
<td align="right">1</td>
</tr>

<tr>
<td align="left">9</td>
<td align="right">2</td>
</tr>

<tr>
<td align="left">98</td>
<td align="right">1</td>
</tr>

<tr>
<td align="left">ca. 18-23</td>
<td align="right">1</td>
</tr>

<tr>
<td align="left">Keinen</td>
<td align="right">1</td>
</tr>
</tbody>
</table>

<p>OK, let&rsquo;s parse the numbers only; a typical problem in surveys is that respondent do not give numbers where you would like them to give numbers (some survey tools allow you to control what the respondent may put in the field).</p>

<pre><code class="language-r">data$n_hangover &lt;- parse_number(data$n_hangover)
</code></pre>

<pre><code>## Warning: 2 parsing failures.
## row col expected actual
## 132  -- a number       
## 425  -- a number      .
</code></pre>

<pre><code class="language-r">data$time_conversation &lt;- parse_number(data$time_conversation)
</code></pre>

<pre><code>## Warning: 1 parsing failure.
## row col expected actual
## 153  -- a number
</code></pre>

<pre><code class="language-r">data$n_party &lt;- parse_number(data$n_party)
</code></pre>

<pre><code>## Warning: 1 parsing failure.
## row col expected actual
## 270  -- a number
</code></pre>

<pre><code class="language-r"># data$n_clients &lt;- parse_number(data$clients)
</code></pre>

<p>For the item &ldquo;how many clients do you see each weak&rdquo;, things are more difficult, see:</p>

<pre><code class="language-r">data %&gt;% 
  count(clients)
</code></pre>

<pre><code>## # A tibble: 19 Ã— 2
##                                        clients     n
##                                         &lt;fctr&gt; &lt;int&gt;
## 1                                                 51
## 2                                            0     3
## 3                                          100     1
## 4                              3 Mal pro Woche     1
## 5                                    gar nicht     1
## 6                            habe keine Kunden     1
## 7                            ich arbeite ncht      1
## 8                Ich habe keinen Kundenkontakt     1
## 9                   im Schnitt 1 Mal pro Monat    30
## 10 im Schnitt 1 Mal pro Quartal (oder weniger)    51
## 11                    im Schnitt 1 Mal pro Tag    50
## 12                  im Schnitt 1 Mal pro Woche    78
## 13                 im Schnitt mehrfach pro Tag   225
## 14                                      keinen     1
## 15                                         nie     2
## 16                                         Nie     1
## 17                                          NÃ¶     1
## 18                      tÃ¤glich zwischen 20-50     1
## 19    Telfonisch tÃ¤glich, Face to Face 1xWoche     1
</code></pre>

<p>There are some values/words indicating that the respondent does not see any clients at all. Let&rsquo;s recode them to &ldquo;I am not having personal contact to clients&rdquo; (or, shorter <code>no</code>).</p>

<pre><code class="language-r">data %&gt;% 
  mutate(client_freq = recode(clients, &quot;gar nicht&quot; = &quot;0&quot;,
                              &quot;habe keine Kunden&quot; = &quot;0&quot;,
                              &quot;keinen&quot; = &quot;0&quot;,
                              &quot;Nie&quot; = &quot;0&quot;,
                              &quot;NÃ¶&quot; = &quot;0&quot;,
                              &quot;Ich habe keinen Kundenkontakt&quot; = &quot;0&quot;,
                              &quot;ich arbeite ncht &quot; = &quot;0&quot;,
                              &quot;nie&quot; = &quot;0&quot;,
                              &quot; &quot; = &quot;0&quot;)) -&gt; data

data %&gt;% 
  count(client_freq)
</code></pre>

<pre><code>## # A tibble: 11 Ã— 2
##                                    client_freq     n
##                                         &lt;fctr&gt; &lt;int&gt;
## 1                                                 51
## 2                                            0    12
## 3                                          100     1
## 4                              3 Mal pro Woche     1
## 5                   im Schnitt 1 Mal pro Monat    30
## 6  im Schnitt 1 Mal pro Quartal (oder weniger)    51
## 7                     im Schnitt 1 Mal pro Tag    50
## 8                   im Schnitt 1 Mal pro Woche    78
## 9                  im Schnitt mehrfach pro Tag   225
## 10                      tÃ¤glich zwischen 20-50     1
## 11    Telfonisch tÃ¤glich, Face to Face 1xWoche     1
</code></pre>

<p>Ok, looks good, but still a bit work left.</p>

<pre><code class="language-r">data %&gt;% 
  mutate(client_freq = recode(client_freq, &quot;100&quot; = &quot;3&quot;,
                              &quot;im Schnitt 1 Mal pro Quartal (oder weniger)&quot; = &quot;1&quot;,
                              &quot;im Schnitt 1 Mal pro Monat&quot; = &quot;2&quot;,
                              &quot;im Schnitt 1 Mal pro Woche&quot; = &quot;3&quot;,
                              &quot;im Schnitt 1 Mal pro Tag&quot; = &quot;4&quot;,
                              &quot;im Schnitt mehrfach pro Tag&quot; = &quot;5&quot;,
                              &quot;tÃ¤glich zwischen 20-50&quot; = &quot;5&quot;,
                              &quot;Telfonisch tÃ¤glich, Face to Face 1xWoche&quot; = &quot;5&quot;,
                              &quot;3 Mal pro Woche&quot; = &quot;4&quot;)) -&gt; data

data$client_freq &lt;- factor(data$client_freq)  # drops unused levels

data %&gt;% 
  count(client_freq)
</code></pre>

<pre><code>## # A tibble: 7 Ã— 2
##   client_freq     n
##        &lt;fctr&gt; &lt;int&gt;
## 1                51
## 2           0    12
## 3           3    79
## 4           4    51
## 5           2    30
## 6           1    51
## 7           5   227
</code></pre>

<p>Finally, let&rsquo;s reorder the values from 0 to 5.</p>

<pre><code class="language-r">data$client_freq[data$client_freq == &quot;&quot;] &lt;- NA

data %&gt;% 
  mutate(client_freq = factor(client_freq, levels = c(&quot;0&quot;, &quot;1&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;, &quot;5&quot;, NA))) -&gt; data
</code></pre>

<p>Pooh, what a mess. Better force respondent to select from a given set of answers, than we do not have that hassle.</p>

<h2 id="checking-na-s-for-items">Checking NA&rsquo;s for items</h2>

<pre><code class="language-r">data %&gt;% 
  select(i01:i10) %&gt;%
  gather %&gt;% 
  filter(is.na(value)) %&gt;% 
  count
</code></pre>

<pre><code>## # A tibble: 1 Ã— 1
##       n
##   &lt;int&gt;
## 1    24
</code></pre>

<p>Hm, let&rsquo;s see in more detail.</p>

<pre><code class="language-r">data %&gt;% 
  select(i01:i10) %&gt;% 
  filter(!complete.cases(.))
</code></pre>

<pre><code>##   i01 i02r i03 i04 i05 i06r i07 i08 i09 i10
## 1   4    4   3  NA   4    3   3   3   3   2
## 2   4    3   3   3   2    4  NA   4   4   3
## 3   3    3   1   2   3    3   2   1   3  NA
## 4   3    3   1  NA   3    2   3   2   3   1
## 5   4    1   1   4  NA    1   4   3   3   2
## 6   3   NA   2   3   2    4   2   2   4   2
## 7  NA   NA  NA  NA  NA   NA  NA  NA  NA  NA
## 8  NA   NA   2   2  NA   NA  NA  NA  NA  NA
</code></pre>

<p>Hm, not so many cases have NAs. Let&rsquo;s just exclude them, that&rsquo;s the easiest, and we will not lose much (many cases, that is).</p>

<pre><code class="language-r">data %&gt;% 
  select(i01:i10) %&gt;% 
  filter(complete.cases(.)) %&gt;% nrow
</code></pre>

<pre><code>## [1] 493
</code></pre>

<pre><code class="language-r">data %&gt;% 
  select(i01:i10) %&gt;% 
  na.omit -&gt; data_items
</code></pre>

<p>So, we are more or less done now. Last thing we do, is to have a look at the distribution of <code>data_items</code> whether it looks plausible, as some kind of coarse sense check.</p>

<pre><code class="language-r">data_items %&gt;% 
  select(i01:i10) %&gt;% 
  gather %&gt;% 
  ggplot +
  aes(x = value) +
  geom_bar()+
  facet_wrap(~key, ncol = 4)
</code></pre>

<p><img src="http://sebastiansauer.github.io/images/2016-11-19/unnamed-chunk-17-1.png" alt="plot of chunk unnamed-chunk-17" /></p>

<p>Appears ok!</p>

<p>Ok, let&rsquo;s save the data file as the last step (here, we simple chose the working directory)</p>

<pre><code class="language-r">write.csv(data, file = &quot;extra.csv&quot;)
</code></pre>

      </article>

      <ul class="pager blog-pager">
        
          <li class="previous">
            <a href="/../post/crashkurs_barplots/" data-toggle="tooltip" data-placement="top" title="Crashkurs zur Erstellung von Barplots fÃ¼r Umfrage-Daten">&larr; Previous Post</a>
          </li>
        
        
          <li class="next">
            <a href="/../post/validation_extraversion_questionnaire/" data-toggle="tooltip" data-placement="top" title="Some musings on the validation of Satow&#39;s Extraversion questionnaire">Next Post &rarr;</a>
          </li>
        
      </ul>

      
        
          <div class="disqus-comments">
            <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'https-sebastiansauer-github-io';
    var disqus_identifier = '\/..\/post\/preparing_survey_data\/';
    var disqus_title = 'Preparing survey results data';
    var disqus_url = '\/..\/post\/preparing_survey_data\/';

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
          </div>
        
      

    </div>
  </div>
</div>

    <footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center footer-links">
          
              <li>
                <a href="mailto:ssauer@posteo.de" title="Email me">
                  <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-envelope fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://github.com/sebastian_sauer" title="GitHub">
                  <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://twitter.com/sauer_sebasitan" title="Twitter">
                  <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://reddit.com/u/username" title="Reddit">
                  <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-reddit-alien fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://linkedin.com/in/https://www.linkedin.com/in/dr-sebastian-sauer-4791762/" title="LinkedIn">
                  <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://www.xing.com/profile/https://www.xing.com/profile/Sebastian_Sauer2" title="Xing">
                  <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-xing fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
          
          <li>
            <a href="" title="RSS">
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
        </ul>
        <p class="credits copyright text-muted">
          
            
              <a href="yourwebsite.com">Sebastiuan Sauer</a>
            
          

          &nbsp;&bull;&nbsp;
          2017

          
            &nbsp;&bull;&nbsp;
            <a href="/">Data Se</a>
          
        </p>
        
        <p class="credits theme-by text-muted">
          <a href="http://gohugo.io">Hugo v0.21</a> powered &nbsp;&bull;&nbsp; Theme by <a href="http://deanattali.com/beautiful-jekyll/">Beautiful Jekyll</a> adapted to <a href="https://github.com/halogenica/beautifulhugo">Beautiful Hugo</a>
          
        </p>
      </div>
    </div>
  </div>
</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.js" integrity="sha384-/y1Nn9+QQAipbNQWU65krzJralCnuOasHncUFXGkdwntGeSvQicrYkiUBwsgUqc1" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/contrib/auto-render.min.js" integrity="sha384-dq1/gEHSxPZQ7DdrM82ID4YVol9BYyU7GbWlIwnwyPzotpoc57wDw/guX8EaYGPx" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<script src="/js/main.js"></script>
<script src="/js/highlight.min.js"></script>
<script> hljs.initHighlightingOnLoad(); </script><script> renderMathInElement(document.body); </script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.1/photoswipe.min.js" integrity="sha256-UplRCs9v4KXVJvVY+p+RSo5Q4ilAUXh7kpjyIP5odyc=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.1/photoswipe-ui-default.min.js" integrity="sha256-PWHOlUzc96pMc8ThwRIXPn8yH4NOLu42RQ0b9SpnpFk=" crossorigin="anonymous"></script>
<script src="/js/load-photoswipe.js"></script>



  </body>
</html>

