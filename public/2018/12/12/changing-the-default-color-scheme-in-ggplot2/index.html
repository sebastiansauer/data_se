<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Hugo 0.52" />


<title>Changing the default color scheme in ggplot2 - Data Se</title>
<meta property="og:title" content="Changing the default color scheme in ggplot2 - Data Se">



  








<link href='//cdn.bootcss.com/highlight.js/9.11.0/styles/github.min.css' rel='stylesheet' type='text/css' />



<link rel="stylesheet" href="/css/fonts.css" media="all">
<link rel="stylesheet" href="/css/main.css" media="all">



  </head>
  <body>
    <div class="wrapper">
      <header class="header">
        <nav class="nav">
  <a href="/" class="nav-logo">
    <img src="/images/logo-data-se.png"
         width="50"
         height="50"
         alt="Logo">
  </a>

  <ul class="nav-links">
    
    <li><a href="/about/">About</a></li>
    
    <li><a href="/">Blog</a></li>
    
    <li><a href="/privacy/">Data privacy</a></li>
    
  </ul>
</nav>

      </header>


<main class="content" role="main">

  <article class="article">
    
    <span class="article-duration">10 min read</span>
    

    <h1 class="article-title">Changing the default color scheme in ggplot2</h1>

    
    <span class="article-date">2018/12/12</span>
    

    <div class="article-content">
      


<hr />
<p>UPDATE: see update below based on comments from <span class="citation">[@nmarkgraf]</span>(<a href="https://disqus.com/by/nmarkgraf/?utm_source=reply&amp;utm_medium=email&amp;utm_content=comment_author" class="uri">https://disqus.com/by/nmarkgraf/?utm_source=reply&amp;utm_medium=email&amp;utm_content=comment_author</a>).</p>
<hr />
<p>The default color scheme in ggplot2 is suitable for many purposes, but, for instance, it is not suitable for b/w printing, and maybe not suitable for persons with limited color perception.</p>
<p>Of course, it is straightforward to edit the color scheme for one given plot. But how to change the default color scheme in ggplot2?</p>
<p>As it turns out, there are some helpful ways to address that – Kudos to <span class="citation">@ben-bolker</span> who helped me out on <a href="https://stackoverflow.com/questions/53750310/how-to-change-default-color-scheme-in-ggplot2/53750568#53750568">this Stackoverflow post</a>.</p>
<p>Assume that we would like to use Viridis color scheme, because that’s nice for black-white printing and it works for people suffering from color blindness according to this source.</p>
<blockquote>
<p>The viridis scales provide colour maps that are perceptually uniform in both colour and black-and-white. They are also designed to be perceived by viewers with common forms of colour blindness. See also <a href="https://bids.github.io/colormap/" class="uri">https://bids.github.io/colormap/</a>.</p>
</blockquote>
<div id="setup" class="section level1">
<h1>Setup</h1>
<pre class="r"><code>library(tidyverse)
library(viridis)
library(scales)

data(mtcars)</code></pre>
</div>
<div id="continuous-scales" class="section level1">
<h1>Continuous scales</h1>
<p>We have to differentiate between continuous and discrete scales. Let’s start with the former.</p>
<p>There are two option settings for continuous color and fill used by ggplot2:</p>
<pre class="r"><code>opts &lt;- options()  # save old options

options(ggplot2.continuous.colour=&quot;viridis&quot;)
options(ggplot2.continuous.fill = &quot;viridis&quot;)</code></pre>
<p>Let’s try it out.</p>
<pre class="r"><code>ggplot(data = mtcars, aes(x = hp, y = mpg, color = wt )) + 
  geom_point()</code></pre>
<p><img src="/post/2018-12-12-changing-the-default-color-scheme-in-ggplot2_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<p>Works!</p>
<p>We can also map a discrete variable (such as <code>am</code>) to a continuous color scheme, without too much harm:</p>
<pre class="r"><code>ggplot(data = mtcars, aes(x = hp, y = mpg, color = am )) + 
  geom_point()</code></pre>
<p><img src="/post/2018-12-12-changing-the-default-color-scheme-in-ggplot2_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<p>Of course, the legend does reveal that we have used a continuous mapping where a discrete mapping would be preferable.</p>
</div>
<div id="discrete-scales-way-1" class="section level1">
<h1>Discrete scales, way 1</h1>
<p>It appears that there’s no option we can call for discrete values. One reason may be that ggplot2 uses viridis as a default for ordered factors. So what we do is to define the color mapping variables as an ordered factor.</p>
<pre class="r"><code>mtcars$am_f &lt;- ordered(mtcars$am)</code></pre>
<p>Now we plot again:</p>
<pre class="r"><code>ggplot(data = mtcars, aes(x = hp, y = mpg, color = am_f)) + 
  geom_point()</code></pre>
<p><img src="/post/2018-12-12-changing-the-default-color-scheme-in-ggplot2_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<p>Works.</p>
</div>
<div id="discrete-scales-way-2" class="section level1">
<h1>Discrete scales, way 2</h1>
<p>Another option is to redefine <code>scale_color_discrete()</code> which is apparently silently called by each ggplot call.</p>
<pre class="r"><code>scale_colour_discrete &lt;- function(...) {
  scale_colour_manual(..., values = viridis::viridis(2))
}</code></pre>
<p>Let’s take another color mapping variable for the sake of demonstration.</p>
<pre class="r"><code>ggplot(data = mtcars, aes(x = hp, y = mpg, color = factor(vs))) + 
  geom_point()</code></pre>
<p><img src="/post/2018-12-12-changing-the-default-color-scheme-in-ggplot2_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<p>Works. But.</p>
<p>The downside of this approach is that we have to define the numbers of different colors upfront. This is a strong limitation. Consider the case that we would have defined 7 colors upfront.</p>
<pre class="r"><code>scale_colour_discrete &lt;- function(...) {
  scale_colour_manual(..., values = viridis::viridis(7))
}</code></pre>
<p>That’s these ones:</p>
<pre class="r"><code>show_col(viridis_pal()(7))</code></pre>
<p><img src="/post/2018-12-12-changing-the-default-color-scheme-in-ggplot2_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
<p>Now plot that:</p>
<pre class="r"><code>ggplot(data = mtcars, aes(x = hp, y = mpg, color = factor(vs))) +
  geom_point()</code></pre>
<p><img src="/post/2018-12-12-changing-the-default-color-scheme-in-ggplot2_files/figure-html/unnamed-chunk-11-1.png" width="672" /></p>
<p>As can be seen, color #1 and #2 are selected. We would have needed that the first and the last color in this array would had been chosen.</p>
</div>
<div id="discrete-scales-way-3-work-around-for-way-2" class="section level1">
<h1>Discrete scales, way 3 (Work around for way 2)</h1>
<p>What we can do, of course, is to pick and choose and our own values. We can take a glimpse at the hex values from viridis, of course:</p>
<pre class="r"><code>viridis_pal()(7)</code></pre>
<pre><code>## [1] &quot;#440154FF&quot; &quot;#443A83FF&quot; &quot;#31688EFF&quot; &quot;#21908CFF&quot; &quot;#35B779FF&quot; &quot;#8FD744FF&quot;
## [7] &quot;#FDE725FF&quot;</code></pre>
<p>Now, we take #1, then #7, then #2, and so on, yielding:</p>
<pre class="r"><code>viridis_qualitative_pal7 &lt;- c(&quot;#440154FF&quot;, &quot;#FDE725FF&quot;, &quot;#443A83FF&quot;, 
                              &quot;#8FD744FF&quot;, &quot;#31688EFF&quot;,  &quot;#35B779FF&quot;, 
                              &quot;#21908CFF&quot;)</code></pre>
<p>These values are now plugged into <code>scale_color_manual()</code>:</p>
<pre class="r"><code>scale_colour_discrete &lt;- function(...) {
  scale_colour_manual(..., values = viridis_qualitative_pal7)
}</code></pre>
<p>Let’s take some other dataset for the sake of demonstration:</p>
<pre class="r"><code>data(tips, package = &quot;reshape2&quot;)

ggplot(tips) +
  aes(x = total_bill, y = tip, color = day) + 
  geom_point()</code></pre>
<p><img src="/post/2018-12-12-changing-the-default-color-scheme-in-ggplot2_files/figure-html/unnamed-chunk-15-1.png" width="672" /></p>
<p>Works sufficiently well.</p>
<pre class="r"><code>library(mosaic)</code></pre>
<pre><code>## Loading required package: lattice</code></pre>
<pre><code>## Loading required package: ggformula</code></pre>
<pre><code>## Loading required package: ggstance</code></pre>
<pre><code>## 
## Attaching package: &#39;ggstance&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:ggplot2&#39;:
## 
##     geom_errorbarh, GeomErrorbarh</code></pre>
<pre><code>## 
## New to ggformula?  Try the tutorials: 
##  learnr::run_tutorial(&quot;introduction&quot;, package = &quot;ggformula&quot;)
##  learnr::run_tutorial(&quot;refining&quot;, package = &quot;ggformula&quot;)</code></pre>
<pre><code>## Loading required package: mosaicData</code></pre>
<pre><code>## Loading required package: Matrix</code></pre>
<pre><code>## 
## Attaching package: &#39;Matrix&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:tidyr&#39;:
## 
##     expand</code></pre>
<pre><code>## 
## The &#39;mosaic&#39; package masks several functions from core packages in order to add 
## additional features.  The original behavior of these functions should not be affected by this.
## 
## Note: If you use the Matrix package, be sure to load it BEFORE loading mosaic.</code></pre>
<pre><code>## 
## Attaching package: &#39;mosaic&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:Matrix&#39;:
## 
##     mean</code></pre>
<pre><code>## The following object is masked from &#39;package:scales&#39;:
## 
##     rescale</code></pre>
<pre><code>## The following objects are masked from &#39;package:dplyr&#39;:
## 
##     count, do, tally</code></pre>
<pre><code>## The following object is masked from &#39;package:purrr&#39;:
## 
##     cross</code></pre>
<pre><code>## The following object is masked from &#39;package:ggplot2&#39;:
## 
##     stat</code></pre>
<pre><code>## The following objects are masked from &#39;package:stats&#39;:
## 
##     binom.test, cor, cor.test, cov, fivenum, IQR, median,
##     prop.test, quantile, sd, t.test, var</code></pre>
<pre><code>## The following objects are masked from &#39;package:base&#39;:
## 
##     max, mean, min, prod, range, sample, sum</code></pre>
<pre class="r"><code>mosaic::CIAdata() </code></pre>
<pre><code>##              Category                                         Field
## 1           Geography                                          Area
## 2  People and Society                                    Population
## 3  People and Society                        Population growth rate
## 4  People and Society                                    Birth rate
## 5  People and Society                                    Death rate
## 6  People and Society                            Net migration rate
## 7  People and Society                       Maternal mortality rate
## 8  People and Society                         Infant mortality rate
## 9  People and Society                      Life expectancy at birth
## 10 People and Society                          Total fertility rate
## 11 People and Society                           Health expenditures
## 12 People and Society              HIV/AIDS - adult prevalence rate
## 13 People and Society        HIV/AIDS - people living with HIV/AIDS
## 14 People and Society                             HIV/AIDS - deaths
## 15 People and Society               Obesity - adult prevalence rate
## 16 People and Society Children under the age of 5 years underweight
## 17 People and Society                        Education expenditures
## 18 People and Society               Unemployment - youth ages 15-24
## 19            Economy                 GDP (purchasing power parity)
## 20            Economy                        GDP - real growth rate
## 21            Economy                        GDP - per capita (PPP)
## 22            Economy                         Gross national saving
## 23            Economy             Industrial production growth rate
## 24            Economy                                   Labor force
## 25            Economy                             Unemployment rate
## 26            Economy    Distribution of family income - Gini index
## 27            Economy                      Taxes and other revenues
## 28            Economy             Budget surplus (+) or deficit (-)
## 29            Economy                                   Public debt
## 30            Economy              Inflation rate (consumer prices)
## 31            Economy                    Central bank discount rate
## 32            Economy            Commercial bank prime lending rate
## 33            Economy                         Stock of narrow money
## 34            Economy                          Stock of broad money
## 35            Economy                      Stock of domestic credit
## 36            Economy        Market value of publicly traded shares
## 37            Economy                       Current account balance
## 38            Economy                                       Exports
## 39            Economy                                       Imports
## 40            Economy         Reserves of foreign exchange and gold
## 41            Economy                               Debt - external
## 42            Economy  Stock of direct foreign investment - at home
## 43            Economy   Stock of direct foreign investment - abroad
## 44             Energy                      Electricity - production
## 45             Energy                     Electricity - consumption
## 46             Energy                         Electricity - exports
## 47             Energy                         Electricity - imports
## 48             Energy   Electricity - installed generating capacity
## 49             Energy               Electricity - from fossil fuels
## 50             Energy              Electricity - from nuclear fuels
## 51             Energy       Electricity - from hydroelectric plants
## 52             Energy    Electricity - from other renewable sources
## 53             Energy                        Crude oil - production
## 54             Energy                           Crude oil - exports
## 55             Energy                           Crude oil - imports
## 56             Energy                   Crude oil - proved reserves
## 57             Energy       Refined petroleum products - production
## 58             Energy      Refined petroleum products - consumption
## 59             Energy          Refined petroleum products - exports
## 60             Energy          Refined petroleum products - imports
## 61             Energy                      Natural gas - production
## 62             Energy                     Natural gas - consumption
## 63             Energy                         Natural gas - exports
## 64             Energy                         Natural gas - imports
## 65             Energy                 Natural gas - proved reserves
## 66     Communications                Telephones - main lines in use
## 67     Communications                  Telephones - mobile cellular
## 68     Communications                                Internet hosts
## 69     Communications                                Internet users
## 70     Transportation                                      Airports
## 71     Transportation                                      Railways
## 72     Transportation                                      Roadways
## 73     Transportation                                     Waterways
## 74     Transportation                               Merchant marine
## 75           Military                         Military expenditures
##                 Name Code                          Unit
## 1               area 2147                         sq km
## 2                pop 2119                        people
## 3             growth 2002                             %
## 4              birth 2054            births/1000 people
## 5              death 2066            deaths/1000 people
## 6               migr 2112          migrants/1000 people
## 7           maternal 2223     deaths/100000 live births
## 8             infant 2091       deaths/1000 live births
## 9               life 2102                         years
## 10              fert 2127           children born/woman
## 11            health 2225                      % of GDP
## 12           HIVrate 2155                             %
## 13         HIVpeople 2156                        people
## 14          HIVdeath 2157                        deaths
## 15           obesity 2228                             %
## 16       underweight 2224                             %
## 17              educ 2206                      % of GDP
## 18 unemploymentYouth 2229                             %
## 19               GDP 2001                             $
## 20         GDPgrowth 2003                             %
## 21         GDPcapita 2004                             $
## 22            saving 2260                      % of GDP
## 23           indProd 2089                             %
## 24             labor 2095                        people
## 25      unemployment 2129                             %
## 26            family 2172                    Gini index
## 27               tax 2221                      % of GDP
## 28            budget 2222                      % of GDP
## 29              debt 2186                      % of GDP
## 30         inflation 2092                             %
## 31          discount 2207                             %
## 32           lending 2208                             %
## 33            narrow 2214                             $
## 34             broad 2215                             $
## 35            credit 2211                             $
## 36            shares 2200                             $
## 37           balance 2187                             $
## 38           exports 2078                             $
## 39           imports 2087                             $
## 40              gold 2188                             $
## 41      externalDebt 2079                             $
## 42         homeStock 2198                             $
## 43       abroadStock 2199                             $
## 44          elecProd 2232                           kWh
## 45          elecCons 2233                           kWh
## 46           elecExp 2234                           kWh
## 47           elecImp 2235                           kWh
## 48           elecCap 2236                            kW
## 49        elecFossil 2237 % of total installed capacity
## 50           elecNuc 2239 % of total installed capacity
## 51         elecHydro 2238 % of total installed capacity
## 52         elecRenew 2240 % of total installed capacity
## 53           oilProd 2241                       bbl/day
## 54            oilExp 2242                       bbl/day
## 55            oilImp 2243                       bbl/day
## 56            oilRes 2244                           bbl
## 57         petroProd 2245                       bbl/day
## 58         petroCons 2246                       bbl/day
## 59          petroExp 2247                       bbl/day
## 60          petroImp 2248                       bbl/day
## 61           gasProd 2249                          cu M
## 62           gasCons 2250                          cu M
## 63            gasExp 2251                          cu M
## 64            gasImp 2252                          cu M
## 65            gasRes 2253                          cu M
## 66         mainlines 2150              mainlines in use
## 67              cell 2151                    cellphones
## 68          netHosts 2184                internet hosts
## 69          netUsers 2153                internet users
## 70          airports 2053                      airports
## 71          railways 2121                            km
## 72          roadways 2085                            km
## 73         waterways 2093                            km
## 74            marine 2108               merchant marine
## 75          military 2034                      % of GDP</code></pre>
</div>
<div id="update" class="section level1">
<h1>UPDATE</h1>
<p>This is an update triggered by comments from <span class="citation">[@nmarkgraf]</span>(<a href="https://disqus.com/by/nmarkgraf/?utm_source=reply&amp;utm_medium=email&amp;utm_content=comment_author" class="uri">https://disqus.com/by/nmarkgraf/?utm_source=reply&amp;utm_medium=email&amp;utm_content=comment_author</a>).</p>
<div id="bar-graph" class="section level2">
<h2>Bar graph</h2>
<p>Let’s try a bargraph differentiating counts per group.</p>
<pre class="r"><code>ggplot(tips) +
  aes(x = day, fill = day) +
  geom_bar()</code></pre>
<p><img src="/post/2018-12-12-changing-the-default-color-scheme-in-ggplot2_files/figure-html/unnamed-chunk-17-1.png" width="672" /></p>
<p>Upps, we need to define the new content of <code>scale_fill_discrete()</code>:</p>
<pre class="r"><code>scale_fill_discrete &lt;- function(...) {
   scale_fill_manual(..., values = viridis_qualitative_pal7)
} </code></pre>
<p>Let’s try it.</p>
<pre class="r"><code>ggplot(tips) +
  aes(x = day, fill = day) +
  geom_bar()</code></pre>
<p><img src="/post/2018-12-12-changing-the-default-color-scheme-in-ggplot2_files/figure-html/unnamed-chunk-19-1.png" width="672" /></p>
<p>Works.</p>
<p>Thanks, <span class="citation">[@nmarkgraf]</span>(<a href="https://disqus.com/by/nmarkgraf/?utm_source=reply&amp;utm_medium=email&amp;utm_content=comment_author" class="uri">https://disqus.com/by/nmarkgraf/?utm_source=reply&amp;utm_medium=email&amp;utm_content=comment_author</a>) for pointing out!</p>
<p>Alternatively, using the geom <code>col</code>:</p>
<pre class="r"><code>tips %&gt;% 
  count(day) %&gt;% 
  ggplot() +
    aes(x = day, y = n, fill = day) +
    geom_col()</code></pre>
<p><img src="/post/2018-12-12-changing-the-default-color-scheme-in-ggplot2_files/figure-html/unnamed-chunk-20-1.png" width="672" /></p>
<p>Works.</p>
</div>
<div id="violin-plots" class="section level2">
<h2>Violin plots</h2>
<p>Let’s map <code>day</code> to <code>fill</code>:</p>
<pre class="r"><code>ggplot(tips) +
  aes(x = day, y = tip, fill = day) +
  geom_violin()</code></pre>
<p><img src="/post/2018-12-12-changing-the-default-color-scheme-in-ggplot2_files/figure-html/unnamed-chunk-21-1.png" width="672" /></p>
<p>Works.</p>
<p>And now let’s map <code>day</code> to <code>color</code>:</p>
<pre class="r"><code>ggplot(tips) +
  aes(x = day, y = tip, color = day) +
  geom_violin()</code></pre>
<p><img src="/post/2018-12-12-changing-the-default-color-scheme-in-ggplot2_files/figure-html/unnamed-chunk-22-1.png" width="672" /></p>
<p>Works.</p>
</div>
</div>

    </div>
  </article>

  
<section id="comments">
  <div id="disqus_thread"></div>
  <script>
  var disqus_config = function () {
  
  };
  (function() {
    var inIFrame = function() {
      var iframe = true;
      try { iframe = window.self !== window.top; } catch (e) {}
      return iframe;
    };
    if (inIFrame()) return;
    var d = document, s = d.createElement('script');
    s.src = '//https-data-se-netlify-com.disqus.com/embed.js'; s.async = true;
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
  })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>



</main>

      <footer class="footer">
        <ul class="footer-links">
          <li>
            <a href="/index.xml" type="application/rss+xml" target="_blank">RSS feed</a>
          </li>
          <li>
            <a href="https://gohugo.io/" class="footer-links-kudos">Made with <img src="/images/hugo-logo.png" width="22" height="22"></a>
          </li>
        </ul>
      </footer>

    </div>
    



<script src="//cdn.bootcss.com/highlight.js/9.11.0/highlight.min.js"></script>



<script src="//cdn.bootcss.com/highlight.js/9.11.0/languages/r.min.js"></script>
<script src="//cdn.bootcss.com/highlight.js/9.11.0/languages/yaml.min.js"></script>
<script>hljs.configure({languages: []}); hljs.initHighlightingOnLoad();</script>



    
<script src="/js/math-code.js"></script>
<script async src="//cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>


    
  </body>
</html>

